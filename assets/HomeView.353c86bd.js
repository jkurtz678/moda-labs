import{d as N,u as L,a as M,c as z,r as d,o as c,b as y,e as s,f as $,g as C,F as T,h as r,w as g,t as H,i as R,j as A,_ as U,k as F,l as G,E as I,R as K}from"./index.7f9e6b8d.js";import{u as B,s as i}from"./account.e1669891.js";import{u as O}from"./breakpoints.94a70674.js";import{u as j,a as W}from"./plaque.6559689a.js";import{u as J}from"./token-meta.409ffd38.js";import{u as Q}from"./plaque.1ee49011.js";var X=`@import"https://fonts.googleapis.com/css2?family=K2D&display=swap";:root{--vt-c-white: #ffffff;--vt-c-white-soft: #f8f8f8;--vt-c-white-mute: #f2f2f2;--vt-c-black: #181818;--vt-c-black-soft: #222222;--vt-c-black-mute: #282828;--vt-c-indigo: #2c3e50;--vt-c-divider-light-1: rgba(60, 60, 60, .29);--vt-c-divider-light-2: rgba(60, 60, 60, .12);--vt-c-divider-dark-1: rgba(84, 84, 84, .65);--vt-c-divider-dark-2: rgba(84, 84, 84, .48);--vt-c-text-light-1: var(--vt-c-indigo);--vt-c-text-light-2: rgba(60, 60, 60, .66);--vt-c-text-dark-1: var(--vt-c-white);--vt-c-text-dark-2: rgba(235, 235, 235, .64)}:root{--color-background: var(--vt-c-white);--color-background-soft: var(--vt-c-white-soft);--color-background-mute: var(--vt-c-white-mute);--color-border: var(--vt-c-divider-light-2);--color-border-hover: var(--vt-c-divider-light-1);--color-heading: var(--vt-c-text-light-1);--color-text: var(--vt-c-text-light-1);--section-gap: 160px}*,*:before,*:after{box-sizing:border-box;margin:0;position:relative;font-weight:400}html{height:100%}body{min-height:100vh;color:var(--color-text);background:var(--color-background);transition:color .5s,background-color .5s;line-height:1.6;font-family:K2D,sans-serif;font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}hr{border:.1px solid lightgray}
`,Y="/assets/logo.61e654f6.png",Z="/assets/logo.da9b9095.svg",ee="/assets/search-icon.38a117a4.svg";const te={style:{display:"flex","align-items":"center"}},oe=R("div",{style:{"flex-grow":"1"}},null,-1),ae=A(" Cancel "),se=R("div",{style:{"flex-grow":"1"}},null,-1),re={key:0,style:{"margin-right":"10px"}},ne=A("Logout"),le=N({__name:"Header",setup(S){const o=L(),_=M(),n=B(),{width:P,screen_type:v}=O(),h=(e,t)=>{e.paneName&&typeof e.paneName=="string"&&o.push({name:e.paneName})},w=z(()=>{const e=n.account;if(!e)return"";if(e.entity.ens_name)return e.entity.ens_name;const t=e.entity.wallet_address;return`${t.substring(0,6)}...${t.substring(t.length-4)}`}),m=()=>{n.logout(),o.push({name:"landing",query:{redir:window.location.href}})},u=e=>new URL({"../assets/base.css":X,"../assets/logo.png":Y,"../assets/logo.svg":Z,"../assets/search-icon.svg":ee}[`../assets/${e}`],self.location).href;return(e,t)=>{const p=d("el-image"),f=d("el-button"),l=d("el-tab-pane"),x=d("el-tabs");return c(),y("div",te,[s(v)!="xs"?(c(),$(p,{key:0,src:u("logo.png"),style:{width:"43px",height:"43px","margin-right":"2em"}},null,8,["src"])):C("",!0),s(o).currentRoute.value.name=="qr-scan"?(c(),y(T,{key:1},[oe,r(f,{icon:"close",onClick:t[0]||(t[0]=k=>s(o).push("plaque-list"))},{default:g(()=>[ae]),_:1})],64)):(c(),y(T,{key:2},[r(x,{modelValue:s(_).name,"onUpdate:modelValue":t[1]||(t[1]=k=>s(_).name=k),onTabClick:h},{default:g(()=>[r(l,{label:"Plaques",name:"plaque-list"}),r(l,{label:"Tokens",name:"token-list"})]),_:1},8,["modelValue"]),se,s(v)!="xs"?(c(),y("div",re,H(s(w)),1)):C("",!0),r(f,{onClick:m,style:{"margin-left":"1em"}},{default:g(()=>[ne]),_:1})],64))])}}});const ie=N({__name:"HomeView",setup(S){const o=B(),_=j(),n=J(),P=W(),v=L(),h=F(!1),w=M();return G(async()=>{const m=I.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),{wallet_address:u,signature:e,ens_name:t}=o.getCachedAccountData();if(!u||!e){v.push({name:"landing",query:{redir:window.location.href}}),m.close();return}const p=o.loadAccount(u,e,t),f=P.loadGalleryList(u);if(await Promise.all([p,f]),o.account==null){i("Error - failed to load account");return}const l=o.get_account.entity.wallet_address,x=o.is_guest,k=_.loadPlaques(l).catch(a=>i(`Error loading plaques - ${a}`));let D=Promise.resolve();o.is_wallet_address_admin&&(D=_.loadDemoPlaques().catch(a=>i(`Error loading demo plaques - ${a}`)));let q,E,V;x?(V=n.loadDemoTokens(),q=Promise.resolve(),E=Promise.resolve()):(q=n.loadOpenseaWalletTokenMetas(l).catch(a=>i(`Error loading opensea wallet tokens - ${a}`)),E=n.loadOpenseaMintedTokenMetas(l).catch(a=>i(`Error loading opensea minted tokens - ${a}`)),V=n.loadArchiveTokenMetas(l).catch(a=>i(`Error loading archive token metas - ${a}`))),await Promise.all([k,V,E,D]),await q;const b=w.query.plaque_id;b&&typeof b=="string"&&!_.plaque_map[b]&&await Q(b,{wallet_address:o.get_account.entity.wallet_address,token_meta_id_list:[]}).catch(a=>{i(`Error adding plaque from query param = ${a}`)}),h.value=!0,m.close()}),(m,u)=>{const e=d("el-header"),t=d("el-main"),p=d("el-container");return c(),$(p,{style:{height:"100%"}},{default:g(()=>[r(e,{class:"header"},{default:g(()=>[r(le)]),_:1}),r(t,{style:{"background-color":"#DAD9D7"}},{default:g(()=>[h.value?(c(),$(s(K),{key:0})):C("",!0)]),_:1})]),_:1})}}});var pe=U(ie,[["__scopeId","data-v-06dc3404"]]);export{pe as default};
