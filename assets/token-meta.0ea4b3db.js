import{b as p,T as w,f as T,j as y,c as l,r as h,A as r,E as B,B as M,n as u,K as k,O as f,Q as _,U as g}from"./firebaseConfig.d7a6b5a9.js";import{B as m}from"./types.f299f60b.js";const d=p(T),o=w(d,"token-meta"),b=async t=>{const a=await _(o,{...m.createBaseEntity(),...t}),e=await f(a);return{id:a.id,entity:e.data()}},D=async()=>r(o),W=async(t,a)=>{await g(t,{...m.createBaseEntity(),...a});const e=await f(t);return{id:t.id,entity:e.data()}},q=async(t,a)=>{a.updated_at=u.now();const e=r(d,"token-meta",t);await k(e,a);const s=await f(e);return{id:s.id,entity:s.data()}},A=async t=>{const a={deleted:!0,updated_at:u.now()},e=r(d,"token-meta",t);await k(e,a)},I=async t=>{await y(l(o),a=>{const e=[];a.forEach(n=>{e.push({id:n.id,entity:n.data()})});const s=e.filter(n=>!n.entity.deleted);t(s)})},U=async(t,a)=>{const e=l(o,h("user_id","==",t));await y(e,s=>{const n=[];s.forEach(c=>{n.push({id:c.id,entity:c.data()})});const i=n.filter(c=>!c.entity.deleted);a(i)})},j=async(t,a)=>{await y(r(d,"token-meta",t),e=>{a({id:e.id,entity:e.data()})})},K=async t=>{if(t.length==0)return[];const a=l(o,h(B(),"in",t)),e=await M(a),s=[];return e.forEach(i=>{s.push({id:i.id,entity:i.data()})}),s.filter(i=>!i.entity.deleted)};export{U as a,K as b,b as c,D as d,W as e,A as f,I as g,j as h,q as u};
