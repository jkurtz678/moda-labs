import{_ as x,d as U,r as i,a as k,w as o,b as E,f as l,o as S,j as r,i as p,c2 as C,k as g,u as A,x as h}from"./index.dff6ea94.js";import{k as q,a as B}from"./firebaseConfig.4d01e9b5.js";import{s as c}from"./util.ee5b3ff9.js";import{u as N,e as $}from"./account.c7117c7b.js";import"./types.4ea69ea7.js";const j=U({__name:"SignUpView",setup(K){const v=N(),d=i(!1),m=i(),f=E(),y=i({email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",message:"Please input a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],confirm_password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"},{validator:(u,e,a)=>{if(e!=s.value.password)return a(new Error("Passwords do not match"));a()},trigger:"blur"}]}),s=i({email:"",password:"",confirm_password:""}),w=async u=>{if(!u){c("Error finding form element");return}if(!!await u.validate(a=>a)){d.value=!0;try{const a=await q(B,s.value.email,s.value.password),n=await $(a.user.uid,{email:a.user.email});v.setAccount(n),h({type:"success",message:"Successfully created an account"}),f.push({name:"home"})}catch(a){a.code==="auth/email-already-in-use"?c("Email already in use"):c(a.message)}finally{d.value=!1}}};return(u,e)=>{const a=l("el-input"),n=l("el-form-item"),_=l("el-button"),b=l("el-form"),V=l("el-card"),P=l("el-container");return S(),k(P,{style:{display:"flex","justify-content":"center"}},{default:o(()=>[r(V,{class:"login-card"},{header:o(()=>e[6]||(e[6]=[p("div",{class:"card-header",style:{display:"inline-block"}},[p("span",null,"Sign Up For MoDA Labs")],-1)])),default:o(()=>[r(b,{ref_key:"form_ref",ref:m,model:s.value,rules:y.value,"label-position":"left","label-width":"140px",onKeyup:e[5]||(e[5]=C(t=>w(m.value),["enter","native"]))},{default:o(()=>[r(n,{label:"Email",prop:"email"},{default:o(()=>[r(a,{modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.email=t)},null,8,["modelValue"])]),_:1}),r(n,{label:"Password",prop:"password"},{default:o(()=>[r(a,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.password=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(n,{label:"Confirm Password",prop:"confirm_password"},{default:o(()=>[r(a,{modelValue:s.value.confirm_password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.confirm_password=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(_,{onClick:e[3]||(e[3]=t=>w(m.value)),color:"#000000",loading:d.value,style:{width:"100%"}},{default:o(()=>e[7]||(e[7]=[g("Sign Up ")])),_:1},8,["loading"]),p("div",null,[r(_,{type:"primary",link:"",onClick:e[4]||(e[4]=t=>A(f).push("login")),style:{width:"100%","margin-top":"15px"}},{default:o(()=>e[8]||(e[8]=[g(" Return to login")])),_:1})])]),_:1},8,["model","rules"])]),_:1})]),_:1})}}});var T=x(j,[["__scopeId","data-v-572e5c42"]]);export{T as default};
