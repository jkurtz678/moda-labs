import{d as I,t as q,v as C,r as f,c as i,y as g,z as e,A as z,C as R,F,G as h,f as _,h as r,H as A,I as S,_ as L,J as H,K as J,w as a,L as U,e as T,M as K,N as j,O as G,P as x,S as O,T as w,U as V,V as M,b as N}from"./index.2e0b6610.js";import{a as Q}from"./token-meta.17aea882.js";import{u as E,a as W}from"./token-meta.fb725525.js";const X=e("hr",{class:"hr"},null,-1),Y={class:"card-flex-container"},Z={style:{flex:"1",width:"70px"}},ee=["src"],te={style:{flex:"3 1 0%"}},se={class:"bold"},oe={class:"bold"},ne=I({props:{detail:null,plaque_id:null},setup(n){const t=n,o=q(!1),l=C(()=>!!c.value.entity.token_meta_id_list.find(d=>d==t.detail.id)),c=C(()=>y.plaque_map[t.plaque_id]),y=E(),v=async()=>{if(o.value=!0,l.value){const d=c.value.entity.token_meta_id_list.filter(u=>u!=t.detail.id);await S(t.plaque_id,{token_meta_id_list:d})}else{const d=[...c.value.entity.token_meta_id_list];d.push(t.detail.id),await S(t.plaque_id,{token_meta_id_list:d})}o.value=!1},$=d=>new URL({"../assets/base.css":z,"../assets/logo.png":R,"../assets/logo.svg":F}[`../assets/${d}`],self.location).href;return(d,u)=>{const s=f("el-button");return i(),g(A,null,[X,e("div",Y,[e("div",Z,[e("img",{src:$("logo.png"),style:{width:"70px"}},null,8,ee)]),e("div",te,[e("p",se,h(t.detail.entity.name),1),e("p",oe,h(t.detail.entity.artist),1)]),_(s,{icon:r(l)?"close":"plus",type:r(l)?"danger":"success",plain:"",circle:"",onClick:v,loading:o.value},null,8,["icon","type","loading"])])],64)}}});const le=n=>(j("data-v-16e7b639"),n=n(),G(),n),ae={class:"dialog-container"},ie=le(()=>e("hr",{class:"hr"},null,-1)),de={class:"dialog-footer"},_e=x("Clear"),re=x("Done"),ce=I({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(n,{emit:t}){const o=n,l=q(),c=q(!1),{width:y,screen_type:v}=H(),$=E(),d=C({get(){return o.show_add_token_dialog},set(s){t("update:show_add_token_dialog",s)}}),u=C(()=>{const s=[];if(l!=null&&l.value)for(let p of l==null?void 0:l.value)$.meta_in_playlist(o.plaque_id,p.id)?s.unshift(p):s.push(p);return s});return J(d,async s=>{!s||(c.value=!0,l.value=await Q(),c.value=!1)}),(s,p)=>{const k=f("el-card"),b=f("el-button"),P=f("el-dialog");return i(),g("div",ae,[_(P,{class:"box-dialog",center:"",modelValue:r(d),"onUpdate:modelValue":p[0]||(p[0]=B=>K(d)?d.value=B:null),title:"Add tokens","close-on-click-modal":"false",fullscreen:r(v)=="xs","custom-class":"add-dialog"},{footer:a(()=>[e("span",de,[_(b,null,{default:a(()=>[_e]),_:1}),_(b,{type:"info"},{default:a(()=>[re]),_:1})])]),default:a(()=>[_(k,{class:"box-card",shadow:"never"},{default:a(()=>[(i(!0),g(A,null,U(r(u),B=>(i(),T(ne,{plaque_id:n.plaque_id,detail:B},null,8,["plaque_id","detail"]))),256)),ie]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var ue=L(ce,[["__scopeId","data-v-16e7b639"]]);const pe=e("hr",{class:"hr"},null,-1),ge={class:"card-flex-container"},me={style:{flex:"1"}},fe=["src"],he={style:{flex:"3 1 0%"}},ye={class:"bold"},ve={class:"bold"},ke={style:{flex:"1","text-align":"right","padding-right":"1em"}},we={key:0,class:"card-body"},xe={class:"card-flex-container"},$e={style:{flex:"1",width:"30%"}},qe=["src"],be={style:{flex:"3 1 0%",width:"70%"}},Ce={class:"bold bigger-font description"},Ae={class:"description"},Te=I({props:{token_meta:null},setup(n){const t=n,o=O({expanded:!1}),l=c=>new URL({"../assets/base.css":z,"../assets/logo.png":R,"../assets/logo.svg":F}[`../assets/${c}`],self.location).href;return(c,y)=>{var u,s,p,k;const v=f("ArrowRightBold"),$=f("ArrowDownBold"),d=f("el-icon");return i(),g(A,null,[pe,e("div",ge,[e("div",me,[e("img",{src:l("logo.png"),class:"image",style:{"max-width":"70px"}},null,8,fe)]),e("div",he,[e("p",ye,h((s=(u=t.token_meta)==null?void 0:u.entity)==null?void 0:s.name),1),e("p",ve,h((k=(p=t.token_meta)==null?void 0:p.entity)==null?void 0:k.artist),1)]),e("div",ke,[_(d,{onClick:y[0]||(y[0]=b=>r(o).expanded=!r(o).expanded)},{default:a(()=>[r(o).expanded?w("",!0):(i(),T(v,{key:0})),r(o).expanded?(i(),T($,{key:1})):w("",!0)]),_:1}),e("p",{onClick:y[1]||(y[1]=()=>{})},"Archive")])]),r(o).expanded?(i(),g("div",we,[e("div",xe,[e("div",$e,[e("div",null,h(t.token_meta.entity.name),1),e("img",{style:{width:"121px"},src:l("logo.png")},null,8,qe)]),e("div",be,[e("div",Ce,h(t.token_meta.entity.artist),1),e("div",Ae,h(t.token_meta.entity.description),1)])])])):w("",!0)],64)}}});const D=n=>(j("data-v-26371d9b"),n=n(),G(),n),Be=D(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ie=x("online"),Ne={key:0},Se={style:{padding:"0 1em"}},De={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Pe=x("Settings"),Ve=x("Add Artwork"),Ue=D(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ee=D(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Me={style:{padding:"1em"}},ze={key:0,class:"card-detail"},Re={key:0,style:{padding:"1em"}},Fe={style:{display:"flex",padding:"1em"}},Le=x("Clear Tokens"),je=D(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ge=x("Forget Display"),He=I({props:{plaque:null},setup(n){const t=n,o=q(!1),l=q(!1),c=W();c.token_meta_list;const y=C(()=>v.value.length==0?null:v.value[0]),v=C(()=>{const u=c.token_meta_map;return t.plaque.entity.token_meta_id_list.map(p=>u[p])});q("0"),q(!0);const $=()=>{M.confirm(`Are you sure you want to clear tokens for plaque '${t.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{S(t.plaque.id,{token_meta_id_list:[]}).then(()=>{N({type:"success",message:"Tokens cleared"})}).catch(u=>{N({message:`Error clearing tokens from plaque - ${u}`,type:"error",showClose:!0,duration:12e3})})})},d=()=>{M.confirm(`Are you sure you want to forget the plaque named '${t.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{S(t.plaque.id,{account_id:""}).then(()=>{N({type:"success",message:"Plaque forgotten"})}).catch(u=>{N({message:`Error forgetting plaque - ${u}`,type:"error",showClose:!0,duration:12e3})})})};return(u,s)=>{const p=f("el-tag"),k=f("el-button"),b=f("el-col"),P=f("el-row"),B=f("el-card");return i(),T(B,null,{header:a(()=>[e("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:s[0]||(s[0]=m=>o.value=!o.value)},[e("h1",null,h(t.plaque.entity.name),1),Be,_(p,{class:"ml-2",type:"success"},{default:a(()=>[Ie]),_:1})]),_(V,{name:"el-fade-in-linear"},{default:a(()=>[o.value?(i(),g("section",Ne,[e("p",Se,h(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),e("div",De,[_(k,null,{default:a(()=>[Pe]),_:1}),_(k,{type:"info",onClick:s[1]||(s[1]=m=>l.value=!0)},{default:a(()=>[Ve]),_:1})])])):w("",!0)]),_:1})]),default:a(()=>[_(V,{name:"el-fade-in-linear"},{default:a(()=>[o.value?w("",!0):(i(),g("section",{key:0,class:"card-simple",onClick:s[2]||(s[2]=m=>o.value=!0)},[_(P,{style:{"margin-bottom":"8px",padding:"1em"}},{default:a(()=>[_(b,{span:12},{default:a(()=>{var m;return[Ue,e("span",null,h(((m=r(y))==null?void 0:m.entity.name)||"N/A"),1)]}),_:1}),_(b,{span:12},{default:a(()=>{var m;return[Ee,x(" "+h(((m=r(y))==null?void 0:m.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),e("div",Me,h(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),_(V,{name:"el-fade-in-linear"},{default:a(()=>[o.value?(i(),g("section",ze,[r(v).length==0?(i(),g("div",Re,"No tokens added")):w("",!0),(i(!0),g(A,null,U(r(v),m=>(i(),T(Te,{token_meta:m},null,8,["token_meta"]))),256)),e("div",Fe,[_(k,{onClick:$},{default:a(()=>[Le]),_:1}),je,_(k,{type:"danger",plain:"",onClick:d},{default:a(()=>[Ge]),_:1})])])):w("",!0)]),_:1}),_(ue,{plaque_id:t.plaque.id,show_add_token_dialog:l.value,"onUpdate:show_add_token_dialog":s[3]||(s[3]=m=>l.value=m)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Je=L(He,[["__scopeId","data-v-26371d9b"]]);const Ke={key:0,style:{padding:"1em"}},Xe=I({setup(n){const t=E();return(o,l)=>(i(),g(A,null,[r(t).plaques.length==0?(i(),g("div",Ke,"No plaques connected")):w("",!0),(i(!0),g(A,null,U(r(t).plaques,c=>(i(),T(Je,{plaque:c,key:c.id},null,8,["plaque"]))),128))],64))}});export{Xe as default};
