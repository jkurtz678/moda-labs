import{y as s}from"./index.c7516d85.js";import{g as _,a as n,b as o}from"./plaque.7c883b56.js";import{u}from"./account.52d41ebd.js";import"./gallery.fa9a8f7a.js";const q=s({id:"plaque",state:()=>({plaque_list:[],gallery_plaque_list:[]}),getters:{all_plaque_list(a){return Object.values(this.plaque_map)},plaque_map(a){const l={};return a.plaque_list.forEach(t=>{l[t.id]=t}),a.gallery_plaque_list.forEach(t=>{l[t.id]=t}),l},plaque_media_map(a){const l={};return this.all_plaque_list.forEach(t=>{l[t.id]={},t.entity.local_media_list.forEach(e=>{l[t.id][e.file_name]=e})}),l},meta_in_playlist(){return(a,l)=>this.plaque_map[a].entity.token_meta_id_list.some(e=>e==l)},token_meta_id_list(){let a=[];return this.all_plaque_list.forEach(l=>{a.push(...l.entity.token_meta_id_list)}),a}},actions:{async loadPlaques(a){if(u().is_user_admin){await _(t=>{for(let e=0;e<t.length;e++)t[e].entity.token_meta_id_list==null&&(t[e].entity.token_meta_id_list=[]);this.plaque_list=t});return}await n(a,t=>{for(let e=0;e<t.length;e++)t[e].entity.token_meta_id_list==null&&(t[e].entity.token_meta_id_list=[]);this.plaque_list=t})},async loadGalleryPlaques(a){const l=[];a.forEach(e=>{l.push(e.entity.plaque_id)}),console.log("plaque_id_list",l);const t=[];for(let e=0;e<l.length;e+=10){const i=await o(l.slice(e,e+10));t.push(...i)}this.gallery_plaque_list=t}}});export{q as u};
