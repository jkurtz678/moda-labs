import{_ as q,a as S,b as U,c as E}from"./search-icon.822e7617.js";import{_ as $,d as B,r as d,q as M,e as N,w as s,u as R,a as j,b as n,o as A,i as a,bF as D,k as m,j as p,f as b,z as h,p as F,m as K}from"./index.2c25157e.js";import{i as W,a as z}from"./firebaseConfig.4bdd3a5f.js";import{s as x}from"./util.b53628ef.js";const C=u=>(F("data-v-b6aa5656"),u=u(),K(),u),T=C(()=>m("div",{class:"card-header"},[m("span",null,"Login to MoDA Labs")],-1)),G={style:{display:"flex","justify-content":"space-between"}},H={style:{"margin-top":"20px"}},J=B({__name:"LoginView",setup(u){const _=d(!1),g=d(),c=R(),f=j(),V=d({email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",message:"Please input a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]}),t=d({email:"",password:""});M(()=>{const l=localStorage.getItem("saved_email");l&&(t.value.email=l)});const w=async l=>{if(!l){x("Error finding form element");return}!await l.validate(o=>o)||(_.value=!0,W(z,t.value.email,t.value.password).then(o=>{var i;if((i=o==null?void 0:o.user)!=null&&i.email&&localStorage.setItem("saved_email",o.user.email),f.query.redir&&typeof f.query.redir=="string"){window.location.assign(f.query.redir);return}c.push({name:"home"})}).catch(o=>{o.code==="auth/user-not-found"?h({type:"error",message:"User not found"}):o.code==="auth/wrong-password"?h({type:"error",message:"Wrong password"}):x(o.message)}).finally(()=>{_.value=!1}))},k=l=>new URL({"../assets/base.css":q,"../assets/logo.png":S,"../assets/logo.svg":U,"../assets/search-icon.svg":E}[`../assets/${l}`],self.location).href;return(l,e)=>{const o=n("el-image"),i=n("el-input"),y=n("el-form-item"),v=n("el-button"),I=n("el-form"),L=n("el-card"),P=n("el-container");return A(),N(P,{style:{display:"flex","align-items":"center","flex-direction":"column"}},{default:s(()=>[a(L,{class:"login-card",style:{"margin-top":"80px"}},{header:s(()=>[a(o,{src:k("logo.png"),style:{height:"170px",width:"170px",margin:"auto",display:"block","margin-bottom":"15px"}},null,8,["src"]),T]),default:s(()=>[a(I,{ref_key:"form_ref",ref:g,model:t.value,rules:V.value,"label-position":"left","label-width":"110px",onKeyup:e[4]||(e[4]=D(r=>w(g.value),["enter","native"]))},{default:s(()=>[a(y,{label:"Email",prop:"email"},{default:s(()=>[a(i,{modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.email=r)},null,8,["modelValue"])]),_:1}),a(y,{label:"Password",prop:"password"},{default:s(()=>[a(i,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.password=r),type:"password"},null,8,["modelValue"])]),_:1}),m("div",G,[a(v,{onClick:e[2]||(e[2]=r=>w(g.value)),color:"#000000",loading:_.value},{default:s(()=>[p("Login")]),_:1},8,["loading"]),a(v,{type:"primary",link:"",onClick:e[3]||(e[3]=r=>b(c).push("forgot-password"))},{default:s(()=>[p("Forgot Password?")]),_:1})])]),_:1},8,["model","rules"])]),_:1}),m("div",H,[p("Don't have an account? "),a(v,{type:"primary",link:"",onClick:e[5]||(e[5]=r=>b(c).push("sign-up"))},{default:s(()=>[p(" Sign Up ")]),_:1})])]),_:1})}}});var Z=$(J,[["__scopeId","data-v-b6aa5656"]]);export{Z as default};
