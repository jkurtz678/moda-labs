import{a as w}from"./bid.3628f065.js";import{i as k}from"./token-meta.3b6b8610.js";import{s as f}from"./util.2465e7f3.js";import{a as C}from"./thumbnail-image.48cb66b5.js";import{p as $}from"./types.903c99bc.js";import{d as x,J as A,h as l,i as r,u as p,t as c,e as B,b as T,o,_ as E,r as h,c as s,m as R,F as g,H as v,a as L}from"./index.cbd65a3d.js";import"./firebaseConfig.4d01e9b5.js";const M={style:{display:"flex","flex-direction":"column",height:"100%"}},S={style:{display:"flex","justify-content":"center","background-color":"#eeeeee","border-radius":"18px","flex-grow":"1"}},V=["src"],D={style:{"font-weight":"bold"}},F=x({__name:"CatalogArtTile",props:{token_meta:{}},setup(d){B();const n=T(),a=d,m=C(A(a,"token_meta"));return(y,u)=>(o(),l("div",{style:{margin:"12px",width:"340px"},onClick:u[0]||(u[0]=t=>p(n).push({name:"qr-landing",params:{token_meta_id:a.token_meta.id}}))},[r("div",M,[r("div",S,[r("img",{src:p(m)},null,8,V)]),r("h2",D,c(a.token_meta.entity.name),1),r("div",null,c(p($)(a.token_meta)),1)])]))}});var W=E(F,[["__scopeId","data-v-439129c5"]]);const j={style:{"overflow-y":"auto",height:"100%"}},q={class:"container"},H={style:{"font-weight":"bold"}},I={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},Q=x({__name:"CatalogView",setup(d){const n=h([]),a=h([]);s(()=>n.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const m=s(()=>Array.from(new Set(n.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),y=s(()=>n.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),u=s(()=>n.value.reduce((t,e)=>(t[e.id]=e,t),{}));return s(()=>a.value.map(t=>{var i,_;const e=u.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(i=e==null?void 0:e.entity)==null?void 0:i.artist,artwork_name:(_=e==null?void 0:e.entity)==null?void 0:_.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),R(async()=>{k(t=>{console.log("R",t),n.value=t}).catch(t=>{f(`Error fetching token metas: ${t}`)}),w(t=>{console.log("bids",t),a.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{f(`Error fetching bids: ${t}`)})}),(t,e)=>(o(),l("div",j,[r("div",q,[(o(!0),l(g,null,v(m.value,i=>(o(),l("div",{key:i,style:{margin:"24px 0px"}},[r("h1",H,c(i),1),r("div",I,[(o(!0),l(g,null,v(y.value[i],_=>(o(),L(W,{token_meta:_},null,8,["token_meta"]))),256))])]))),128))])]))}});export{Q as default};
