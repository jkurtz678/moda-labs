import{d as j,r,o as p,b as k,i as t,t as $,h as e,F as E,_ as R,k as x,c as C,v as Z,w as s,x as Q,y as ee,e as h,g as z,z as F,f as U,A as te,B as M,C as J,j as f,D as se,G as O,m as N,u as oe}from"./index.0e888a2d.js";import{u as D,c as le}from"./plaque.b6b931fe.js";import{u as H}from"./plaque.0c72eacc.js";import{_ as ne,a as ae,b as ie,c as _e,u as K,d as W}from"./token-meta.79201705.js";import{s as de,u as re,h as G}from"./account.fc5ec16a.js";import{_ as ue}from"./PlaqueTokenItem.59272204.js";import"./token-meta.134d4694.js";const ce=t("hr",{class:"hr"},null,-1),pe={class:"card-flex-container"},me={style:{flex:"1",width:"70px"}},fe=["src"],ge={style:{flex:"3 1 0%"}},ve={class:"bold"},he={class:"bold"},ye=j({props:{in_list:{type:Boolean},token:null},emits:["update_token_list"],setup(l,{emit:u}){const _=l,d=c=>new URL({"../assets/base.css":ne,"../assets/logo.png":ae,"../assets/logo.svg":ie,"../assets/search-icon.svg":_e}[`../assets/${c}`],self.location).href;return(c,m)=>{const w=r("el-button");return p(),k(E,null,[ce,t("div",pe,[t("div",me,[t("img",{src:d("logo.png"),style:{width:"70px"}},null,8,fe)]),t("div",ge,[t("p",ve,$(_.token.entity.name),1),t("p",he,$(_.token.entity.artist),1)]),e(w,{icon:l.in_list?"close":"plus",type:l.in_list?"danger":"success",plain:"",circle:"",onClick:m[0]||(m[0]=S=>u("update_token_list",_.token.id))},null,8,["icon","type"])])],64)}}});const X=l=>(M("data-v-114a62b2"),l=l(),J(),l),ke={class:"dialog-container"},we=["prefix-icon"],qe={key:0},xe=X(()=>t("hr",{class:"hr"},null,-1)),$e={class:"dialog-footer"},be=X(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Ce=f("Clear"),Se=f("Save"),Ae=j({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(l,{emit:u}){const _=l,d=x([]),c=x(!1),m=x(""),{width:w,screen_type:S}=K(),A=H(),y=W(),o=C({get(){return _.show_add_token_dialog},set(n){u("update:show_add_token_dialog",n)}});Z(o,n=>{n&&(d.value=JSON.parse(JSON.stringify(P.value.entity.token_meta_id_list)))});const g=C(()=>y.archive_token_meta_list),b=C(()=>{const n=[];if(g!=null&&g.value)for(let a of g==null?void 0:g.value)A.meta_in_playlist(_.plaque_id,a.id)?n.unshift(a):n.push(a);return m.value.trim()!==""?n.filter(a=>{var i,B;return((i=a.entity.artist)==null?void 0:i.toLowerCase().includes(m.value.toLowerCase()))||((B=a.entity.name)==null?void 0:B.toLowerCase().includes(m.value.toLowerCase()))}):n}),P=C(()=>A.plaque_map[_.plaque_id]),L=C(()=>{const n={};return d.value.forEach(a=>{n[a]=!0}),n}),v=n=>{d.value.some(a=>a===n)?d.value=d.value.filter(a=>a!=n):d.value.push(n)},q=async()=>{c.value=!0,await D(_.plaque_id,{token_meta_id_list:d.value}).catch(n=>{de(`Error updating plaque tokens - ${n}`)}),c.value=!1,o.value=!1},V=()=>{d.value=[]};return(n,a)=>{const i=r("el-card"),B=r("el-button"),Y=r("el-dialog");return p(),k("div",ke,[e(Y,{center:"",modelValue:h(o),"onUpdate:modelValue":a[1]||(a[1]=T=>te(o)?o.value=T:null),title:"Add tokens to plaque","close-on-click-modal":!1,fullscreen:h(S)=="xs"},{footer:s(()=>[t("span",$e,[t("div",null,$(`Tokens in playlist: ${d.value.length}`),1),be,e(B,{onClick:V},{default:s(()=>[Ce]),_:1}),e(B,{type:"info",onClick:q,loading:c.value},{default:s(()=>[Se]),_:1},8,["loading"])])]),default:s(()=>[Q(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=T=>m.value=T),class:"search-bar",placeholder:"Search by artwork title or artist name","prefix-icon":n.Search},null,8,we),[[ee,m.value]]),e(i,{class:"box-card",shadow:"never"},{default:s(()=>[h(b).length==0?(p(),k("div",qe,"No tokens found")):z("",!0),(p(!0),k(E,null,F(h(b),T=>(p(),U(ye,{token:T,in_list:Boolean(h(L)[T.id]),onUpdate_token_list:v},null,8,["token","in_list"]))),256)),xe]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var Pe=R(Ae,[["__scopeId","data-v-114a62b2"]]);const I=l=>(M("data-v-4bee7b86"),l=l(),J(),l),Te={style:{display:"flex","align-items":"center",padding:"1em"}},Le=I(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Ve=f("online"),Be={class:"card-simple"},Ne=I(()=>t("hr",null,null,-1)),Ee=I(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ie=I(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),ze={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"1em"}},Ue={style:{padding:"1em"}},je=f(" View "),De={key:0,class:"card-detail"},Re={style:{padding:"0 1em"}},Fe={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Me=f("Settings"),Je=f("Add Artwork"),Oe={key:0,style:{padding:"1em"}},Ge={style:{display:"flex",padding:"1em"}},Qe=f("Clear Tokens"),He=I(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Ke=f("Close"),We={key:0,style:{padding:"1em",display:"flex","justify-content":"space-between"}},Xe=f("Forget Display"),Ye=f("Close"),Ze=j({props:{plaque:null},setup(l){const u=l,_=x("simple"),d=x(!1),c=W(),m=C(()=>w.value.length==0?null:w.value[0]),w=C(()=>{const y=c.archive_token_meta_map;return u.plaque.entity.token_meta_id_list.map(g=>y[g])});x("0"),x(!0);const S=()=>{O.confirm(`Are you sure you want to clear tokens for plaque '${u.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{D(u.plaque.id,{token_meta_id_list:[]}).then(()=>{N({type:"success",message:"Tokens cleared"})}).catch(y=>{N({message:`Error clearing tokens from plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})},A=()=>{O.confirm(`Are you sure you want to forget the plaque named '${u.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{D(u.plaque.id,{wallet_address:""}).then(()=>{N({type:"success",message:"Plaque forgotten"})}).catch(y=>{N({message:`Error forgetting plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})};return(y,o)=>{const g=r("el-tag"),b=r("el-col"),P=r("el-row"),L=r("ArrowRight"),v=r("el-icon"),q=r("el-button"),V=r("el-collapse-transition"),n=r("Close"),a=r("el-card");return p(),U(a,null,{default:s(()=>[t("div",Te,[t("h1",null,$(u.plaque.entity.name),1),Le,e(g,{class:"ml-2",type:"success"},{default:s(()=>[Ve]),_:1})]),e(V,null,{default:s(()=>[Q(t("section",Be,[Ne,e(P,{style:{"margin-bottom":"8px",padding:"1em"}},{default:s(()=>[e(b,{span:12},{default:s(()=>{var i;return[Ee,t("span",null,$(((i=h(m))==null?void 0:i.entity.name)||"N/A"),1)]}),_:1}),e(b,{span:12},{default:s(()=>{var i;return[Ie,f(" "+$(((i=h(m))==null?void 0:i.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),t("div",ze,[t("div",Ue,$(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),e(q,{onClick:o[0]||(o[0]=i=>_.value="detail")},{default:s(()=>[je,e(v,{class:"el-icon--right"},{default:s(()=>[e(L)]),_:1})]),_:1})])],512),[[se,_.value=="simple"]])]),_:1}),e(V,null,{default:s(()=>[_.value=="detail"?(p(),k("section",De,[t("p",Re,$(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),t("div",Fe,[e(q,{onClick:o[1]||(o[1]=i=>_.value="settings")},{default:s(()=>[Me]),_:1}),e(q,{type:"info",onClick:o[2]||(o[2]=i=>d.value=!0)},{default:s(()=>[Je]),_:1})]),h(w).length==0?(p(),k("div",Oe,"No tokens added")):z("",!0),(p(!0),k(E,null,F(h(w),i=>(p(),U(ue,{token_meta:i},null,8,["token_meta"]))),256)),t("div",Ge,[e(q,{onClick:S},{default:s(()=>[Qe]),_:1}),He,e(q,{onClick:o[3]||(o[3]=i=>_.value="simple")},{default:s(()=>[Ke,e(v,{class:"el-icon--right"},{default:s(()=>[e(n)]),_:1})]),_:1})])])):z("",!0)]),_:1}),e(V,null,{default:s(()=>[_.value=="settings"?(p(),k("section",We,[e(q,{type:"danger",plain:"",onClick:A},{default:s(()=>[Xe]),_:1}),e(q,{onClick:o[4]||(o[4]=i=>_.value="detail")},{default:s(()=>[Ye,e(v,{class:"el-icon--right"},{default:s(()=>[e(n)]),_:1})]),_:1})])):z("",!0)]),_:1}),e(Pe,{plaque_id:u.plaque.id,show_add_token_dialog:d.value,"onUpdate:show_add_token_dialog":o[5]||(o[5]=i=>d.value=i)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var et=R(Ze,[["__scopeId","data-v-4bee7b86"]]);const tt=l=>(M("data-v-4c8baa0e"),l=l(),J(),l),st={class:"add-button-container"},ot={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},lt=tt(()=>t("div",{style:{"font-size":"17px"}},"Add plaque",-1)),nt={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},at=f("Scan Plaque QR Code"),it=f("Add test plaque "),_t=j({setup(l){const u=x(!1),{width:_,screen_type:d}=K(),c=x(!1),m=oe(),w=re(),S=H(),A=async()=>{u.value=!0,await le({name:"Test Plaque",wallet_address:w.get_account.entity.wallet_address,token_meta_id_list:[],created_at:G.now(),updated_at:G.now()}).catch(y=>N({message:`Error creating test plaque- ${y}`,type:"error",showClose:!0,duration:12e3})),u.value=!1,c.value=!1};return(y,o)=>{const g=r("Plus"),b=r("el-icon"),P=r("el-button"),L=r("el-dialog");return p(),k(E,null,[(p(!0),k(E,null,F(h(S).plaques,v=>(p(),U(et,{plaque:v,key:v.id},null,8,["plaque"]))),128)),t("div",st,[t("div",ot,[t("div",{class:"add-button",onClick:o[0]||(o[0]=v=>c.value=!0)},[e(b,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:s(()=>[e(g)]),_:1}),lt])])]),e(L,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=v=>c.value=v),title:"Add plaque",width:h(d)=="xs"?"90%":"50%"},{default:s(()=>[t("div",nt,[e(P,{onClick:o[1]||(o[1]=v=>{h(m).push("qr-scan"),c.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:s(()=>[at]),_:1}),e(P,{icon:"plus",onClick:A,loading:u.value,style:{margin:"10px 0px 10px 0px"}},{default:s(()=>[it]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var gt=R(_t,[["__scopeId","data-v-4c8baa0e"]]);export{gt as default};
