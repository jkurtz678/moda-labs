import{d as z,c as I,r as c,o as u,b as q,i as e,h as t,t as T,e as g,F as B,_ as R,k as x,v as se,w as o,x as O,y as K,g as V,z as F,f as L,A as le,B as J,C as W,j as h,D as ne,G as ae,H as ie,I as G,p as D,u as _e}from"./index.cbe8526e.js";import{u as U,c as de}from"./plaque.bc0a4c84.js";import{c as re}from"./token-meta.fa7bc345.js";import{u as X}from"./plaque.5a224ab1.js";import{i as ue,u as Y,T as H,s as Z,j as Q}from"./account.031ec48a.js";import{_ as ce,a as pe,b as me,c as fe,u as ee,d as te}from"./token-meta.67f4e8c1.js";import{_ as ge}from"./PlaqueTokenItem.6703c872.js";const ve=e("hr",{class:"hr"},null,-1),ye={class:"card-flex-container"},he={style:{display:"flex","align-items":"center",margin:"5px 25px 5px 0px"}},ke={style:{flex:"3 1 0%"}},we={class:"bold"},qe={class:"bold"},xe={style:{"margin-right":"35px",opacity:"0.5"}},$e=z({props:{in_list:{type:Boolean},token:null},emits:["update_token_list"],setup(n,{emit:d}){const r=n,_=I(()=>ue(r.token.entity.platform)),p=m=>new URL({"../assets/base.css":ce,"../assets/logo.png":pe,"../assets/logo.svg":me,"../assets/search-icon.svg":fe}[`../assets/${m}`],self.location).href;return(m,A)=>{const P=c("el-image"),S=c("el-button");return u(),q(B,null,[ve,e("div",ye,[e("div",he,[t(P,{src:r.token.entity.thumbnail_url||p("logo.png"),style:{width:"50px",height:"50px"},fit:"contain"},null,8,["src"])]),e("div",ke,[e("p",we,T(r.token.entity.name),1),e("p",qe,T(r.token.entity.artist),1)]),e("div",xe,T(g(_)),1),t(S,{icon:n.in_list?"close":"plus",type:n.in_list?"danger":"success",plain:"",circle:"",onClick:A[0]||(A[0]=$=>d("update_token_list",r.token.id))},null,8,["icon","type"])])],64)}}});const oe=n=>(J("data-v-398c1f5a"),n=n(),W(),n),Ce={class:"dialog-container"},be={key:0},Se=oe(()=>e("hr",{class:"hr"},null,-1)),Te={class:"dialog-footer"},Ae=oe(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Pe=h("Clear"),Ie=h("Save"),Ne=z({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(n,{emit:d}){const r=n,_=x([]),p=x(!1),m=x(""),{screen_type:A}=ee(),P=X(),S=te(),$=Y(),v=I({get(){return r.show_add_token_dialog},set(i){d("update:show_add_token_dialog",i)}});se(v,i=>{i&&(_.value=JSON.parse(JSON.stringify(a.value.entity.token_meta_id_list)))});const C=I(()=>Object.values(S.all_token_metas)),y=I(()=>{const i=[];if(C!=null&&C.value)for(let s of C==null?void 0:C.value)P.meta_in_playlist(r.plaque_id,s.id)?i.unshift(s):i.push(s);return m.value.trim()!==""?i.filter(s=>{var k,w;return((k=s.entity.artist)==null?void 0:k.toLowerCase().includes(m.value.toLowerCase()))||((w=s.entity.name)==null?void 0:w.toLowerCase().includes(m.value.toLowerCase()))}):i}),a=I(()=>P.plaque_map[r.plaque_id]),f=I(()=>{const i={};return _.value.forEach(s=>{i[s]=!0}),i}),b=i=>{_.value.some(s=>s===i)?_.value=_.value.filter(s=>s!=i):_.value.push(i)},j=async()=>{p.value=!0;try{for(let[i,s]of _.value.entries()){const k=S.all_token_metas[s];if(!k)throw"Failed to find store token for token: "+s;if(k.entity.platform!=H.Opensea)return;const w=JSON.parse(JSON.stringify(k));w.entity.wallet_address=$.get_account.entity.wallet_address,w.entity.platform=H.OpenseaArchive;const E=await re(w.entity);console.log("NEW META ID",E.id),_.value[i]=E.id}console.log("NEW META ID LIST",_.value),await U(r.plaque_id,{token_meta_id_list:_.value})}catch(i){Z(`Error updating plaque tokens - ${i}`)}p.value=!1,v.value=!1},M=()=>{_.value=[]};return(i,s)=>{const k=c("el-card"),w=c("el-button"),E=c("el-dialog");return u(),q("div",Ce,[t(E,{center:"",modelValue:g(v),"onUpdate:modelValue":s[1]||(s[1]=l=>le(v)?v.value=l:null),title:"Add tokens to plaque","close-on-click-modal":!1,fullscreen:g(A)=="xs"},{footer:o(()=>[e("span",Te,[e("div",null,T(`Tokens in playlist: ${_.value.length}`),1),Ae,t(w,{onClick:M},{default:o(()=>[Pe]),_:1}),t(w,{type:"info",onClick:j,loading:p.value},{default:o(()=>[Ie]),_:1},8,["loading"])])]),default:o(()=>[O(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>m.value=l),class:"search-bar",placeholder:"Search by artwork title or artist name"},null,512),[[K,m.value]]),t(k,{class:"box-card",shadow:"never"},{default:o(()=>[g(y).length==0?(u(),q("div",be,"No tokens found")):V("",!0),(u(!0),q(B,null,F(g(y),l=>(u(),L($e,{token:l,in_list:Boolean(g(f)[l.id]),onUpdate_token_list:b},null,8,["token","in_list"]))),256)),Se]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var Ee=R(Ne,[["__scopeId","data-v-398c1f5a"]]);const N=n=>(J("data-v-2285ddc0"),n=n(),W(),n),Ve={style:{display:"flex","align-items":"center",padding:"1em"}},Le={key:0},Be=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),De=h("online"),je={class:"card-simple"},Ue=N(()=>e("hr",null,null,-1)),ze=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Me=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Oe={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"1em"}},Re={style:{padding:"1em"}},Fe=h(" View "),Je={key:0,class:"card-detail"},We={style:{padding:"0 1em"}},Ge={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},He=h("Settings"),Qe=h("Add Artwork"),Ke=N(()=>e("hr",null,null,-1)),Xe=N(()=>e("div",{style:{padding:"1em"}}," No tokens added",-1)),Ye=N(()=>e("hr",null,null,-1)),Ze={style:{display:"flex",padding:"1em"}},et=h("Clear Tokens"),tt=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),ot=h("Close"),st={key:0,style:{padding:"1em",display:"flex","justify-content":"space-between"}},lt=h("Forget Display"),nt=h("Close"),at=z({props:{plaque:null},setup(n){const d=n,r=x("simple"),_=x(!1),p=x(!1),m=x(!1),A=async()=>{m.value=!0,await U(d.plaque.id,{name:d.plaque.entity.name}).catch(y=>{Z(`Error updating plaque tokens - ${y}`)}),p.value=!1,m.value=!1},P=te(),S=I(()=>$.value.length==0?null:$.value[0]),$=I(()=>{const y=P.archive_token_meta_map;return d.plaque.entity.token_meta_id_list.map(f=>y[f])});x("0"),x(!0);const v=()=>{G.confirm(`Are you sure you want to clear tokens for plaque '${d.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{U(d.plaque.id,{token_meta_id_list:[]}).then(()=>{D({type:"success",message:"Tokens cleared"})}).catch(y=>{D({message:`Error clearing tokens from plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})},C=()=>{G.confirm(`Are you sure you want to forget the plaque named '${d.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{U(d.plaque.id,{wallet_address:"",token_meta_id_list:[]}).then(()=>{D({type:"success",message:"Plaque forgotten"})}).catch(y=>{D({message:`Error forgetting plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})};return(y,a)=>{const f=c("el-button"),b=c("el-tag"),j=c("el-col"),M=c("el-row"),i=c("ArrowRight"),s=c("el-icon"),k=c("el-collapse-transition"),w=c("Close"),E=c("el-card");return u(),L(E,null,{default:o(()=>[e("div",Ve,[p.value?O((u(),q("input",{key:1,"onUpdate:modelValue":a[0]||(a[0]=l=>d.plaque.entity.name=l),class:"edit-name-input"},null,512)),[[K,d.plaque.entity.name]]):(u(),q("h1",Le,T(d.plaque.entity.name),1)),p.value?V("",!0):(u(),L(f,{key:2,icon:g(ne),onClick:a[1]||(a[1]=l=>p.value=!0),class:"editIcon",circle:""},null,8,["icon"])),p.value?(u(),L(f,{key:3,icon:g(ae),loading:m.value,onClick:A,class:"editIcon",circle:"",type:m.value?"":"success",text:""},null,8,["icon","loading","type"])):V("",!0),Be,t(b,{class:"ml-2",type:"success"},{default:o(()=>[De]),_:1})]),t(k,null,{default:o(()=>[O(e("section",je,[Ue,t(M,{style:{"margin-bottom":"8px",padding:"1em"}},{default:o(()=>[t(j,{span:12},{default:o(()=>{var l;return[ze,e("span",null,T(((l=g(S))==null?void 0:l.entity.name)||"N/A"),1)]}),_:1}),t(j,{span:12},{default:o(()=>{var l;return[Me,h(" "+T(((l=g(S))==null?void 0:l.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),e("div",Oe,[e("div",Re,T(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),t(f,{onClick:a[2]||(a[2]=l=>r.value="detail")},{default:o(()=>[Fe,t(s,{class:"el-icon--right"},{default:o(()=>[t(i)]),_:1})]),_:1})])],512),[[ie,r.value=="simple"]])]),_:1}),t(k,null,{default:o(()=>[r.value=="detail"?(u(),q("section",Je,[e("p",We,T(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),e("div",Ge,[t(f,{onClick:a[3]||(a[3]=l=>r.value="settings")},{default:o(()=>[He]),_:1}),t(f,{type:"info",onClick:a[4]||(a[4]=l=>_.value=!0)},{default:o(()=>[Qe]),_:1})]),Ke,g($).length==0?(u(),q(B,{key:0},[Xe,Ye],64)):V("",!0),(u(!0),q(B,null,F(g($),l=>(u(),L(ge,{token_meta:l},null,8,["token_meta"]))),256)),e("div",Ze,[t(f,{onClick:v},{default:o(()=>[et]),_:1}),tt,t(f,{onClick:a[5]||(a[5]=l=>r.value="simple")},{default:o(()=>[ot,t(s,{class:"el-icon--right"},{default:o(()=>[t(w)]),_:1})]),_:1})])])):V("",!0)]),_:1}),t(k,null,{default:o(()=>[r.value=="settings"?(u(),q("section",st,[t(f,{type:"danger",plain:"",onClick:C},{default:o(()=>[lt]),_:1}),t(f,{onClick:a[6]||(a[6]=l=>r.value="detail")},{default:o(()=>[nt,t(s,{class:"el-icon--right"},{default:o(()=>[t(w)]),_:1})]),_:1})])):V("",!0)]),_:1}),t(Ee,{plaque_id:d.plaque.id,show_add_token_dialog:_.value,"onUpdate:show_add_token_dialog":a[7]||(a[7]=l=>_.value=l)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var it=R(at,[["__scopeId","data-v-2285ddc0"]]);const _t=n=>(J("data-v-4c8baa0e"),n=n(),W(),n),dt={class:"add-button-container"},rt={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},ut=_t(()=>e("div",{style:{"font-size":"17px"}},"Add plaque",-1)),ct={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},pt=h("Scan Plaque QR Code"),mt=h("Add test plaque "),ft=z({setup(n){const d=x(!1),{width:r,screen_type:_}=ee(),p=x(!1),m=_e(),A=Y(),P=X(),S=async()=>{d.value=!0,await de({name:"Test Plaque",wallet_address:A.get_account.entity.wallet_address,token_meta_id_list:[],created_at:Q.now(),updated_at:Q.now()}).catch($=>D({message:`Error creating test plaque- ${$}`,type:"error",showClose:!0,duration:12e3})),d.value=!1,p.value=!1};return($,v)=>{const C=c("Plus"),y=c("el-icon"),a=c("el-button"),f=c("el-dialog");return u(),q(B,null,[(u(!0),q(B,null,F(g(P).plaques,b=>(u(),L(it,{plaque:b,key:b.id},null,8,["plaque"]))),128)),e("div",dt,[e("div",rt,[e("div",{class:"add-button",onClick:v[0]||(v[0]=b=>p.value=!0)},[t(y,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:o(()=>[t(C)]),_:1}),ut])])]),t(f,{modelValue:p.value,"onUpdate:modelValue":v[2]||(v[2]=b=>p.value=b),title:"Add plaque",width:g(_)=="xs"?"90%":"50%"},{default:o(()=>[e("div",ct,[t(a,{onClick:v[1]||(v[1]=b=>{g(m).push("qr-scan"),p.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:o(()=>[pt]),_:1}),t(a,{icon:"plus",onClick:S,loading:d.value,style:{margin:"10px 0px 10px 0px"}},{default:o(()=>[mt]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var xt=R(ft,[["__scopeId","data-v-4c8baa0e"]]);export{xt as default};
