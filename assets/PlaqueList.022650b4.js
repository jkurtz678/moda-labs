import{d as j,r,o as p,b as k,i as e,t as $,h as t,F as V,_ as R,k as x,c as S,v as Z,w as s,x as Q,y as ee,e as h,g as z,z as F,f as U,A as te,B as M,C as J,j as f,D as se,G as O,p as I,u as oe}from"./index.c0a3c287.js";import{u as D,c as le}from"./plaque.9ea3e38c.js";import{u as H}from"./plaque.031e1b5d.js";import{_ as ne,a as ae,b as ie,c as _e,u as K,d as W}from"./token-meta.355f3313.js";import{s as de,u as re,h as G}from"./account.0b252e22.js";import{_ as ue}from"./PlaqueTokenItem.45f2396f.js";import"./token-meta.875c6a9f.js";const ce=e("hr",{class:"hr"},null,-1),pe={class:"card-flex-container"},me={style:{flex:"1",width:"70px"}},fe=["src"],ge={style:{flex:"3 1 0%"}},ve={class:"bold"},he={class:"bold"},ye=j({props:{in_list:{type:Boolean},token:null},emits:["update_token_list"],setup(l,{emit:u}){const _=l,d=c=>new URL({"../assets/base.css":ne,"../assets/logo.png":ae,"../assets/logo.svg":ie,"../assets/search-icon.svg":_e}[`../assets/${c}`],self.location).href;return(c,m)=>{const w=r("el-button");return p(),k(V,null,[ce,e("div",pe,[e("div",me,[e("img",{src:d("logo.png"),style:{width:"70px"}},null,8,fe)]),e("div",ge,[e("p",ve,$(_.token.entity.name),1),e("p",he,$(_.token.entity.artist),1)]),t(w,{icon:l.in_list?"close":"plus",type:l.in_list?"danger":"success",plain:"",circle:"",onClick:m[0]||(m[0]=A=>u("update_token_list",_.token.id))},null,8,["icon","type"])])],64)}}});const X=l=>(M("data-v-114a62b2"),l=l(),J(),l),ke={class:"dialog-container"},we=["prefix-icon"],qe={key:0},xe=X(()=>e("hr",{class:"hr"},null,-1)),$e={class:"dialog-footer"},Ce=X(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),be=f("Clear"),Se=f("Save"),Ae=j({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(l,{emit:u}){const _=l,d=x([]),c=x(!1),m=x(""),{width:w,screen_type:A}=K(),P=H(),y=W(),o=S({get(){return _.show_add_token_dialog},set(n){u("update:show_add_token_dialog",n)}});Z(o,n=>{n&&(d.value=JSON.parse(JSON.stringify(T.value.entity.token_meta_id_list)))});const g=S(()=>y.archive_token_meta_list),b=S(()=>{const n=[];if(g!=null&&g.value)for(let a of g==null?void 0:g.value)P.meta_in_playlist(_.plaque_id,a.id)?n.unshift(a):n.push(a);return m.value.trim()!==""?n.filter(a=>{var i,E;return((i=a.entity.artist)==null?void 0:i.toLowerCase().includes(m.value.toLowerCase()))||((E=a.entity.name)==null?void 0:E.toLowerCase().includes(m.value.toLowerCase()))}):n}),T=S(()=>P.plaque_map[_.plaque_id]),B=S(()=>{const n={};return d.value.forEach(a=>{n[a]=!0}),n}),v=n=>{d.value.some(a=>a===n)?d.value=d.value.filter(a=>a!=n):d.value.push(n)},q=async()=>{c.value=!0,await D(_.plaque_id,{token_meta_id_list:d.value}).catch(n=>{de(`Error updating plaque tokens - ${n}`)}),c.value=!1,o.value=!1},N=()=>{d.value=[]};return(n,a)=>{const i=r("el-card"),E=r("el-button"),Y=r("el-dialog");return p(),k("div",ke,[t(Y,{center:"",modelValue:h(o),"onUpdate:modelValue":a[1]||(a[1]=L=>te(o)?o.value=L:null),title:"Add tokens to plaque","close-on-click-modal":!1,fullscreen:h(A)=="xs"},{footer:s(()=>[e("span",$e,[e("div",null,$(`Tokens in playlist: ${d.value.length}`),1),Ce,t(E,{onClick:N},{default:s(()=>[be]),_:1}),t(E,{type:"info",onClick:q,loading:c.value},{default:s(()=>[Se]),_:1},8,["loading"])])]),default:s(()=>[Q(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=L=>m.value=L),class:"search-bar",placeholder:"Search by artwork title or artist name","prefix-icon":n.Search},null,8,we),[[ee,m.value]]),t(i,{class:"box-card",shadow:"never"},{default:s(()=>[h(b).length==0?(p(),k("div",qe,"No tokens found")):z("",!0),(p(!0),k(V,null,F(h(b),L=>(p(),U(ye,{token:L,in_list:Boolean(h(B)[L.id]),onUpdate_token_list:v},null,8,["token","in_list"]))),256)),xe]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var Pe=R(Ae,[["__scopeId","data-v-114a62b2"]]);const C=l=>(M("data-v-5daaaa14"),l=l(),J(),l),Te={style:{display:"flex","align-items":"center",padding:"1em"}},Le=C(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ve=f("online"),Be={class:"card-simple"},Ne=C(()=>e("hr",null,null,-1)),Ee=C(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ie=C(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),ze={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"1em"}},Ue={style:{padding:"1em"}},je=f(" View "),De={key:0,class:"card-detail"},Re={style:{padding:"0 1em"}},Fe={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Me=f("Settings"),Je=f("Add Artwork"),Oe=C(()=>e("hr",null,null,-1)),Ge=C(()=>e("div",{style:{padding:"1em"}}," No tokens added",-1)),Qe=C(()=>e("hr",null,null,-1)),He={style:{display:"flex",padding:"1em"}},Ke=f("Clear Tokens"),We=C(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Xe=f("Close"),Ye={key:0,style:{padding:"1em",display:"flex","justify-content":"space-between"}},Ze=f("Forget Display"),et=f("Close"),tt=j({props:{plaque:null},setup(l){const u=l,_=x("simple"),d=x(!1),c=W(),m=S(()=>w.value.length==0?null:w.value[0]),w=S(()=>{const y=c.archive_token_meta_map;return u.plaque.entity.token_meta_id_list.map(g=>y[g])});x("0"),x(!0);const A=()=>{O.confirm(`Are you sure you want to clear tokens for plaque '${u.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{D(u.plaque.id,{token_meta_id_list:[]}).then(()=>{I({type:"success",message:"Tokens cleared"})}).catch(y=>{I({message:`Error clearing tokens from plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})},P=()=>{O.confirm(`Are you sure you want to forget the plaque named '${u.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{D(u.plaque.id,{wallet_address:""}).then(()=>{I({type:"success",message:"Plaque forgotten"})}).catch(y=>{I({message:`Error forgetting plaque - ${y}`,type:"error",showClose:!0,duration:12e3})})})};return(y,o)=>{const g=r("el-tag"),b=r("el-col"),T=r("el-row"),B=r("ArrowRight"),v=r("el-icon"),q=r("el-button"),N=r("el-collapse-transition"),n=r("Close"),a=r("el-card");return p(),U(a,null,{default:s(()=>[e("div",Te,[e("h1",null,$(u.plaque.entity.name),1),Le,t(g,{class:"ml-2",type:"success"},{default:s(()=>[Ve]),_:1})]),t(N,null,{default:s(()=>[Q(e("section",Be,[Ne,t(T,{style:{"margin-bottom":"8px",padding:"1em"}},{default:s(()=>[t(b,{span:12},{default:s(()=>{var i;return[Ee,e("span",null,$(((i=h(m))==null?void 0:i.entity.name)||"N/A"),1)]}),_:1}),t(b,{span:12},{default:s(()=>{var i;return[Ie,f(" "+$(((i=h(m))==null?void 0:i.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),e("div",ze,[e("div",Ue,$(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),t(q,{onClick:o[0]||(o[0]=i=>_.value="detail")},{default:s(()=>[je,t(v,{class:"el-icon--right"},{default:s(()=>[t(B)]),_:1})]),_:1})])],512),[[se,_.value=="simple"]])]),_:1}),t(N,null,{default:s(()=>[_.value=="detail"?(p(),k("section",De,[e("p",Re,$(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),e("div",Fe,[t(q,{onClick:o[1]||(o[1]=i=>_.value="settings")},{default:s(()=>[Me]),_:1}),t(q,{type:"info",onClick:o[2]||(o[2]=i=>d.value=!0)},{default:s(()=>[Je]),_:1})]),Oe,h(w).length==0?(p(),k(V,{key:0},[Ge,Qe],64)):z("",!0),(p(!0),k(V,null,F(h(w),i=>(p(),U(ue,{token_meta:i},null,8,["token_meta"]))),256)),e("div",He,[t(q,{onClick:A},{default:s(()=>[Ke]),_:1}),We,t(q,{onClick:o[3]||(o[3]=i=>_.value="simple")},{default:s(()=>[Xe,t(v,{class:"el-icon--right"},{default:s(()=>[t(n)]),_:1})]),_:1})])])):z("",!0)]),_:1}),t(N,null,{default:s(()=>[_.value=="settings"?(p(),k("section",Ye,[t(q,{type:"danger",plain:"",onClick:P},{default:s(()=>[Ze]),_:1}),t(q,{onClick:o[4]||(o[4]=i=>_.value="detail")},{default:s(()=>[et,t(v,{class:"el-icon--right"},{default:s(()=>[t(n)]),_:1})]),_:1})])):z("",!0)]),_:1}),t(Pe,{plaque_id:u.plaque.id,show_add_token_dialog:d.value,"onUpdate:show_add_token_dialog":o[5]||(o[5]=i=>d.value=i)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var st=R(tt,[["__scopeId","data-v-5daaaa14"]]);const ot=l=>(M("data-v-4c8baa0e"),l=l(),J(),l),lt={class:"add-button-container"},nt={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},at=ot(()=>e("div",{style:{"font-size":"17px"}},"Add plaque",-1)),it={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},_t=f("Scan Plaque QR Code"),dt=f("Add test plaque "),rt=j({setup(l){const u=x(!1),{width:_,screen_type:d}=K(),c=x(!1),m=oe(),w=re(),A=H(),P=async()=>{u.value=!0,await le({name:"Test Plaque",wallet_address:w.get_account.entity.wallet_address,token_meta_id_list:[],created_at:G.now(),updated_at:G.now()}).catch(y=>I({message:`Error creating test plaque- ${y}`,type:"error",showClose:!0,duration:12e3})),u.value=!1,c.value=!1};return(y,o)=>{const g=r("Plus"),b=r("el-icon"),T=r("el-button"),B=r("el-dialog");return p(),k(V,null,[(p(!0),k(V,null,F(h(A).plaques,v=>(p(),U(st,{plaque:v,key:v.id},null,8,["plaque"]))),128)),e("div",lt,[e("div",nt,[e("div",{class:"add-button",onClick:o[0]||(o[0]=v=>c.value=!0)},[t(b,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:s(()=>[t(g)]),_:1}),at])])]),t(B,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=v=>c.value=v),title:"Add plaque",width:h(d)=="xs"?"90%":"50%"},{default:s(()=>[e("div",it,[t(T,{onClick:o[1]||(o[1]=v=>{h(m).push("qr-scan"),c.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:s(()=>[_t]),_:1}),t(T,{icon:"plus",onClick:P,loading:u.value,style:{margin:"10px 0px 10px 0px"}},{default:s(()=>[dt]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var ht=R(rt,[["__scopeId","data-v-4c8baa0e"]]);export{ht as default};
