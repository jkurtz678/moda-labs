import{_ as z,a as U,b as F,c as j}from"./search-icon.822e7617.js";import{_ as P,d as H,u as I,a as L,r as V,c as W,b as d,o as i,e as b,w as p,f as s,g as C,h as E,F as M,i as n,j as S,n as R,k as T,t as J,l as K,p as Q,m as X,q as Y,E as N,R as Z}from"./index.9e8f8fc5.js";import{u as B}from"./account.57bcab3b.js";import{u as ee}from"./breakpoints.d8fd811e.js";import{s as te,a as D,o as ae}from"./firebaseConfig.d7a6b5a9.js";import{s as c}from"./util.dcf45611.js";import{u as oe}from"./plaque.da87043a.js";import{u as se}from"./token-meta.493ba6b6.js";import{u as ne}from"./gallery.b472b4b2.js";import{a as le}from"./add-plaque.27db54c2.js";import"./types.d2ec9214.js";import"./plaque.28daac16.js";import"./token-meta.7f5c0ba8.js";import"./gallery.d53d87c7.js";const G=g=>(Q("data-v-5c106a87"),g=g(),X(),g),re=G(()=>T("div",{style:{"flex-grow":"1"}},null,-1)),ce=G(()=>T("div",{style:{"flex-grow":"1"}},null,-1)),ie={key:0,style:{"margin-right":"10px",display:"flex","align-items":"center"}},_e=H({__name:"Header",setup(g){const _=I(),f=L(),l=B(),u=V(!1),{md_and_up:y,screen_type:x}=ee(),m=(e,t)=>{e.paneName&&typeof e.paneName=="string"&&_.push({name:e.paneName})},q=W(()=>{const e=l.account;if(!e)return"";if(e.entity.ens_name)return e.entity.ens_name;if(e.entity.email)return e.entity.email;const t=e.entity.wallet_address;return t?`${t.substring(0,6)}...${t.substring(t.length-4)}`:""}),A=()=>{u.value=!0,te(D).then(()=>{}).catch(e=>{c(e)}).finally(()=>{u.value=!1})},o=e=>new URL({"../assets/base.css":z,"../assets/logo.png":U,"../assets/logo.svg":F,"../assets/search-icon.svg":j}[`../assets/${e}`],self.location).href;return(e,t)=>{const h=d("el-image"),k=d("el-button"),r=d("el-tab-pane"),v=d("el-tabs"),w=d("el-header");return i(),b(w,{class:"header",style:K(s(x)=="xs"?"padding: 0px 8px;":"")},{default:p(()=>[s(y)?(i(),b(h,{key:0,src:o("logo.png"),style:{width:"40px",height:"40px","margin-right":"2em"}},null,8,["src"])):C("",!0),s(_).currentRoute.value.name=="qr-scan"?(i(),E(M,{key:1},[re,n(k,{icon:"close",color:"#000000",onClick:t[0]||(t[0]=a=>s(_).push("plaque-list"))},{default:p(()=>[S(" Cancel ")]),_:1})],64)):(i(),E(M,{key:2},[n(v,{modelValue:s(f).name,"onUpdate:modelValue":t[1]||(t[1]=a=>s(f).name=a),onTabClick:m,class:R(s(y)?"":"small-tabs")},{default:p(()=>[n(r,{label:"Plaques",name:"plaque-list"}),n(r,{label:"Artwork",name:"artwork-tile-grid"}),n(r,{label:"Galleries",name:"gallery-list"}),n(r,{label:"Account",name:"account-settings"})]),_:1},8,["modelValue","class"]),ce,s(y)?(i(),E("div",ie,[T("div",null,J(s(q)),1),s(l).is_user_admin?(i(),b(k,{key:0,type:"info",round:"",size:"small",style:{"margin-left":"8px"}},{default:p(()=>[S("Admin")]),_:1})):C("",!0)])):C("",!0),n(k,{onClick:A,style:{"margin-left":"1em"},loading:u.value},{default:p(()=>[S("Logout")]),_:1},8,["loading"])],64))]),_:1},8,["style"])}}});var ue=P(_e,[["__scopeId","data-v-5c106a87"]]);const de=H({__name:"HomeView",setup(g){const _=B(),f=oe(),l=se(),u=ne(),y=I(),x=V(!1),m=V(),q=L();Y(async()=>{m.value=N.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),ae(D,async o=>{console.log("onAuthStateChanged",o),o?(m.value=N.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),await A(o.uid),m.value.close()):(_.setAccount(null),m.value.close(),y.push({name:"login",query:{redir:window.location.href}}))})});async function A(o){await _.loadAccount(o),await u.loadGalleryList(o).catch(a=>c(`Error loading galleries - ${a}`));const e=f.loadPlaques(o).catch(a=>c(`Error loading plaques - ${a}`)),t=f.loadGalleryPlaques(u.gallery_list).catch(a=>c(`Error loading gallery plaques - ${a}`)),h=l.loadArchiveTokenMetas(o).catch(a=>c(`Error loading archive token metas - ${a}`)),k=l.loadGalleryTokenMetas(u.gallery_list).catch(a=>c(`Error loading token metas - ${a}`)),r=[e,t,h,t,k],v=_.get_account.entity.wallet_address;if(v){const a=l.loadOpenseaMintedTokenMetas(v).catch($=>c(`Error loading opensea minted tokens - ${$}`)),O=l.loadOpenseaWalletTokenMetas(v).catch($=>c(`Error loading opensea wallet tokens - ${$}`));r.push(a),r.push(O)}await Promise.all(r),await l.loadOpenseaConvertedTokens();const w=q.query.plaque_id;w&&typeof w=="string"&&await le(o,w),x.value=!0}return(o,e)=>{const t=d("el-main"),h=d("el-container");return i(),b(h,{style:{height:"100%",position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px"}},{default:p(()=>[n(ue),n(t,{style:{"background-color":"#DAD9D7"},class:R(s(q).fullPath.includes("artwork-tile-grid")?"remove-padding":"")},{default:p(()=>[x.value?(i(),b(s(Z),{key:0})):C("",!0)]),_:1},8,["class"])]),_:1})}}});var $e=P(de,[["__scopeId","data-v-1933d2c6"]]);export{$e as default};
