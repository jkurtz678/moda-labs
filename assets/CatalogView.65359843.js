import{a as k}from"./bid.3628f065.js";import{i as C}from"./token-meta.3b6b8610.js";import{s as d}from"./util.e74fdbff.js";import{a as B}from"./thumbnail-image.64713751.js";import{p as A}from"./types.903c99bc.js";import{d as x,L as E,a as w,w as L,f as $,o as a,l as s,u as f,t as _,r as h,c as i,q as M,h as u,F as g,J as v}from"./index.bd2e8e1f.js";import"./firebaseConfig.4d01e9b5.js";const S=["src"],T=x({__name:"CatalogArtTile",props:{token_meta:{}},setup(p){const r=p,o=B(E(r,"token_meta"));return(c,y)=>{const m=$("el-card");return a(),w(m,{style:{margin:"12px"}},{default:L(()=>[s("img",{src:f(o),style:{"max-width":"100%","max-height":"200px",padding:"8px 0px"}},null,8,S),s("div",null,_(r.token_meta.entity.name),1),s("div",null,_(f(A)(r.token_meta)),1)]),_:1})}}});const V={class:"container"},D={style:{display:"flex",margin:"-12px"}},j=x({__name:"CatalogView",setup(p){const r=h([]),o=h([]);i(()=>r.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const c=i(()=>Array.from(new Set(r.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),y=i(()=>r.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),m=i(()=>r.value.reduce((t,e)=>(t[e.id]=e,t),{}));return i(()=>o.value.map(t=>{var n,l;const e=m.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(n=e==null?void 0:e.entity)==null?void 0:n.artist,artwork_name:(l=e==null?void 0:e.entity)==null?void 0:l.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),M(async()=>{C(t=>{console.log("R",t),r.value=t}).catch(t=>{d(`Error fetching token metas: ${t}`)}),k(t=>{console.log("bids",t),o.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{d(`Error fetching bids: ${t}`)})}),(t,e)=>(a(),u("div",V,[(a(!0),u(g,null,v(c.value,n=>(a(),u("div",{key:n,style:{margin:"24px 0px"}},[s("h1",null,_(n),1),s("div",D,[(a(!0),u(g,null,v(y.value[n],l=>(a(),w(T,{token_meta:l},null,8,["token_meta"]))),256))])]))),128))]))}});export{j as default};
