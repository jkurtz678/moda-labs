import{a as k}from"./bid.3628f065.js";import{i as C}from"./token-meta.3b6b8610.js";import{s as f}from"./util.2fdb94b7.js";import{a as $}from"./thumbnail-image.dc3cb49a.js";import{p as B}from"./types.903c99bc.js";import{d as w,J as A,a as x,w as E,u as c,e as R,b as L,f as M,o as a,i as n,t as p,r as h,c as s,m as S,h as m,F as g,H as v}from"./index.7a99bb6f.js";import"./firebaseConfig.4d01e9b5.js";const T={style:{display:"flex","flex-direction":"column"}},V={style:{display:"flex","justify-content":"center","background-color":"#eeeeee","flex-grow":"1"}},j=["src"],D={style:{"font-weight":"bold"}},F=w({__name:"CatalogArtTile",props:{token_meta:{}},setup(d){R();const r=L(),i=d,_=$(A(i,"token_meta"));return(y,l)=>{const t=M("el-card");return a(),x(t,{style:{margin:"12px",width:"340px"},onClick:l[0]||(l[0]=e=>c(r).push({name:"qr-landing",params:{token_meta_id:i.token_meta.id}}))},{default:E(()=>[n("div",T,[n("div",V,[n("img",{src:c(_),style:{"max-width":"100%","min-width":"140px","max-height":"240px","object-fit":"contain"}},null,8,j)]),n("h2",D,p(i.token_meta.entity.name),1),n("div",null,p(c(B)(i.token_meta)),1)])]),_:1})}}});const W={style:{"overflow-y":"auto",height:"100%"}},q={class:"container"},H={style:{"font-weight":"bold"}},J={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},Q=w({__name:"CatalogView",setup(d){const r=h([]),i=h([]);s(()=>r.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const _=s(()=>Array.from(new Set(r.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),y=s(()=>r.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),l=s(()=>r.value.reduce((t,e)=>(t[e.id]=e,t),{}));return s(()=>i.value.map(t=>{var o,u;const e=l.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(o=e==null?void 0:e.entity)==null?void 0:o.artist,artwork_name:(u=e==null?void 0:e.entity)==null?void 0:u.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),S(async()=>{C(t=>{console.log("R",t),r.value=t}).catch(t=>{f(`Error fetching token metas: ${t}`)}),k(t=>{console.log("bids",t),i.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{f(`Error fetching bids: ${t}`)})}),(t,e)=>(a(),m("div",W,[n("div",q,[(a(!0),m(g,null,v(_.value,o=>(a(),m("div",{key:o,style:{margin:"24px 0px"}},[n("h1",H,p(o),1),n("div",J,[(a(!0),m(g,null,v(y.value[o],u=>(a(),x(F,{token_meta:u},null,8,["token_meta"]))),256))])]))),128))])]))}});export{Q as default};
