import{u as B}from"./gallery.34e634d7.js";import{T as w}from"./types.d2ec9214.js";import{_ as L,d as q,r as y,B as f,q as U,c as S,b as m,o as k,e as V,w as i,i as a,j as N,f as F,h as O,K as T,F as M,p as P,m as j,k as g}from"./index.eb618201.js";const b=p=>(P("data-v-48a4dc3c"),p=p(),j(),p),z=b(()=>g("div",{class:"caption"},"Filter by gallery",-1)),E=b(()=>g("div",{class:"caption"},"Filter by aspect ratio",-1)),G=b(()=>g("div",{class:"caption"},"Filter by platform",-1)),K=b(()=>g("div",{class:"caption"},"Sort order",-1)),$=q({__name:"ArtworkFilters",props:{all_tokens:null,search_filter:null,use_local_storage:{type:Boolean}},emits:["update-filtered-tokens"],setup(p,{emit:I}){const o=p,h=B(),_=y("");f(_,t=>{o.use_local_storage&&localStorage.setItem("artwork_grid_aspect_ratio_filter",t)});const n=y("");f(n,t=>{o.use_local_storage&&localStorage.setItem("artwork_grid_filter_by_gallery",t)});const c=y("");f(c,t=>{o.use_local_storage&&localStorage.setItem("artwork_grid_filter_by_platform",t)});const u=y("created_at");f(u,t=>{o.use_local_storage&&localStorage.setItem("artwork_grid_sort_order",t)}),U(()=>{o.use_local_storage&&(_.value=localStorage.getItem("artwork_grid_aspect_ratio_filter")||"",n.value=localStorage.getItem("artwork_grid_filter_by_gallery")||"",c.value=localStorage.getItem("artwork_grid_filter_by_platform")||"",u.value=localStorage.getItem("artwork_grid_sort_order")||"name")});const A=S(()=>_.value||n.value||c.value),C=S(()=>{if(!o.all_tokens)return[];let t=o.all_tokens.filter(e=>{var s,v,l;if(o.search_filter&&!((s=e.entity.artist)!=null&&s.toLowerCase().includes(o.search_filter.toLowerCase()))&&!((v=e.entity.name)!=null&&v.toLowerCase().includes(o.search_filter.toLowerCase()))||n.value&&!((l=h.gallery_list.find(d=>d.id==n.value))!=null&&l.entity.token_meta_id_list.includes(e.id)))return!1;switch(c.value){case"moda_archive":if(e.entity.platform!=w.Archive)return!1;break;case"opensea":if(e.entity.platform!=w.Opensea&&e.entity.platform!=w.OpenseaArchive)return!1;break}switch(_.value){case"portrait":if(!e.entity.aspect_ratio||e.entity.aspect_ratio>.9)return!1;break;case"landscape":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<1.1)return!1;break;case"square":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<.9||e.entity.aspect_ratio>1.1)return!1;break}return!0});return u.value==="name"?t=t.sort((e,s)=>e.entity.name.localeCompare(s.entity.name)):u.value==="created_at"&&(t=t.sort((e,s)=>e.entity.created_at==null&&s.entity.created_at==null?0:e.entity.created_at==null?1:s.entity.created_at==null?-1:s.entity.created_at.seconds-e.entity.created_at.seconds)),t});return f(C,t=>{I("update-filtered-tokens",t)},{immediate:!0}),(t,e)=>{const s=m("el-button"),v=m("el-badge"),l=m("el-option"),d=m("el-select"),x=m("el-popover");return k(),V(x,{placement:"bottom",title:"Artwork Filters",width:300,trigger:"click"},{reference:i(()=>[a(v,{"is-dot":"",hidden:!F(A)},{default:i(()=>[a(s,{icon:"Filter",style:{"margin-left":"10px"},type:"info",size:"small"},{default:i(()=>[N("Filters")]),_:1})]),_:1},8,["hidden"])]),default:i(()=>[z,a(d,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),placeholder:"Filter by gallery",class:"filter-select"},{default:i(()=>[a(l,{label:"All artwork",value:""}),(k(!0),O(M,null,T(F(h).gallery_list,r=>(k(),V(l,{key:r.id,label:`${r.entity.name}`,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),E,a(d,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=r=>_.value=r),class:"filter-select"},{default:i(()=>[a(l,{label:"All",value:""}),a(l,{label:"Landscape",value:"landscape"}),a(l,{label:"Portrait",value:"portrait"}),a(l,{label:"Square",value:"square"})]),_:1},8,["modelValue"]),G,a(d,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),class:"filter-select"},{default:i(()=>[a(l,{label:"All",value:""}),a(l,{label:"Moda Archive",value:"moda_archive"}),a(l,{label:"Opensea",value:"opensea"})]),_:1},8,["modelValue"]),K,a(d,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=r=>u.value=r),placeholder:"Sort by",class:"filter-select"},{default:i(()=>[a(l,{label:"Sort by name",value:"name"}),a(l,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"])]),_:1})}}});var Q=L($,[["__scopeId","data-v-48a4dc3c"]]);export{Q as A};
