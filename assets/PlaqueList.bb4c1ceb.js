import{d as I,t as k,v as A,r as f,c as l,y,z as e,A as E,C as M,F as N,G as h,f as i,h as p,H as C,I as L,e as b,w as n,J as U,K as j,L as x,M as G,N as q,_ as H,O as S,P as J,S as K,U as V,b as B}from"./index.d69aafa5.js";import{a as O}from"./token-meta.ccf2a48e.js";import{u as z,a as Q}from"./token-meta.00c6b662.js";import{u as T}from"./plaque.8587c2f2.js";const W=e("hr",{class:"hr"},null,-1),X={class:"card-flex-container"},Y={style:{flex:"1",width:"70px"}},Z=["src"],ee={style:{flex:"3 1 0%"}},te={class:"bold"},se={class:"bold"},oe=I({props:{detail:null,plaque_id:null},setup(_){const t=_,s=k(!1),c=A(()=>!!d.value.entity.token_meta_id_list.find(r=>r==t.detail.id)),d=A(()=>u.plaque_map[t.plaque_id]),u=z(),v=async()=>{if(s.value=!0,c.value){const r=d.value.entity.token_meta_id_list.filter(a=>a!=t.detail.id);await T(t.plaque_id,{token_meta_id_list:r})}else{const r=[...d.value.entity.token_meta_id_list];r.push(t.detail.id),await T(t.plaque_id,{token_meta_id_list:r})}s.value=!1},w=r=>new URL({"../assets/base.css":E,"../assets/logo.png":M,"../assets/logo.svg":N}[`../assets/${r}`],self.location).href;return(r,a)=>{const o=f("el-button");return l(),y(C,null,[W,e("div",X,[e("div",Y,[e("img",{src:w("logo.png"),style:{width:"70px"}},null,8,Z)]),e("div",ee,[e("p",te,h(t.detail.entity.name),1),e("p",se,h(t.detail.entity.artist),1)]),i(o,{icon:p(c)?"close":"plus",type:p(c)?"danger":"success",plain:"",circle:"",onClick:v,loading:s.value},null,8,["icon","type","loading"])])],64)}}}),ne=e("hr",{class:"hr"},null,-1),le={class:"dialog-footer"},ae=x("Clear"),ie=x("Done"),de=I({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(_,{emit:t}){const s=_,c=k(),d=k(!1),u=A({get(){return s.show_add_token_dialog},set(v){t("update:show_add_token_dialog",v)}});return L(u,async v=>{!v||(d.value=!0,c.value=await O(),d.value=!1)}),(v,w)=>{const r=f("el-card"),a=f("el-button"),o=f("el-dialog");return l(),b(o,{class:"box-dialog",center:"",modelValue:p(u),"onUpdate:modelValue":w[0]||(w[0]=m=>j(u)?u.value=m:null),title:"Add tokens",width:"530px","close-on-click-modal":"false"},{footer:n(()=>[e("span",le,[i(a,null,{default:n(()=>[ae]),_:1}),i(a,{type:"info"},{default:n(()=>[ie]),_:1})])]),default:n(()=>[i(r,{class:"box-card",shadow:"never"},{default:n(()=>[(l(!0),y(C,null,U(c.value,m=>(l(),b(oe,{plaque_id:_.plaque_id,detail:m},null,8,["plaque_id","detail"]))),256)),ne]),_:1})]),_:1},8,["modelValue"])}}});const _e=e("hr",{class:"hr"},null,-1),re={class:"card-flex-container"},ce={style:{flex:"1"}},ue=["src"],pe={style:{flex:"3 1 0%"}},me={class:"bold"},ge={class:"bold"},fe={style:{flex:"1","text-align":"right","padding-right":"1em"}},he={key:0,class:"card-body"},ye={class:"card-flex-container"},ve={style:{flex:"1",width:"30%"}},ke=["src"],we={style:{flex:"3 1 0%",width:"70%"}},xe={class:"bold bigger-font description"},$e={class:"description"},qe=I({props:{detail:null},setup(_){const t=_,s=G({expanded:!1});k(!0);const c=d=>new URL({"../assets/base.css":E,"../assets/logo.png":M,"../assets/logo.svg":N}[`../assets/${d}`],self.location).href;return(d,u)=>{var a,o,m,$;const v=f("ArrowRightBold"),w=f("ArrowDownBold"),r=f("el-icon");return l(),y(C,null,[_e,e("div",re,[e("div",ce,[e("img",{src:c("logo.png"),class:"image",style:{"max-width":"70px"}},null,8,ue)]),e("div",pe,[e("p",me,h((o=(a=t.detail)==null?void 0:a.entity)==null?void 0:o.name),1),e("p",ge,h(($=(m=t.detail)==null?void 0:m.entity)==null?void 0:$.artist),1)]),e("div",fe,[i(r,{onClick:u[0]||(u[0]=P=>p(s).expanded=!p(s).expanded)},{default:n(()=>[p(s).expanded?q("",!0):(l(),b(v,{key:0})),p(s).expanded?(l(),b(w,{key:1})):q("",!0)]),_:1}),e("p",{onClick:u[1]||(u[1]=()=>{})},"Archive")])]),p(s).expanded?(l(),y("div",he,[e("div",ye,[e("div",ve,[e("div",null,h(t.detail.entity.name),1),e("img",{style:{width:"121px"},src:c("logo.png")},null,8,ke)]),e("div",we,[e("div",xe,h(t.detail.entity.artist),1),e("div",$e,h(t.detail.entity.description),1)])])])):q("",!0)],64)}}});const D=_=>(J("data-v-6a36ab8d"),_=_(),K(),_),be=D(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ce=x("online"),Ae={key:0},Ie={style:{padding:"0 1em"}},Be={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Te=x("Settings"),De=x("ADD Artwork"),Pe=D(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Se=D(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Ue={style:{padding:"1em"}},Ve={key:0,class:"card-detail"},Ee={style:{display:"flex",padding:"1em"}},Me=x("Clear Tokens"),Ne=D(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),ze=x("Forget Display"),Re=I({props:{plaque:null},setup(_){const t=_;k(!0);const s=k(!1),c=k(!1),d=Q();d.token_meta_list;const u=A(()=>{const a=d.token_meta_map;let o=t.plaque.entity.token_meta_id_list.map(m=>a[m]);return o[0]?o[0]:null}),v=A(()=>{const a=d.token_meta_map;return t.plaque.entity.token_meta_id_list.map(m=>a[m])});k("0"),k(!0);const w=()=>{V.confirm(`Are you sure you want to clear tokens for plaque '${t.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{T(t.plaque.id,{token_meta_id_list:[]}).then(()=>{B({type:"success",message:"Tokens cleared"})}).catch(a=>{B({message:`Error clearing tokens from plaque - ${a}`,type:"error",showClose:!0,duration:12e3})})})},r=()=>{V.confirm(`Are you sure you want to forget the plaque named '${t.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{T(t.plaque.id,{account_id:""}).then(()=>{B({type:"success",message:"Plaque forgotten"})}).catch(a=>{B({message:`Error forgetting plaque - ${a}`,type:"error",showClose:!0,duration:12e3})})})};return(a,o)=>{const m=f("el-tag"),$=f("el-button"),P=f("el-col"),R=f("el-row"),F=f("el-card");return l(),b(F,{class:"rounded-card"},{header:n(()=>[e("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:o[0]||(o[0]=g=>s.value=!s.value)},[e("h1",null,h(t.plaque.entity.name),1),be,i(m,{class:"ml-2",type:"success"},{default:n(()=>[Ce]),_:1})]),i(S,{name:"el-fade-in-linear"},{default:n(()=>[s.value?(l(),y("section",Ae,[e("p",Ie,h(`Total artworks: ${_.plaque.entity.token_meta_id_list.length}`),1),e("div",Be,[i($,null,{default:n(()=>[Te]),_:1}),i($,{type:"info",onClick:o[1]||(o[1]=g=>c.value=!0)},{default:n(()=>[De]),_:1})])])):q("",!0)]),_:1})]),default:n(()=>[i(S,{name:"el-fade-in-linear"},{default:n(()=>[s.value?q("",!0):(l(),y("section",{key:0,class:"card-simple",onClick:o[2]||(o[2]=g=>s.value=!0)},[i(R,{style:{"margin-bottom":"8px",padding:"1em"}},{default:n(()=>[i(P,{span:12},{default:n(()=>{var g;return[Pe,e("span",null,h((g=p(u))==null?void 0:g.entity.name),1)]}),_:1}),i(P,{span:12},{default:n(()=>{var g;return[Se,x(" "+h((g=p(u))==null?void 0:g.entity.artist),1)]}),_:1})]),_:1}),e("div",Ue,h(`Total artworks: ${_.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),i(S,{name:"el-fade-in-linear"},{default:n(()=>[s.value?(l(),y("section",Ve,[(l(!0),y(C,null,U(p(v),g=>(l(),b(qe,{detail:g},null,8,["detail"]))),256)),e("div",Ee,[i($,{onClick:w},{default:n(()=>[Me]),_:1}),Ne,i($,{type:"danger",plain:"",onClick:r},{default:n(()=>[ze]),_:1})])])):q("",!0)]),_:1}),i(de,{plaque_id:t.plaque.id,show_add_token_dialog:c.value,"onUpdate:show_add_token_dialog":o[3]||(o[3]=g=>c.value=g)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Fe=H(Re,[["__scopeId","data-v-6a36ab8d"]]);const Le={key:0,style:{padding:"1em"}},Ke=I({setup(_){const t=z();return(s,c)=>(l(),y(C,null,[p(t).plaques.length==0?(l(),y("div",Le,"No plaques connected")):q("",!0),(l(!0),y(C,null,U(p(t).plaques,d=>(l(),b(Fe,{plaque:d,key:d.id},null,8,["plaque"]))),128))],64))}});export{Ke as default};
