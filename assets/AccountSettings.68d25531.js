import{u as M,c as I,d as k}from"./account.790d6438.js";import{u as O}from"./token-meta.4f908b57.js";import{s as x}from"./util.fdfdfe9a.js";import{u as T}from"./breakpoints.e96a7158.js";import{_ as W,d as $,r as b,c as N,h as E,i as u,w as m,l as C,f as n,b as p,o as v,k as e,t as c,e as V,j,z as f,A as D,p as L,m as P}from"./index.8bc644f9.js";import"./types.3cc10997.js";import"./firebaseConfig.4bdd3a5f.js";import"./token-meta.16ce217f.js";const w=r=>(L("data-v-0f708344"),r=r(),P(),r),q={style:{display:"flex","justify-content":"center","margin-top":"50px"}},F=w(()=>e("div",{class:"card-header"},[e("span",{style:{"font-size":"18px"}},"Account Settings")],-1)),G=w(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"Email",-1)),H={key:0,style:{"margin-top":"2em"}},J={style:{"font-size":"var(--el-font-size-extra-small)",display:"flex","align-items":"center"}},K=w(()=>e("div",null,"Connected Ethereum Wallet",-1)),Q={style:{display:"flex","align-items":"center"}},R=$({__name:"AccountSettings",setup(r){const d=M(),o=O(),s=b(!1),{md_and_up:S,screen_type:A}=T(),a=N(()=>d.get_account),z=async()=>{const{address:t,signature:h,ens_name:i}=await I();console.log("address",t,h,i),s.value=!0;const _={wallet_address:t,signature:h};i&&(_.ens_name=i),k(a.value.id,_).then(()=>d.loadAccount(a.value.id)).then(()=>{const l=o.loadOpenseaMintedTokenMetas(t).catch(y=>x(`Error loading opensea minted tokens - ${y}`)),g=o.loadOpenseaWalletTokenMetas(t).catch(y=>x(`Error loading opensea wallet tokens - ${y}`));return Promise.all([l,g])}).then(()=>{f({type:"success",message:"Ethereum wallet connected"})}).catch(l=>{f({message:`Error connecting wallet - ${l}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>s.value=!1)},B=async()=>{s.value=!0,D.confirm("Are you sure you want to disconnect your wallet?","Disconnect",{type:"warning"}).then(()=>{const t={wallet_address:"",signature:"",ens_name:""};return k(a.value.id,t)}).then(()=>d.loadAccount(a.value.id)).then(()=>{o.opensea_minted_token_meta_list=[],o.opensea_wallet_token_meta_list=[],f({type:"success",message:"Ethereum wallet disconnected"})}).catch(t=>{f({message:`Error disconnecting wallet - ${t}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>s.value=!1)};return(t,h)=>{const i=p("Check"),_=p("el-icon"),l=p("el-button"),g=p("el-card");return v(),E("div",q,[u(g,{class:"container-card",style:C(n(S)?"min-width: 700px;":"")},{header:m(()=>[F]),default:m(()=>[G,e("div",null,c(n(d).get_account.entity.email),1),n(a).entity.wallet_address?(v(),E("div",H,[e("div",J,[K,u(_,{style:{color:"green","font-size":"1.5em","margin-left":"5px"}},{default:m(()=>[u(i)]),_:1})]),e("div",Q,[e("div",{style:C(n(A)=="xs"?"max-width: 250px; text-overflow: ellipsis; overflow: hidden;":"")},c(n(a).entity.wallet_address),5),u(l,{text:"",circle:"",size:"small",icon:"close",style:{"margin-left":"5px"},onClick:B,loading:s.value},null,8,["loading"])]),e("div",null,"Loaded "+c(n(o).opensea_wallet_token_meta_list.length)+" wallet token"+c(n(o).opensea_wallet_token_meta_list.length==1?"":"s")+" from Opensea",1),e("div",null,"Loaded "+c(n(o).opensea_minted_token_meta_list.length)+" token"+c(n(o).opensea_minted_token_meta_list.length==1?"":"s")+" you minted from Opensea ",1)])):(v(),V(l,{key:1,onClick:z,loading:s.value,style:{"margin-top":"2em"},icon:"Connection",color:"#000000"},{default:m(()=>[j("Connect Ethereum Wallet")]),_:1},8,["loading"]))]),_:1},8,["style"])])}}});var se=W(R,[["__scopeId","data-v-0f708344"]]);export{se as default};
