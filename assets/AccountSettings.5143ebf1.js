import{u as O,c as W,d as A}from"./account.98026ee4.js";import{u as N}from"./token-meta.a8d8212e.js";import{i as V,s as b}from"./util.98d10b31.js";import{u as j}from"./breakpoints.8fff42a6.js";import{d as q}from"./index.d82c3a20.js";import{_ as F,d as L,r as M,q as P,c as Z,h as y,i as S,w as u,l as z,f as n,b as v,Z as G,o as r,k as t,t as i,F as H,D as J,e as C,j as m,z as k,A as K,p as Q,m as R}from"./index.fb8ddea9.js";import"./types.3cc10997.js";import"./firebaseConfig.4bdd3a5f.js";import"./token-meta.16ce217f.js";const w=p=>(Q("data-v-613daf12"),p=p(),R(),p),U={style:{display:"flex","justify-content":"center","margin-top":"50px"}},X=w(()=>t("div",{class:"card-header"},[t("span",{style:{"font-size":"18px"}},"Account Settings")],-1)),Y=w(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"Email",-1)),ee=w(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)","margin-top":"2em"}},"Ethereum Wallet",-1)),te={key:0},ne={style:{display:"flex","align-items":"center"}},ae={key:0,style:{width:"60px",height:"60px"}},oe=w(()=>t("br",null,null,-1)),se=L({__name:"AccountSettings",setup(p){const h=O(),a=N(),o=M(!1),{md_and_up:B,screen_type:D}=j(),x=M(!1),f=M(!1);P(()=>{T()});const T=async()=>{if(V()){x.value=!0;return}f.value=!0;const e=await q().catch(c=>{b(`Error detecting ethereum provider - ${c}`)});x.value=Boolean(e),f.value=!1},s=Z(()=>h.get_account),$=async()=>{const{address:e,signature:c,ens_name:l}=await W();console.log("address",e,c,l),o.value=!0;const g={wallet_address:e,signature:c};l&&(g.ens_name=l),A(s.value.id,g).then(()=>h.loadAccount(s.value.id)).then(()=>{const d=a.loadOpenseaMintedTokenMetas(e).catch(_=>b(`Error loading opensea minted tokens - ${_}`)),E=a.loadOpenseaWalletTokenMetas(e).catch(_=>b(`Error loading opensea wallet tokens - ${_}`));return Promise.all([d,E])}).then(()=>{k({type:"success",message:"Ethereum wallet connected"})}).catch(d=>{k({message:`Error connecting wallet - ${d}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>o.value=!1)},I=async()=>{o.value=!0,K.confirm("Are you sure you want to disconnect your wallet?","Disconnect",{type:"warning"}).then(()=>{const e={wallet_address:"",signature:"",ens_name:""};return A(s.value.id,e)}).then(()=>h.loadAccount(s.value.id)).then(()=>{a.opensea_minted_token_meta_list=[],a.opensea_wallet_token_meta_list=[],k({type:"success",message:"Ethereum wallet disconnected"})}).catch(e=>{k({message:`Error disconnecting wallet - ${e}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>o.value=!1)};return(e,c)=>{const l=v("el-button"),g=v("el-link"),d=v("el-alert"),E=v("el-card"),_=G("loading");return r(),y("div",U,[S(E,{class:"container-card",style:z(n(B)?"min-width: 700px;":"")},{header:u(()=>[X]),default:u(()=>[Y,t("div",null,i(n(h).get_account.entity.email),1),ee,n(s).entity.wallet_address?(r(),y("div",te,[t("div",ne,[t("div",{style:z(n(D)=="xs"?"max-width: 250px; text-overflow: ellipsis; overflow: hidden;":"")},i(n(s).entity.wallet_address),5),S(l,{text:"",circle:"",size:"small",icon:"close",style:{"margin-left":"5px"},onClick:I,loading:o.value},null,8,["loading"])]),t("div",null,"Loaded "+i(n(a).opensea_wallet_token_meta_list.length)+" wallet token"+i(n(a).opensea_wallet_token_meta_list.length==1?"":"s")+" from Opensea",1),t("div",null,"Loaded "+i(n(a).opensea_minted_token_meta_list.length)+" token"+i(n(a).opensea_minted_token_meta_list.length==1?"":"s")+" you minted from Opensea ",1)])):(r(),y(H,{key:1},[f.value?J((r(),y("div",ae,null,512)),[[_,f.value]]):x.value?(r(),C(l,{key:1,onClick:$,loading:o.value,icon:"Connection",color:"#000000"},{default:u(()=>[m(" Connect With Metamask ")]),_:1},8,["loading"])):(r(),C(d,{key:2,type:"warning","show-icon":"",title:"Metamask extension not found",style:{"margin-bottom":"1.5em"},closable:!1},{default:u(()=>[m(" The Metamask browser extension is required to connect your wallet, and this extension was not detected on your browser. "),oe,m("Please "),S(g,{type:"primary",style:{"font-size":"12px","vertical-align":"top"},href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en"},{default:u(()=>[m(" install Metamask ")]),_:1}),m(" and then refresh the page. ")]),_:1}))],64))]),_:1},8,["style"])])}}});var he=F(se,[["__scopeId","data-v-613daf12"]]);export{he as default};
