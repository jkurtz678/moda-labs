import{d as I,t as x,v as T,r as g,c as n,y as m,z as e,A as U,C as E,F as M,G as f,f as i,h as c,H as A,I as D,_ as z,J as H,K as J,e as C,w as l,L as P,M as K,N as R,O as F,P as q,S as O,T as $,U as S,V,b as B}from"./index.0b9a8626.js";import{a as Q}from"./token-meta.52d3d409.js";import{u as L,a as W}from"./token-meta.87ffc862.js";const X=e("hr",{class:"hr"},null,-1),Y={class:"card-flex-container"},Z={style:{flex:"1",width:"70px"}},ee=["src"],te={style:{flex:"3 1 0%"}},se={class:"bold"},oe={class:"bold"},le=I({props:{detail:null,plaque_id:null},setup(s){const t=s,o=x(!1),u=T(()=>!!_.value.entity.token_meta_id_list.find(a=>a==t.detail.id)),_=T(()=>h.plaque_map[t.plaque_id]),h=L(),y=async()=>{if(o.value=!0,u.value){const a=_.value.entity.token_meta_id_list.filter(r=>r!=t.detail.id);await D(t.plaque_id,{token_meta_id_list:a})}else{const a=[..._.value.entity.token_meta_id_list];a.push(t.detail.id),await D(t.plaque_id,{token_meta_id_list:a})}o.value=!1},v=a=>new URL({"../assets/base.css":U,"../assets/logo.png":E,"../assets/logo.svg":M}[`../assets/${a}`],self.location).href;return(a,r)=>{const d=g("el-button");return n(),m(A,null,[X,e("div",Y,[e("div",Z,[e("img",{src:v("logo.png"),style:{width:"70px"}},null,8,ee)]),e("div",te,[e("p",se,f(t.detail.entity.name),1),e("p",oe,f(t.detail.entity.artist),1)]),i(d,{icon:c(u)?"close":"plus",type:c(u)?"danger":"success",plain:"",circle:"",onClick:y,loading:o.value},null,8,["icon","type","loading"])])],64)}}});const ne=s=>(R("data-v-5d46088f"),s=s(),F(),s),ae=ne(()=>e("hr",{class:"hr"},null,-1)),ie={class:"dialog-footer"},de=q("Clear"),_e=q("Done"),re=I({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(s,{emit:t}){const o=s,u=x(),_=x(!1),{width:h,screen_type:y}=H(),v=T({get(){return o.show_add_token_dialog},set(a){t("update:show_add_token_dialog",a)}});return J(v,async a=>{!a||(_.value=!0,u.value=await Q(),_.value=!1)}),(a,r)=>{const d=g("el-card"),k=g("el-button"),w=g("el-dialog");return n(),C(w,{class:"box-dialog",center:"",modelValue:c(v),"onUpdate:modelValue":r[0]||(r[0]=b=>K(v)?v.value=b:null),title:"Add tokens","close-on-click-modal":"false",fullscreen:c(y)=="xs"},{footer:l(()=>[e("span",ie,[i(k,null,{default:l(()=>[de]),_:1}),i(k,{type:"info"},{default:l(()=>[_e]),_:1})])]),default:l(()=>[i(d,{class:"box-card",shadow:"never"},{default:l(()=>[(n(!0),m(A,null,P(u.value,b=>(n(),C(le,{plaque_id:s.plaque_id,detail:b},null,8,["plaque_id","detail"]))),256)),ae]),_:1})]),_:1},8,["modelValue","fullscreen"])}}});var ce=z(re,[["__scopeId","data-v-5d46088f"]]);const ue=e("hr",{class:"hr"},null,-1),pe={class:"card-flex-container"},ge={style:{flex:"1"}},me=["src"],fe={style:{flex:"3 1 0%"}},he={class:"bold"},ye={class:"bold"},ve={style:{flex:"1","text-align":"right","padding-right":"1em"}},ke={key:0,class:"card-body"},we={class:"card-flex-container"},xe={style:{flex:"1",width:"30%"}},$e=["src"],qe={style:{flex:"3 1 0%",width:"70%"}},be={class:"bold bigger-font description"},Ce={class:"description"},Ae=I({props:{detail:null},setup(s){const t=s,o=O({expanded:!1});x(!0);const u=_=>new URL({"../assets/base.css":U,"../assets/logo.png":E,"../assets/logo.svg":M}[`../assets/${_}`],self.location).href;return(_,h)=>{var r,d,k,w;const y=g("ArrowRightBold"),v=g("ArrowDownBold"),a=g("el-icon");return n(),m(A,null,[ue,e("div",pe,[e("div",ge,[e("img",{src:u("logo.png"),class:"image",style:{"max-width":"70px"}},null,8,me)]),e("div",fe,[e("p",he,f((d=(r=t.detail)==null?void 0:r.entity)==null?void 0:d.name),1),e("p",ye,f((w=(k=t.detail)==null?void 0:k.entity)==null?void 0:w.artist),1)]),e("div",ve,[i(a,{onClick:h[0]||(h[0]=b=>c(o).expanded=!c(o).expanded)},{default:l(()=>[c(o).expanded?$("",!0):(n(),C(y,{key:0})),c(o).expanded?(n(),C(v,{key:1})):$("",!0)]),_:1}),e("p",{onClick:h[1]||(h[1]=()=>{})},"Archive")])]),c(o).expanded?(n(),m("div",ke,[e("div",we,[e("div",xe,[e("div",null,f(t.detail.entity.name),1),e("img",{style:{width:"121px"},src:u("logo.png")},null,8,$e)]),e("div",qe,[e("div",be,f(t.detail.entity.artist),1),e("div",Ce,f(t.detail.entity.description),1)])])])):$("",!0)],64)}}});const N=s=>(R("data-v-6f4f2628"),s=s(),F(),s),Te=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ie=q("online"),Be={key:0},De={style:{padding:"0 1em"}},Ne={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Se=q("Settings"),Pe=q("Add Artwork"),Ve=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ue=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Ee={style:{padding:"1em"}},Me={key:0,class:"card-detail"},ze={key:0,style:{padding:"1em"}},Re={style:{display:"flex",padding:"1em"}},Fe=q("Clear Tokens"),Le=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),je=q("Forget Display"),Ge=I({props:{plaque:null},setup(s){const t=s;x(!0);const o=x(!1),u=x(!1),_=W();_.token_meta_list;const h=T(()=>y.value.length==0?null:y.value[0]),y=T(()=>{const r=_.token_meta_map;return t.plaque.entity.token_meta_id_list.map(k=>r[k])});x("0"),x(!0);const v=()=>{V.confirm(`Are you sure you want to clear tokens for plaque '${t.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{D(t.plaque.id,{token_meta_id_list:[]}).then(()=>{B({type:"success",message:"Tokens cleared"})}).catch(r=>{B({message:`Error clearing tokens from plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})},a=()=>{V.confirm(`Are you sure you want to forget the plaque named '${t.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{D(t.plaque.id,{account_id:""}).then(()=>{B({type:"success",message:"Plaque forgotten"})}).catch(r=>{B({message:`Error forgetting plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})};return(r,d)=>{const k=g("el-tag"),w=g("el-button"),b=g("el-col"),j=g("el-row"),G=g("el-card");return n(),C(G,null,{header:l(()=>[e("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:d[0]||(d[0]=p=>o.value=!o.value)},[e("h1",null,f(t.plaque.entity.name),1),Te,i(k,{class:"ml-2",type:"success"},{default:l(()=>[Ie]),_:1})]),i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?(n(),m("section",Be,[e("p",De,f(`Total artworks: ${s.plaque.entity.token_meta_id_list.length}`),1),e("div",Ne,[i(w,null,{default:l(()=>[Se]),_:1}),i(w,{type:"info",onClick:d[1]||(d[1]=p=>u.value=!0)},{default:l(()=>[Pe]),_:1})])])):$("",!0)]),_:1})]),default:l(()=>[i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?$("",!0):(n(),m("section",{key:0,class:"card-simple",onClick:d[2]||(d[2]=p=>o.value=!0)},[i(j,{style:{"margin-bottom":"8px",padding:"1em"}},{default:l(()=>[i(b,{span:12},{default:l(()=>{var p;return[Ve,e("span",null,f(((p=c(h))==null?void 0:p.entity.name)||"N/A"),1)]}),_:1}),i(b,{span:12},{default:l(()=>{var p;return[Ue,q(" "+f(((p=c(h))==null?void 0:p.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),e("div",Ee,f(`Total artworks: ${s.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?(n(),m("section",Me,[c(y).length==0?(n(),m("div",ze,"No tokens added")):$("",!0),(n(!0),m(A,null,P(c(y),p=>(n(),C(Ae,{detail:p},null,8,["detail"]))),256)),e("div",Re,[i(w,{onClick:v},{default:l(()=>[Fe]),_:1}),Le,i(w,{type:"danger",plain:"",onClick:a},{default:l(()=>[je]),_:1})])])):$("",!0)]),_:1}),i(ce,{plaque_id:t.plaque.id,show_add_token_dialog:u.value,"onUpdate:show_add_token_dialog":d[3]||(d[3]=p=>u.value=p)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var He=z(Ge,[["__scopeId","data-v-6f4f2628"]]);const Je={key:0,style:{padding:"1em"}},We=I({setup(s){const t=L();return(o,u)=>(n(),m(A,null,[c(t).plaques.length==0?(n(),m("div",Je,"No plaques connected")):$("",!0),(n(!0),m(A,null,P(c(t).plaques,_=>(n(),C(He,{plaque:_,key:_.id},null,8,["plaque"]))),128))],64))}});export{We as default};
