import{d as N,q as $,c as C,r,o as i,b as g,i as t,t as b,h as a,e as c,F as S,_ as D,w as s,g as P,v as E,f as V,x as G,y as U,z as j,j as v,T as B,A as L,l as T,u as H}from"./index.00ffcaa1.js";import{u as F}from"./plaque.f7063f05.js";import{_ as J,a as K,b as O,u as R,c as Q}from"./token-meta.d97b67e0.js";import{u as I,c as W}from"./plaque.0fbc1517.js";import{_ as X}from"./PlaqueTokenItem.c0e8294d.js";import{u as Y,h as M}from"./account.9f24488b.js";import"./token-meta.ef55c9bb.js";const Z=t("hr",{class:"hr"},null,-1),ee={class:"card-flex-container"},te={style:{flex:"1",width:"70px"}},oe=["src"],se={style:{flex:"3 1 0%"}},ae={class:"bold"},ne={class:"bold"},le=N({props:{token:null,plaque_id:null},setup(n){const o=n,d=$(!1),y=C(()=>!!u.value.entity.token_meta_id_list.find(l=>l==o.token.id)),u=C(()=>q.plaque_map[o.plaque_id]),q=F(),h=async()=>{if(d.value=!0,y.value){const l=u.value.entity.token_meta_id_list.filter(_=>_!=o.token.id);await I(o.plaque_id,{token_meta_id_list:l})}else{const l=[...u.value.entity.token_meta_id_list];l.push(o.token.id),await I(o.plaque_id,{token_meta_id_list:l})}d.value=!1},k=l=>new URL({"../assets/base.css":J,"../assets/logo.png":K,"../assets/logo.svg":O}[`../assets/${l}`],self.location).href;return(l,_)=>{const e=r("el-button");return i(),g(S,null,[Z,t("div",ee,[t("div",te,[t("img",{src:k("logo.png"),style:{width:"70px"}},null,8,oe)]),t("div",se,[t("p",ae,b(o.token.entity.name),1),t("p",ne,b(o.token.entity.artist),1)]),a(e,{icon:c(y)?"close":"plus",type:c(y)?"danger":"success",plain:"",circle:"",onClick:h,loading:d.value},null,8,["icon","type","loading"])])],64)}}});const _e=n=>(U("data-v-65d3984c"),n=n(),j(),n),ie={class:"dialog-container"},de={key:0},ue=_e(()=>t("hr",{class:"hr"},null,-1)),re={class:"dialog-footer"},ce=v("Clear"),pe=v("Done"),me=N({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(n,{emit:o}){const d=n;$(!1);const{width:y,screen_type:u}=R(),q=F(),h=Q(),k=C({get(){return d.show_add_token_dialog},set(e){o("update:show_add_token_dialog",e)}}),l=C(()=>h.archive_token_meta_list),_=C(()=>{const e=[];if(l!=null&&l.value)for(let p of l==null?void 0:l.value)q.meta_in_playlist(d.plaque_id,p.id)?e.unshift(p):e.push(p);return e});return(e,p)=>{const w=r("el-card"),x=r("el-button"),A=r("el-dialog");return i(),g("div",ie,[a(A,{class:"box-dialog",center:"",modelValue:c(k),"onUpdate:modelValue":p[0]||(p[0]=m=>G(k)?k.value=m:null),title:"Add tokens to plaque","close-on-click-modal":"false",fullscreen:c(u)=="xs","custom-class":"add-dialog"},{footer:s(()=>[t("span",re,[a(x,null,{default:s(()=>[ce]),_:1}),a(x,{type:"info"},{default:s(()=>[pe]),_:1})])]),default:s(()=>[a(w,{class:"box-card",shadow:"never"},{default:s(()=>[c(_).length==0?(i(),g("div",de,"No tokens found")):P("",!0),(i(!0),g(S,null,E(c(_),m=>(i(),V(le,{plaque_id:n.plaque_id,token:m},null,8,["plaque_id","token"]))),256)),ue]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var fe=D(me,[["__scopeId","data-v-65d3984c"]]);const z=n=>(U("data-v-f192b342"),n=n(),j(),n),ge=z(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),ye=v("online"),he={key:0},ve={style:{padding:"0 1em"}},ke={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},qe=v("Settings"),we=v("Add Artwork"),xe=z(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),$e=z(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),be={style:{padding:"1em"}},Ce={key:0,class:"card-detail"},Ae={key:0,style:{padding:"1em"}},Pe={style:{display:"flex",padding:"1em"}},Te=v("Clear Tokens"),Se=z(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Ve=v("Forget Display"),Ie=N({props:{plaque:null},setup(n){const o=n,d=$(!1),y=$(!1),u=Q(),q=C(()=>h.value.length==0?null:h.value[0]),h=C(()=>{const _=u.archive_token_meta_map;return o.plaque.entity.token_meta_id_list.map(p=>_[p])});$("0"),$(!0);const k=()=>{L.confirm(`Are you sure you want to clear tokens for plaque '${o.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{I(o.plaque.id,{token_meta_id_list:[]}).then(()=>{T({type:"success",message:"Tokens cleared"})}).catch(_=>{T({message:`Error clearing tokens from plaque - ${_}`,type:"error",showClose:!0,duration:12e3})})})},l=()=>{L.confirm(`Are you sure you want to forget the plaque named '${o.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{I(o.plaque.id,{wallet_address:""}).then(()=>{T({type:"success",message:"Plaque forgotten"})}).catch(_=>{T({message:`Error forgetting plaque - ${_}`,type:"error",showClose:!0,duration:12e3})})})};return(_,e)=>{const p=r("el-tag"),w=r("el-button"),x=r("el-col"),A=r("el-row"),m=r("el-card");return i(),V(m,null,{header:s(()=>[t("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:e[0]||(e[0]=f=>d.value=!d.value)},[t("h1",null,b(o.plaque.entity.name),1),ge,a(p,{class:"ml-2",type:"success"},{default:s(()=>[ye]),_:1})]),a(B,{name:"el-fade-in-linear"},{default:s(()=>[d.value?(i(),g("section",he,[t("p",ve,b(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),t("div",ke,[a(w,null,{default:s(()=>[qe]),_:1}),a(w,{type:"info",onClick:e[1]||(e[1]=f=>y.value=!0)},{default:s(()=>[we]),_:1})])])):P("",!0)]),_:1})]),default:s(()=>[a(B,{name:"el-fade-in-linear"},{default:s(()=>[d.value?P("",!0):(i(),g("section",{key:0,class:"card-simple",onClick:e[2]||(e[2]=f=>d.value=!0)},[a(A,{style:{"margin-bottom":"8px",padding:"1em"}},{default:s(()=>[a(x,{span:12},{default:s(()=>{var f;return[xe,t("span",null,b(((f=c(q))==null?void 0:f.entity.name)||"N/A"),1)]}),_:1}),a(x,{span:12},{default:s(()=>{var f;return[$e,v(" "+b(((f=c(q))==null?void 0:f.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),t("div",be,b(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),a(B,{name:"el-fade-in-linear"},{default:s(()=>[d.value?(i(),g("section",Ce,[c(h).length==0?(i(),g("div",Ae,"No tokens added")):P("",!0),(i(!0),g(S,null,E(c(h),f=>(i(),V(X,{token_meta:f},null,8,["token_meta"]))),256)),t("div",Pe,[a(w,{onClick:k},{default:s(()=>[Te]),_:1}),Se,a(w,{type:"danger",plain:"",onClick:l},{default:s(()=>[Ve]),_:1})])])):P("",!0)]),_:1}),a(fe,{plaque_id:o.plaque.id,show_add_token_dialog:y.value,"onUpdate:show_add_token_dialog":e[3]||(e[3]=f=>y.value=f)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Ne=D(Ie,[["__scopeId","data-v-f192b342"]]);const ze=n=>(U("data-v-8ff944b0"),n=n(),j(),n),Be={class:"add-button-container"},De={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},Ee=ze(()=>t("div",{style:{"font-size":"17px"}},"Add plaque",-1)),Ue={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},je=v("Scan Plaque QR Code"),Fe=v("Add test plaque "),Le=N({setup(n){const o=$(!1),{width:d,screen_type:y}=R(),u=$(!1),q=H(),h=Y(),k=F(),l=async()=>{o.value=!0,await W({name:"Test Plaque",wallet_address:h.get_account.entity.wallet_address,token_meta_id_list:[],created_at:M.now(),updated_at:M.now()}).catch(_=>T({message:`Error creating test plaque- ${_}`,type:"error",showClose:!0,duration:12e3})),o.value=!1,u.value=!1};return(_,e)=>{const p=r("Plus"),w=r("el-icon"),x=r("el-button"),A=r("el-dialog");return i(),g(S,null,[(i(!0),g(S,null,E(c(k).plaques,m=>(i(),V(Ne,{plaque:m,key:m.id},null,8,["plaque"]))),128)),t("div",Be,[t("div",De,[t("div",{class:"add-button",onClick:e[0]||(e[0]=m=>u.value=!0)},[a(w,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:s(()=>[a(p)]),_:1}),Ee])])]),a(A,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=m=>u.value=m),title:"Add plaque",width:c(y)=="xs"?"90%":"50%"},{default:s(()=>[t("div",Ue,[a(x,{onClick:e[1]||(e[1]=m=>{c(q).push("qr-scan"),u.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:s(()=>[je]),_:1}),a(x,{icon:"plus",onClick:l,loading:o.value,style:{margin:"10px 0px 10px 0px"}},{default:s(()=>[Fe]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var Oe=D(Le,[["__scopeId","data-v-8ff944b0"]]);export{Oe as default};
