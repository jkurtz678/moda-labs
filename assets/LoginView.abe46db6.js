import{_ as P,a as q,b as E,c as S}from"./search-icon.301e062d.js";import{_ as U,d as $,r as u,l as B,g as M,w as o,u as N,a as R,b as n,o as j,i as a,bE as A,k as p,j as d,f as b,q as h,y as D,z as K}from"./index.2c851de3.js";import{i as W,a as z}from"./firebaseConfig.d7a6b5a9.js";import{s as x}from"./util.cb0749f6.js";const F=i=>(D("data-v-104451a4"),i=i(),K(),i),T=F(()=>p("div",{class:"card-header"},[p("span",null,"Login to MoDA Labs")],-1)),G={style:{display:"flex","justify-content":"space-between"}},H={style:{"margin-top":"20px"}},J=$({__name:"LoginView",setup(i){const m=u(!1),_=u(),g=N(),c=R(),V=u({email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",message:"Please input a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]}),s=u({email:"",password:""});B(()=>{const t=localStorage.getItem("saved_email");t&&(s.value.email=t)});const v=async t=>{if(!t){x("Error finding form element");return}!await t.validate(l=>l)||(m.value=!0,W(z,s.value.email,s.value.password).then(l=>{if(localStorage.setItem("saved_email",s.value.email),c.query.redir&&typeof c.query.redir=="string"){window.location.assign(c.query.redir);return}g.push({name:"home"})}).catch(l=>{l.code==="auth/user-not-found"?h({type:"error",message:"User not found"}):l.code==="auth/wrong-password"?h({type:"error",message:"Wrong password"}):x(l.message)}).finally(()=>{m.value=!1}))},k=t=>new URL({"../assets/base.css":P,"../assets/logo.png":q,"../assets/logo.svg":E,"../assets/search-icon.svg":S}[`../assets/${t}`],self.location).href;return(t,e)=>{const l=n("el-image"),w=n("el-input"),y=n("el-form-item"),f=n("el-button"),I=n("el-form"),C=n("el-card"),L=n("el-container");return j(),M(L,{style:{display:"flex","align-items":"center","flex-direction":"column"}},{default:o(()=>[a(C,{class:"login-card",style:{"margin-top":"80px"}},{header:o(()=>[a(l,{src:k("logo.png"),style:{height:"170px",width:"170px",margin:"auto",display:"block","margin-bottom":"15px"}},null,8,["src"]),T]),default:o(()=>[a(I,{ref_key:"form_ref",ref:_,model:s.value,rules:V.value,"label-position":"left","label-width":"110px",onKeyup:e[4]||(e[4]=A(r=>v(_.value),["enter","native"]))},{default:o(()=>[a(y,{label:"Email",prop:"email"},{default:o(()=>[a(w,{modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.email=r)},null,8,["modelValue"])]),_:1}),a(y,{label:"Password",prop:"password"},{default:o(()=>[a(w,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.password=r),type:"password"},null,8,["modelValue"])]),_:1}),p("div",G,[a(f,{onClick:e[2]||(e[2]=r=>v(_.value)),color:"#000000",loading:m.value},{default:o(()=>[d("Login")]),_:1},8,["loading"]),a(f,{type:"primary",link:"",onClick:e[3]||(e[3]=r=>b(g).push("forgot-password"))},{default:o(()=>[d("Forgot Password?")]),_:1})])]),_:1},8,["model","rules"])]),_:1}),p("div",H,[d("Don't have an account? "),a(f,{type:"primary",link:"",onClick:e[5]||(e[5]=r=>b(g).push("sign-up"))},{default:o(()=>[d(" Sign Up ")]),_:1})])]),_:1})}}});var Z=U(J,[["__scopeId","data-v-104451a4"]]);export{Z as default};
