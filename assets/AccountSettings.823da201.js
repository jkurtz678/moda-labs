import{u as A,c as z,d as w}from"./account.5b163e37.js";import{u as M}from"./token-meta.c511ed82.js";import{s as x}from"./util.3f98e057.js";import{_ as B,d as I,r as O,c as T,h as E,i as u,w as m,b as p,o as v,k as e,t as c,f as o,e as W,j as $,x as g,J as b,p as N,l as V}from"./index.0725ad00.js";import"./types.6a5ef88e.js";import"./firebaseConfig.d7a6b5a9.js";import"./token-meta.e73e8480.js";const k=i=>(N("data-v-43ea9183"),i=i(),V(),i),j={style:{display:"flex","justify-content":"center"}},D=k(()=>e("div",{class:"card-header"},[e("span",{style:{"font-size":"18px"}},"Account Settings")],-1)),L=k(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"Email",-1)),J={key:0,style:{"margin-top":"2em"}},P={style:{"font-size":"var(--el-font-size-extra-small)",display:"flex","align-items":"center"}},q=k(()=>e("div",null,"Connected Ethereum Wallet",-1)),F={style:{display:"flex","align-items":"center"}},G=I({__name:"AccountSettings",setup(i){const d=A(),n=M(),a=O(!1),s=T(()=>d.get_account),C=async()=>{const{address:t,signature:h,ens_name:r}=await z();console.log("address",t,h,r),a.value=!0;const _={wallet_address:t,signature:h};r&&(_.ens_name=r),w(s.value.id,_).then(()=>d.loadAccount(s.value.id)).then(()=>{const l=n.loadOpenseaMintedTokenMetas(t).catch(y=>x(`Error loading opensea minted tokens - ${y}`)),f=n.loadOpenseaWalletTokenMetas(t).catch(y=>x(`Error loading opensea wallet tokens - ${y}`));return Promise.all([l,f])}).then(()=>{g({type:"success",message:"Ethereum wallet connected"})}).catch(l=>{g({message:`Error connecting wallet - ${l}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>a.value=!1)},S=async()=>{a.value=!0,b.confirm("Are you sure you want to disconnect your wallet?","Disconnect",{type:"warning"}).then(()=>{const t={wallet_address:"",signature:"",ens_name:""};return w(s.value.id,t)}).then(()=>d.loadAccount(s.value.id)).then(()=>{n.opensea_minted_token_meta_list=[],n.opensea_wallet_token_meta_list=[],g({type:"success",message:"Ethereum wallet disconnected"})}).catch(t=>{g({message:`Error disconnecting wallet - ${t}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>a.value=!1)};return(t,h)=>{const r=p("Check"),_=p("el-icon"),l=p("el-button"),f=p("el-card");return v(),E("div",j,[u(f,{class:"container-card"},{header:m(()=>[D]),default:m(()=>[L,e("div",null,c(o(d).get_account.entity.email),1),o(s).entity.wallet_address?(v(),E("div",J,[e("div",P,[q,u(_,{style:{color:"green","font-size":"1.5em","margin-left":"5px"}},{default:m(()=>[u(r)]),_:1})]),e("div",F,[e("div",null,c(o(s).entity.wallet_address),1),u(l,{text:"",circle:"",size:"small",icon:"close",style:{"margin-left":"5px"},onClick:S,loading:a.value},null,8,["loading"])]),e("div",null,"Loaded "+c(o(n).opensea_wallet_token_meta_list.length)+" wallet token"+c(o(n).opensea_wallet_token_meta_list.length==1?"":"s")+" from Opensea",1),e("div",null,"Loaded "+c(o(n).opensea_minted_token_meta_list.length)+" token"+c(o(n).opensea_minted_token_meta_list.length==1?"":"s")+" you minted from Opensea",1)])):(v(),W(l,{key:1,onClick:C,loading:a.value,style:{"margin-top":"2em"},icon:"Connection",color:"#000000"},{default:m(()=>[$("Connect Ethereum Wallet")]),_:1},8,["loading"]))]),_:1})])}}});var Z=B(G,[["__scopeId","data-v-43ea9183"]]);export{Z as default};
