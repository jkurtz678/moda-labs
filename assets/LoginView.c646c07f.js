import{_ as $,a as h,b as q,c as I}from"./search-icon.c7e2c65a.js";import{_ as S,d as B,r as u,m as F,h as M,j as s,w as a,F as N,b as R,e as j,f as n,o as A,i as m,c2 as D,k as p,u as y,x as b}from"./index.331660eb.js";import{l as K,a as W}from"./firebaseConfig.4d01e9b5.js";import{b as x,s as V}from"./util.cc9d3e3e.js";import{_ as C}from"./WelcomeDialog.98da0f61.js";import"./breakpoints.8c96e6ea.js";const T={style:{display:"flex","justify-content":"space-between"}},z={style:{"margin-top":"20px"}},G=B({__name:"LoginView",setup(H){const d=u(!1),g=u(),_=R(),f=j(),k=u({email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",message:"Please input a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]}),t=u({email:"",password:""});F(()=>{if(x()){const l=localStorage.getItem("saved_email");l&&(t.value.email=l)}});const c=async l=>{if(!l){V("Error finding form element");return}!await l.validate(o=>o)||(d.value=!0,K(W,t.value.email,t.value.password).then(o=>{var i;if(x()&&((i=o==null?void 0:o.user)==null?void 0:i.email)&&localStorage.setItem("saved_email",o.user.email),f.query.redir&&typeof f.query.redir=="string"){window.location.assign(f.query.redir);return}_.push({name:"home"})}).catch(o=>{o.code==="auth/user-not-found"?b({type:"error",message:"User not found"}):o.code==="auth/wrong-password"?b({type:"error",message:"Wrong password"}):V(o.message)}).finally(()=>{d.value=!1}))},L=l=>new URL({"../assets/base.css":$,"../assets/logo.png":h,"../assets/logo.svg":q,"../assets/search-icon.svg":I}[`../assets/${l}`],self.location).href;return(l,e)=>{const o=n("el-image"),i=n("el-input"),w=n("el-form-item"),v=n("el-button"),P=n("el-form"),E=n("el-card"),U=n("el-container");return A(),M(N,null,[s(U,{style:{display:"flex","align-items":"center","flex-direction":"column"}},{default:a(()=>[s(E,{class:"login-card",style:{"margin-top":"80px"}},{header:a(()=>[s(o,{src:L("logo.png"),style:{height:"170px",width:"170px",margin:"auto",display:"block","margin-bottom":"15px"}},null,8,["src"]),e[6]||(e[6]=m("div",{class:"card-header"},[m("span",null,"Login to MoDA Labs")],-1))]),default:a(()=>[s(P,{ref_key:"form_ref",ref:g,model:t.value,rules:k.value,"label-position":"left","label-width":"110px",onKeyup:e[4]||(e[4]=D(r=>c(g.value),["enter","native"]))},{default:a(()=>[s(w,{label:"Email",prop:"email"},{default:a(()=>[s(i,{modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.email=r)},null,8,["modelValue"])]),_:1}),s(w,{label:"Password",prop:"password"},{default:a(()=>[s(i,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.password=r),type:"password"},null,8,["modelValue"])]),_:1}),m("div",T,[s(v,{onClick:e[2]||(e[2]=r=>c(g.value)),color:"#000000",loading:d.value},{default:a(()=>e[7]||(e[7]=[p("Login")])),_:1},8,["loading"]),s(v,{type:"primary",link:"",onClick:e[3]||(e[3]=r=>y(_).push("forgot-password"))},{default:a(()=>e[8]||(e[8]=[p("Forgot Password?")])),_:1})])]),_:1},8,["model","rules"])]),_:1}),m("div",z,[e[10]||(e[10]=p("Don't have an account? ")),s(v,{type:"primary",link:"",onClick:e[5]||(e[5]=r=>y(_).push("sign-up"))},{default:a(()=>e[9]||(e[9]=[p(" Sign Up ")])),_:1})])]),_:1}),s(C)],64)}}});var ee=S(G,[["__scopeId","data-v-6b29172e"]]);export{ee as default};
