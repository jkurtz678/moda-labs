var p=Object.defineProperty,w=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var c=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,l=(e,t)=>{for(var a in t||(t={}))v.call(t,a)&&c(e,a,t[a]);if(_)for(var a of _(t))y.call(t,a)&&c(e,a,t[a]);return e},d=(e,t)=>w(e,f(t));import{k as g,l as E,s as T,c as u,q as A}from"./index.dec8826a.js";import{g as M,B as O,T as L,a as m,u as x}from"./account.cb655ced.js";import{g as W,a as C}from"./token-meta.991a239e.js";function N(){let e=g(window.innerWidth);const t=()=>e.value=window.innerWidth;E(()=>window.addEventListener("resize",t)),T(()=>window.removeEventListener("resize",t));const a=u(()=>e.value<650?"xs":e.value>=650&&e.value<1200?"md":e.value>=1200?"lg":null);return{width:u(()=>e.value),screen_type:a}}const h="742ea11e1d864fe2b23ac7cfe66a43f7";async function b(e){const t=await fetch(`https://api.opensea.io/api/v1/assets/?owner=${e}`,{headers:{"X-API-KEY":h}}),a=await t.json();return k(t,a),a.assets}const j=async e=>{const t=[];let a="";for(;;){const n=await fetch(`https://api.opensea.io/api/v1/events?account_address=${e}&event_type=created&limit=50${a?"&cursor="+a:""}`,{headers:{"X-API-KEY":h}}),s=await n.json();if(k(n,s),s.asset_events&&t.push(...s.asset_events.map(o=>d(l({},o.asset),{creator:o.from_account}))),a=s.next,!a)break}return t},k=(e,t)=>{if(e.status>=400)throw t.detail?t.detail:e.status==429?"Error - opensea rejected request due to rate limiting":"Error loading opensea tokens"},D=A({id:"token-meta",state:()=>({archive_token_meta_list:[],opensea_minted_token_meta_list:[],opensea_wallet_token_meta_list:[]}),getters:{archive_token_meta_map:e=>{const t={};return e.archive_token_meta_list.forEach(a=>{t[a.id]=a}),t},all_token_metas(e){const t={};return[...e.opensea_minted_token_meta_list,...e.opensea_wallet_token_meta_list].forEach(n=>{const s=B(n);t[s.id]=s}),e.archive_token_meta_list.forEach(n=>{t[m(n)]&&delete t[m(n)],t[n.id]=n}),t},sorted_all_token_metas(e){return JSON.parse(JSON.stringify(Object.values(this.all_token_metas))).sort((a,n)=>{var i,r;const s=((i=a.entity.artist)==null?void 0:i.toLowerCase())+a.entity.name.toLowerCase(),o=((r=n.entity.artist)==null?void 0:r.toLowerCase())+n.entity.name.toLowerCase();return s<o?-1:s>o?1:0})}},actions:{async loadArchiveTokenMetas(e){if(x().is_wallet_address_admin){await W(a=>{this.archive_token_meta_list=a.filter(n=>n.entity.external_media_url||n.entity.media_id)});return}await C(e,a=>{this.archive_token_meta_list=a})},async loadOpenseaMintedTokenMetas(e){await j(e).then(t=>{this.opensea_minted_token_meta_list=t})},async loadOpenseaWalletTokenMetas(e){await b(e).then(t=>{this.opensea_wallet_token_meta_list=t})}}}),B=e=>{var t,a;return{id:M(e),entity:{name:e.name,artist:((a=(t=e.creator)==null?void 0:t.user)==null?void 0:a.username)||"N/A",description:e.description,public_link:e.permalink,blockchain:O.Ethereum,asset_contract_address:e.asset_contract.address,token_id:e.token_id,platform:L.Opensea,external_thumbnail_url:e.image_thumbnail_url,external_media_url:e.animation_url?e.animation_url:e.image_url}}};export{D as a,N as u};
