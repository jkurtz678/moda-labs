import{y as s}from"./index.73941ac7.js";import{g as _,a as n,b as o}from"./plaque.88741b72.js";import{u}from"./account.a1e77a10.js";import"./gallery.87d4df98.js";const q=s({id:"plaque",state:()=>({plaque_list:[],gallery_plaque_list:[]}),getters:{all_plaque_list(i){return Object.values(this.plaque_map)},plaque_map(i){const l={};return i.plaque_list.forEach(t=>{l[t.id]=t}),i.gallery_plaque_list.forEach(t=>{l[t.id]=t}),l},meta_in_playlist(){return(i,l)=>this.plaque_map[i].entity.token_meta_id_list.some(e=>e==l)},token_meta_id_list(){let i=[];return this.all_plaque_list.forEach(l=>{i.push(...l.entity.token_meta_id_list)}),i}},actions:{async loadPlaques(i){if(u().is_user_admin){await _(t=>{for(let e=0;e<t.length;e++)t[e].entity.token_meta_id_list==null&&(t[e].entity.token_meta_id_list=[]);this.plaque_list=t});return}await n(i,t=>{for(let e=0;e<t.length;e++)t[e].entity.token_meta_id_list==null&&(t[e].entity.token_meta_id_list=[]);this.plaque_list=t})},async loadGalleryPlaques(i){const l=[];i.forEach(e=>{l.push(e.entity.plaque_id)}),console.log("plaque_id_list",l);const t=[];for(let e=0;e<l.length;e+=10){const a=await o(l.slice(e,e+10));t.push(...a)}this.gallery_plaque_list=t}}});export{q as u};
