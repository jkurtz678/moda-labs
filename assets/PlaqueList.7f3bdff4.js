import{d as z,k as q,c as b,r as i,o as r,b as y,i as o,t as C,h as e,e as m,F as T,_ as D,w as s,g as I,v as E,f as B,x as K,y as R,z as U,j as f,A as O,B as W,C as M,m as S,u as X}from"./index.6ee7478f.js";import{u as F}from"./plaque.d0a81822.js";import{_ as Y,a as Z,b as ee,u as G,c as H}from"./token-meta.1ba985b3.js";import{u as N,c as te}from"./plaque.d8447ee5.js";import{_ as oe}from"./PlaqueTokenItem.28bb9541.js";import{u as se,h as Q}from"./account.65977841.js";import"./token-meta.a5398b52.js";const le=o("hr",{class:"hr"},null,-1),ne={class:"card-flex-container"},ae={style:{flex:"1",width:"70px"}},ie=["src"],_e={style:{flex:"3 1 0%"}},de={class:"bold"},ue={class:"bold"},ce=z({props:{token:null,plaque_id:null},setup(n){const l=n,_=q(!1),h=b(()=>!!p.value.entity.token_meta_id_list.find(a=>a==l.token.id)),p=b(()=>w.plaque_map[l.plaque_id]),w=F(),v=async()=>{if(_.value=!0,h.value){const a=p.value.entity.token_meta_id_list.filter(d=>d!=l.token.id);await N(l.plaque_id,{token_meta_id_list:a})}else{const a=[...p.value.entity.token_meta_id_list];a.push(l.token.id),await N(l.plaque_id,{token_meta_id_list:a})}_.value=!1},k=a=>new URL({"../assets/base.css":Y,"../assets/logo.png":Z,"../assets/logo.svg":ee}[`../assets/${a}`],self.location).href;return(a,d)=>{const t=i("el-button");return r(),y(T,null,[le,o("div",ne,[o("div",ae,[o("img",{src:k("logo.png"),style:{width:"70px"}},null,8,ie)]),o("div",_e,[o("p",de,C(l.token.entity.name),1),o("p",ue,C(l.token.entity.artist),1)]),e(t,{icon:m(h)?"close":"plus",type:m(h)?"danger":"success",plain:"",circle:"",onClick:v,loading:_.value},null,8,["icon","type","loading"])])],64)}}});const re=n=>(R("data-v-65d3984c"),n=n(),U(),n),pe={class:"dialog-container"},me={key:0},fe=re(()=>o("hr",{class:"hr"},null,-1)),ge={class:"dialog-footer"},he=f("Clear"),ve=f("Done"),ye=z({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(n,{emit:l}){const _=n;q(!1);const{width:h,screen_type:p}=G(),w=F(),v=H(),k=b({get(){return _.show_add_token_dialog},set(t){l("update:show_add_token_dialog",t)}}),a=b(()=>v.archive_token_meta_list),d=b(()=>{const t=[];if(a!=null&&a.value)for(let g of a==null?void 0:a.value)w.meta_in_playlist(_.plaque_id,g.id)?t.unshift(g):t.push(g);return t});return(t,g)=>{const A=i("el-card"),x=i("el-button"),P=i("el-dialog");return r(),y("div",pe,[e(P,{class:"box-dialog",center:"",modelValue:m(k),"onUpdate:modelValue":g[0]||(g[0]=u=>K(k)?k.value=u:null),title:"Add tokens to plaque","close-on-click-modal":"false",fullscreen:m(p)=="xs","custom-class":"add-dialog"},{footer:s(()=>[o("span",ge,[e(x,null,{default:s(()=>[he]),_:1}),e(x,{type:"info"},{default:s(()=>[ve]),_:1})])]),default:s(()=>[e(A,{class:"box-card",shadow:"never"},{default:s(()=>[m(d).length==0?(r(),y("div",me,"No tokens found")):I("",!0),(r(!0),y(T,null,E(m(d),u=>(r(),B(ce,{plaque_id:n.plaque_id,token:u},null,8,["plaque_id","token"]))),256)),fe]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var ke=D(ye,[["__scopeId","data-v-65d3984c"]]);const V=n=>(R("data-v-014411fe"),n=n(),U(),n),we={style:{display:"flex","align-items":"center",padding:"1em"}},qe=V(()=>o("div",{style:{"flex-grow":"1"}},null,-1)),xe=f("online"),$e={class:"card-simple"},Ce=V(()=>o("hr",null,null,-1)),be=V(()=>o("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ae=V(()=>o("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Pe={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"1em"}},Se={style:{padding:"1em"}},Te=f(" View "),Ve={key:0,class:"card-detail"},Ie={style:{padding:"0 1em"}},Be={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Ne=f("Settings"),ze=f("Add Artwork"),je={key:0,style:{padding:"1em"}},De={style:{display:"flex",padding:"1em"}},Ee=f("Clear Tokens"),Re=V(()=>o("div",{style:{"flex-grow":"1"}},null,-1)),Ue=f("Close"),Fe={key:0,style:{padding:"1em",display:"flex","justify-content":"space-between"}},Le=f("Forget Display"),Me=f("Close"),Qe=z({props:{plaque:null},setup(n){const l=n,_=q("simple"),h=q(!1),p=H(),w=b(()=>v.value.length==0?null:v.value[0]),v=b(()=>{const d=p.archive_token_meta_map;return l.plaque.entity.token_meta_id_list.map(g=>d[g])});q("0"),q(!0);const k=()=>{M.confirm(`Are you sure you want to clear tokens for plaque '${l.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{N(l.plaque.id,{token_meta_id_list:[]}).then(()=>{S({type:"success",message:"Tokens cleared"})}).catch(d=>{S({message:`Error clearing tokens from plaque - ${d}`,type:"error",showClose:!0,duration:12e3})})})},a=()=>{M.confirm(`Are you sure you want to forget the plaque named '${l.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{N(l.plaque.id,{wallet_address:""}).then(()=>{S({type:"success",message:"Plaque forgotten"})}).catch(d=>{S({message:`Error forgetting plaque - ${d}`,type:"error",showClose:!0,duration:12e3})})})};return(d,t)=>{const g=i("el-tag"),A=i("el-col"),x=i("el-row"),P=i("ArrowRight"),u=i("el-icon"),$=i("el-button"),j=i("el-collapse-transition"),L=i("Close"),J=i("el-card");return r(),B(J,null,{default:s(()=>[o("div",we,[o("h1",null,C(l.plaque.entity.name),1),qe,e(g,{class:"ml-2",type:"success"},{default:s(()=>[xe]),_:1})]),e(j,null,{default:s(()=>[O(o("section",$e,[Ce,e(x,{style:{"margin-bottom":"8px",padding:"1em"}},{default:s(()=>[e(A,{span:12},{default:s(()=>{var c;return[be,o("span",null,C(((c=m(w))==null?void 0:c.entity.name)||"N/A"),1)]}),_:1}),e(A,{span:12},{default:s(()=>{var c;return[Ae,f(" "+C(((c=m(w))==null?void 0:c.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),o("div",Pe,[o("div",Se,C(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),e($,{onClick:t[0]||(t[0]=c=>_.value="detail")},{default:s(()=>[Te,e(u,{class:"el-icon--right"},{default:s(()=>[e(P)]),_:1})]),_:1})])],512),[[W,_.value=="simple"]])]),_:1}),e(j,null,{default:s(()=>[_.value=="detail"?(r(),y("section",Ve,[o("p",Ie,C(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),o("div",Be,[e($,{onClick:t[1]||(t[1]=c=>_.value="settings")},{default:s(()=>[Ne]),_:1}),e($,{type:"info",onClick:t[2]||(t[2]=c=>h.value=!0)},{default:s(()=>[ze]),_:1})]),m(v).length==0?(r(),y("div",je,"No tokens added")):I("",!0),(r(!0),y(T,null,E(m(v),c=>(r(),B(oe,{token_meta:c},null,8,["token_meta"]))),256)),o("div",De,[e($,{onClick:k},{default:s(()=>[Ee]),_:1}),Re,e($,{onClick:t[3]||(t[3]=c=>_.value="simple")},{default:s(()=>[Ue,e(u,{class:"el-icon--right"},{default:s(()=>[e(L)]),_:1})]),_:1})])])):I("",!0)]),_:1}),e(j,null,{default:s(()=>[_.value=="settings"?(r(),y("section",Fe,[e($,{type:"danger",plain:"",onClick:a},{default:s(()=>[Le]),_:1}),e($,{onClick:t[4]||(t[4]=c=>_.value="detail")},{default:s(()=>[Me,e(u,{class:"el-icon--right"},{default:s(()=>[e(L)]),_:1})]),_:1})])):I("",!0)]),_:1}),e(ke,{plaque_id:l.plaque.id,show_add_token_dialog:h.value,"onUpdate:show_add_token_dialog":t[5]||(t[5]=c=>h.value=c)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Ge=D(Qe,[["__scopeId","data-v-014411fe"]]);const He=n=>(R("data-v-8ff944b0"),n=n(),U(),n),Je={class:"add-button-container"},Ke={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},Oe=He(()=>o("div",{style:{"font-size":"17px"}},"Add plaque",-1)),We={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},Xe=f("Scan Plaque QR Code"),Ye=f("Add test plaque "),Ze=z({setup(n){const l=q(!1),{width:_,screen_type:h}=G(),p=q(!1),w=X(),v=se(),k=F(),a=async()=>{l.value=!0,await te({name:"Test Plaque",wallet_address:v.get_account.entity.wallet_address,token_meta_id_list:[],created_at:Q.now(),updated_at:Q.now()}).catch(d=>S({message:`Error creating test plaque- ${d}`,type:"error",showClose:!0,duration:12e3})),l.value=!1,p.value=!1};return(d,t)=>{const g=i("Plus"),A=i("el-icon"),x=i("el-button"),P=i("el-dialog");return r(),y(T,null,[(r(!0),y(T,null,E(m(k).plaques,u=>(r(),B(Ge,{plaque:u,key:u.id},null,8,["plaque"]))),128)),o("div",Je,[o("div",Ke,[o("div",{class:"add-button",onClick:t[0]||(t[0]=u=>p.value=!0)},[e(A,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:s(()=>[e(g)]),_:1}),Oe])])]),e(P,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=u=>p.value=u),title:"Add plaque",width:m(h)=="xs"?"90%":"50%"},{default:s(()=>[o("div",We,[e(x,{onClick:t[1]||(t[1]=u=>{m(w).push("qr-scan"),p.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:s(()=>[Xe]),_:1}),e(x,{icon:"plus",onClick:a,loading:l.value,style:{margin:"10px 0px 10px 0px"}},{default:s(()=>[Ye]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var it=D(Ze,[["__scopeId","data-v-8ff944b0"]]);export{it as default};
