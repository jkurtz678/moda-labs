import{d as f,t as h,o as b,r as _,c as d,y as p,z as u,A as v,C as k,F as y,e as x,w as g,f as E,P as r,bW as M,bX as C,b as P}from"./index.2e0b6610.js";function A({mustBeMetaMask:i=!1,silent:a=!1,timeout:n=3e3}={}){c();let l=!1;return new Promise(e=>{window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout(()=>{s()},n));function s(){if(l)return;l=!0,window.removeEventListener("ethereum#initialized",s);const{ethereum:t}=window;t&&(!i||t.isMetaMask)?e(t):(!a&&console.error("@metamask/detect-provider:",i&&t?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum."),e(null))}});function c(){if(typeof i!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof a!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof n!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var B=A;const I={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},L=["src"],N=r("Connect Metamask "),q={key:1,style:{"text-align":"center"}},z=r(" The Metamask extension was not detected on your browser. "),S=u("br",null,null,-1),T=r("Please "),U=r(" install Metamask "),V=r(" and then refresh the page. "),W=u("div",{style:{height:"100px"}},null,-1),j=f({setup(i){const a=h(!1),n=h(!1);b(async()=>{const e=await B();a.value=Boolean(e)});const l=async()=>{const{ethereum:e}=window;n.value=!0;let s,t;try{await e.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});const o=new M(window.ethereum);await o.send("eth_requestAccounts",[]);const m=o.getSigner();s=await m.getAddress();const w="MoDA Labs - proof of ownership. Please sign this message to prove ownership over your Ethereum account.";t=await m.signMessage(w),window.localStorage.setItem("account_address",s),window.localStorage.setItem("account_signature",t),C.push({name:"submit"})}catch(o){P({message:`Error connecting to Metamask - ${o.message?o.message:o}`,type:"error",showClose:!0,duration:1e4})}finally{n.value=!1}},c=e=>new URL({"../assets/base.css":v,"../assets/logo.png":k,"../assets/logo.svg":y}[`../assets/${e}`],self.location).href;return(e,s)=>{const t=_("el-button"),o=_("el-link");return d(),p("div",I,[u("img",{src:c("logo.png"),style:{width:"180px",height:"180px",display:"block","margin-bottom":"25px"}},null,8,L),a.value?(d(),x(t,{key:0,loading:n.value,onClick:l},{default:g(()=>[N]),_:1},8,["loading"])):(d(),p("div",q,[z,S,T,E(o,{type:"primary",href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en"},{default:g(()=>[U]),_:1}),V])),W])}}});export{j as default};
