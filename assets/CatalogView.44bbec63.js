import{a as k}from"./bid.3628f065.js";import{i as C}from"./token-meta.3b6b8610.js";import{s as y}from"./util.ab387025.js";import{a as $}from"./thumbnail-image.9df74a57.js";import{p as B}from"./types.903c99bc.js";import{d as w,L as A,a as x,w as E,f as L,o as i,l as n,u as h,t as _,r as f,c as o,q as M,h as u,F as g,J as v}from"./index.e69aca8a.js";import"./firebaseConfig.4d01e9b5.js";const S={style:{display:"flex","justify-content":"center","background-color":"#eeeeee"}},T=["src"],V={style:{"font-weight":"bold"}},D=w({__name:"CatalogArtTile",props:{token_meta:{}},setup(c){const r=c,s=$(A(r,"token_meta"));return(p,d)=>{const m=L("el-card");return i(),x(m,{style:{margin:"12px",width:"350px"}},{default:E(()=>[n("div",S,[n("img",{src:h(s),style:{"max-width":"100%","min-width":"140px","max-height":"240px"}},null,8,T)]),n("h2",V,_(r.token_meta.entity.name),1),n("div",null,_(h(B)(r.token_meta)),1)]),_:1})}}});const F={style:{"overflow-y":"auto",height:"100%"}},R={class:"container"},W={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},H=w({__name:"CatalogView",setup(c){const r=f([]),s=f([]);o(()=>r.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const p=o(()=>Array.from(new Set(r.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),d=o(()=>r.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),m=o(()=>r.value.reduce((t,e)=>(t[e.id]=e,t),{}));return o(()=>s.value.map(t=>{var a,l;const e=m.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(a=e==null?void 0:e.entity)==null?void 0:a.artist,artwork_name:(l=e==null?void 0:e.entity)==null?void 0:l.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),M(async()=>{C(t=>{console.log("R",t),r.value=t}).catch(t=>{y(`Error fetching token metas: ${t}`)}),k(t=>{console.log("bids",t),s.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{y(`Error fetching bids: ${t}`)})}),(t,e)=>(i(),u("div",F,[n("div",R,[(i(!0),u(g,null,v(p.value,a=>(i(),u("div",{key:a,style:{margin:"24px 0px"}},[n("h1",null,_(a),1),n("div",W,[(i(!0),u(g,null,v(d.value[a],l=>(i(),x(D,{token_meta:l},null,8,["token_meta"]))),256))])]))),128))])]))}});export{H as default};
