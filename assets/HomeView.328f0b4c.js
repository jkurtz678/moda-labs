import{u as B,_ as D,a as P,b as L,c as M,d as S}from"./token-meta.4314b63e.js";import{d as V,u as E,a as $,c as U,r as c,o as l,b as y,e as s,f as v,g as b,F as C,h as n,w as i,t as F,i as N,j as R,_ as H,k as I,l as j,E as O,R as z}from"./index.c38cac45.js";import{u as T,s as f}from"./account.08d32167.js";import{u as G}from"./plaque.4918b1ee.js";import{u as J}from"./plaque.7573bd1a.js";import"./token-meta.2678469d.js";const K={style:{display:"flex","align-items":"center"}},Q=N("div",{style:{"flex-grow":"1"}},null,-1),W=R(" Cancel "),X=N("div",{style:{"flex-grow":"1"}},null,-1),Y={key:0,style:{"margin-right":"10px"}},Z=R("Logout"),ee=V({setup(A){const o=E(),u=$(),d=T(),{width:q,screen_type:p}=B(),k=(e,t)=>{e.paneName&&typeof e.paneName=="string"&&o.push({name:e.paneName})},m=U(()=>{const e=d.account;if(!e)return"";if(e.entity.ens_name)return e.entity.ens_name;const t=e.entity.wallet_address;return`${t.substring(0,6)}...${t.substring(t.length-4)}`}),g=()=>{d.logout(),o.push({name:"landing",query:{redir:window.location.href}})},_=e=>new URL({"../assets/base.css":D,"../assets/logo.png":P,"../assets/logo.svg":L,"../assets/search-icon.svg":M}[`../assets/${e}`],self.location).href;return(e,t)=>{const w=c("el-image"),h=c("el-button"),r=c("el-tab-pane"),a=c("el-tabs");return l(),y("div",K,[s(p)!="xs"?(l(),v(w,{key:0,src:_("logo.png"),style:{width:"43px",height:"43px","margin-right":"2em"}},null,8,["src"])):b("",!0),s(o).currentRoute.value.name=="qr-scan"?(l(),y(C,{key:1},[Q,n(h,{icon:"close",onClick:t[0]||(t[0]=x=>s(o).push("plaque-list"))},{default:i(()=>[W]),_:1})],64)):(l(),y(C,{key:2},[n(a,{modelValue:s(u).name,"onUpdate:modelValue":t[1]||(t[1]=x=>s(u).name=x),onTabClick:k},{default:i(()=>[n(r,{label:"Plaques",name:"plaque-list"}),n(r,{label:"Tokens",name:"token-list"})]),_:1},8,["modelValue"]),X,s(p)!="xs"?(l(),y("div",Y,F(s(m)),1)):b("",!0),n(h,{onClick:g,style:{"margin-left":"1em"}},{default:i(()=>[Z]),_:1})],64))])}}});const te=V({setup(A){const o=T(),u=G(),d=S(),q=E(),p=I(!1),k=$();return j(async()=>{const m=O.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),{wallet_address:g,signature:_,ens_name:e}=o.getCachedAccountData();if(!g||!_){q.push({name:"landing",query:{redir:window.location.href}}),m.close();return}if(await o.loadAccount(g,_,e),o.account==null){f("Error - failed to load account");return}const t=u.loadPlaques(o.account.entity.wallet_address).catch(a=>f(`Error loading plaques - ${a}`)),w=d.loadArchiveTokenMetas(o.get_account.entity.wallet_address).catch(a=>f(`Error loading archive token metas - ${a}`)),h=d.loadOpenseaTokenMetas(o.get_account.entity.wallet_address).catch(a=>f(`Error loading opensea tokens - ${a}`));await Promise.all([t,w,h]);const r=k.query.plaque_id;r&&typeof r=="string"&&!u.plaque_map[r]&&await J(r,{wallet_address:o.get_account.entity.wallet_address,token_meta_id_list:[]}).catch(a=>{f(`Error adding plaque from query param = ${a}`)}),p.value=!0,m.close()}),(m,g)=>{const _=c("el-header"),e=c("el-main"),t=c("el-container");return l(),v(t,{style:{height:"100%"}},{default:i(()=>[n(_,{class:"header"},{default:i(()=>[n(ee)]),_:1}),n(e,{style:{"background-color":"#DAD9D7"}},{default:i(()=>[p.value?(l(),v(s(z),{key:0})):b("",!0)]),_:1})]),_:1})}}});var ce=H(te,[["__scopeId","data-v-c5f41536"]]);export{ce as default};
