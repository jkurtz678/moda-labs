import{b as F}from"./token-meta.8015aff1.js";import{s as w}from"./util.d95dc390.js";import{b as N}from"./thumbnail-image.bb7ba631.js";import{p as $}from"./types.4ea69ea7.js";import{r as _,p as M,d as S,J as B,m as A,z as D,c,h as m,i as d,u as k,n as P,g as b,t as h,e as I,b as G,o as s,_ as z,E as O,F as E,H as L,a as R}from"./index.215c046c.js";import{e as j,f as K}from"./gallery-token.c4aa5fe8.js";import"./firebaseConfig.4d01e9b5.js";function V(v="200% 0px"){const a=_(!1);let r=null;const y=()=>{r=new IntersectionObserver(n=>{n.forEach(l=>{l.isIntersecting&&(a.value=!0,r==null||r.disconnect())})},{rootMargin:v,threshold:0})},p=n=>{!n||(r&&r.disconnect(),y(),r==null||r.observe(n))};return M(()=>{r==null||r.disconnect(),r=null}),{isIntersecting:a,observe:p}}const H={style:{display:"flex","border-radius":"18px","flex-grow":"1"}},U=["src"],q={style:{"font-weight":"bold","overflow-wrap":"break-word"}},J={style:{"min-height":"24px"}},Q=S({__name:"CatalogArtTile",props:{token_meta:{}},setup(v){I();const a=G(),r=v,y=N(B(r,"token_meta")),{isIntersecting:p,observe:n}=V("200% 0px"),l=_(null);A(()=>{l.value?n(l.value):D(l,o=>{o&&n(o)},{immediate:!0})});const g=c(()=>{let o=340;if(!r.token_meta.entity.aspect_ratio)return 400;let u=o*r.token_meta.entity.aspect_ratio;return u<140&&(u=140,o=u/r.token_meta.entity.aspect_ratio),o});return c(()=>r.token_meta.entity.aspect_ratio?g.value*r.token_meta.entity.aspect_ratio:140),(o,u)=>(s(),m("div",{class:"tile-container",style:{margin:"12px",width:"340px"},onClick:u[0]||(u[0]=C=>k(a).push({name:"actions",params:{token_meta_id:r.token_meta.id}}))},[d("div",{style:{display:"flex","flex-direction":"column",height:"100%"},ref_key:"tile",ref:l},[d("div",H,[k(p)?(s(),m("img",{key:0,src:k(y),style:P(`height: ${g.value}px !important`)},null,12,U)):b("",!0)]),d("h2",q,h(r.token_meta.entity.name),1),d("div",J,h(k($)(r.token_meta)),1)],512)]))}});var W=z(Q,[["__scopeId","data-v-b59c0c0c"]]);const Y={key:0},Z={style:{"font-weight":"bold","font-size":"2.8em","padding-top":"1.5em"}},X={key:0,style:{"white-space":"pre-wrap"}},ee={key:1},te={style:{"font-weight":"bold","font-size":"2.8em",padding:"48px 0px 24px 0px"}},re={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},ce=S({__name:"CatalogGalleryDetail",setup(v){const a=I();a.params.gallery_id;const r=_([]),y=_([]),p=_(),n=_(),l={CtmSolhMWKKqrSrch1L3:`The Flux Festival Saturday Exhibition takes place on Nov. 23rd at the beautiful Audry Irmas Pavillion featuring Live Performances, New Media Art Gallery, VR films, and 3 floors of installations. Projekt Blank and Flux Festival are co-curating the physical exhibition to highlight artists and filmmakers pioneering creative uses of Ai and innovations in media art and film.

 Flux Festival culminates with live audio-visual performances by New York based @kevinpeterhe and @jakeoleson and the esteemed @nosajthing.`,vN1VWlc07Qo48dRTMKZw:`Presenting \u201CSequencer :: 002 \u2014 MICRO MYTHOLOGIES\u201D a design and media art group exhibition featuring a curation of new media artists exploring generative systems, mythical biology, micro organisms, and unseen or endangered parts of our world. This second edition will feature artists working in: Film, Animation, Light, Generative Art, Projection, Performance, and Time. Hosted at 821 Mateo St, SEQUENCER :: 002 will feature a gallery exhibition and an afterparty featuring Live performances by Spencer Sterling, Ninocence and DJ FUCK. 

Presented by the combined forces at Projekt______, and Optic Nerve.`},g=c(()=>{if(!a.params.gallery_id||typeof a.params.gallery_id!="string"){console.log("failed to get gallery id from params");return}return l[a.params.gallery_id]});c(()=>r.value.map(e=>({name:e.entity.name,artist:e.entity.artist,price:e.entity.price,price_unit:e.entity.price_unit})).sort((e,t)=>!(e!=null&&e.artist)||!(t!=null&&t.artist)?0:e.artist.localeCompare(t.artist)));const o=c(()=>Array.from(new Set(r.value.map(e=>e.entity.artist||""))).sort((e,t)=>e.localeCompare(t))),u=c(()=>r.value.reduce((e,t)=>(t.entity.artist&&(e[t.entity.artist]||(e[t.entity.artist]=[]),e[t.entity.artist].push(t)),e),{})),C=c(()=>r.value.reduce((e,t)=>(e[t.id]=t,e),{}));return c(()=>y.value.map(e=>{var i,f;const t=C.value[e.entity.token_meta_id];return{bidding_name:e.entity.bidding_name,email:e.entity.email,phone_number:e.entity.phone_number,amount:e.entity.amount,amount_unit:e.entity.amount_unit,artist_name:(i=t==null?void 0:t.entity)==null?void 0:i.artist,artwork_name:(f=t==null?void 0:t.entity)==null?void 0:f.name}}).sort((e,t)=>!(e!=null&&e.artwork_name)||!(t!=null&&t.artwork_name)?0:e.artwork_name.localeCompare(t.artwork_name))),A(async()=>{if(!a.params.gallery_id||typeof a.params.gallery_id!="string"){console.log("failed to get gallery id from params");return}n.value=O.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),j(a.params.gallery_id).then(e=>{const t=e.map(i=>i.entity.token_meta_id);return F(t).then(i=>{console.log("token_metas",r),r.value=i}).catch(i=>{w(`Error fetching token metas: ${i}`)}).finally(()=>{n.value.close()})}).catch(e=>{w(`Error fetching token metas: ${e}`)}),K(a.params.gallery_id).then(e=>{console.log("gallery",e),p.value=e}).catch(e=>{w(`Error fetching gallery: ${e}`)})}),(e,t)=>{var i,f;return(i=n.value)!=null&&i.visible?b("",!0):(s(),m("div",Y,[d("h1",Z,h((f=p.value)==null?void 0:f.entity.name),1),g.value?(s(),m("div",X,h(g.value),1)):b("",!0),o.value.length==0?(s(),m("div",ee,t[0]||(t[0]=[d("h1",{style:{"font-weight":"bold","font-size":"2.8em",padding:"48px 0px 24px 0px"}},"No Artworks",-1)]))):(s(!0),m(E,{key:2},L(o.value,x=>(s(),m("div",{key:x,style:{margin:"20px 0px"}},[d("h1",te,h(x),1),d("div",re,[(s(!0),m(E,null,L(u.value[x],T=>(s(),R(W,{token_meta:T},null,8,["token_meta"]))),256))])]))),128))]))}}});export{ce as default};
