import{p as s}from"./index.0edaa17d.js";import{g as _,a as n,b as o}from"./plaque.7c2bec7b.js";import{u}from"./account.8a1b5219.js";import"./gallery.367f1906.js";const q=s({id:"plaque",state:()=>({plaque_list:[],gallery_plaque_list:[]}),getters:{all_plaque_list(l){return Object.values(this.plaque_map)},plaque_map(){const l={};return this.plaque_list.forEach(e=>{l[e.id]=e}),this.gallery_plaque_list.forEach(e=>{l[e.id]=e}),l},meta_in_playlist(){return(l,e)=>this.plaque_map[l].entity.token_meta_id_list.some(t=>t==e)},token_meta_id_list(){let l=[];return this.all_plaque_list.forEach(e=>{l.push(...e.entity.token_meta_id_list)}),l}},actions:{async loadPlaques(l){if(u().is_user_admin){await _(i=>{for(let t=0;t<i.length;t++)i[t].entity.token_meta_id_list==null&&(i[t].entity.token_meta_id_list=[]);this.plaque_list=i});return}await n(l,i=>{for(let t=0;t<i.length;t++)i[t].entity.token_meta_id_list==null&&(i[t].entity.token_meta_id_list=[]);this.plaque_list=i})},async loadGalleryPlaques(l){const e=[];l.forEach(t=>{e.push(...t.entity.plaque_id_list)}),console.log("plaque_id_list",e);const i=[];for(let t=0;t<e.length;t+=10){const a=await o(e.slice(t,t+10));i.push(...a)}this.gallery_plaque_list=i}}});export{q as u};
