import{P as y,B}from"./types.67d14e22.js";import{d as k,r as $,c as g,h as a,l as _,t as u,g as b,F as v,o as r,L as E,u as T,i as D}from"./index.a0d92ef2.js";import{a as P}from"./thumbnail-image.d905bfd7.js";import{P as x,_ as C,f as L,R as N,c as H,I,p as M,b as R}from"./firebaseConfig.4d01e9b5.js";const V={key:0},F={key:1},m=150,S=k({__name:"TruncatedDescription",props:{description:{}},setup(i){const t=i,n=$(!1),c=g(()=>t.description?n.value||t.description.length<m?t.description:`${t.description.substring(0,m)}...`:"No artwork description");return(e,s)=>(r(),a(v,null,[_("div",null,u(c.value),1),_("div",null,[e.description&&e.description.length>m?(r(),a("a",{key:0,onClick:s[0]||(s[0]=o=>n.value=!n.value),class:"link"},[n.value?(r(),a("span",V,"Less")):(r(),a("span",F,"More"))])):b("",!0)])],64))}}),U={style:{"font-weight":"bold"}},q={style:{"font-weight":"bold"}},A=["src"],W={key:0,style:{"font-weight":"bold"}},O=k({__name:"ArtPreviewHeader",props:{token_meta:{}},setup(i){const t=i,n=P(E(t,"token_meta")),c=g(()=>{var e,s,o,d,p,l;switch((s=(e=t.token_meta)==null?void 0:e.entity)==null?void 0:s.price_unit){case y.USD:return`$${(d=(o=t.token_meta)==null?void 0:o.entity)==null?void 0:d.price}`;case y.ETH:return`${(l=(p=t.token_meta)==null?void 0:p.entity)==null?void 0:l.price} ETH`;default:return""}});return(e,s)=>{var o,d,p,l,h,f;return r(),a(v,null,[_("h1",U,u((d=(o=e.token_meta)==null?void 0:o.entity)==null?void 0:d.name),1),_("h3",q,u((l=(p=e.token_meta)==null?void 0:p.entity)==null?void 0:l.artist),1),_("img",{src:T(n),style:{"max-width":"100%","max-height":"250px",padding:"10px 0px"}},null,8,A),e.token_meta.entity.permission_to_sell?(r(),a("h2",W,u(c.value),1)):b("",!0),D(S,{description:(f=(h=e.token_meta)==null?void 0:h.entity)==null?void 0:f.description},null,8,["description"])],64)}}}),j=x(L),w=C(j,"bid"),Q=async(i,t)=>{const n=N(w,H("token_meta_id","==",i));await I(n,c=>{const e=[];c.forEach(s=>{e.push({id:s.id,entity:s.data()})}),t(e)})},X=async i=>{const t=await M(w,{...B.createBaseEntity(),...i}),n=await R(t);return{id:t.id,entity:n.data()}};export{O as _,X as c,Q as g};
