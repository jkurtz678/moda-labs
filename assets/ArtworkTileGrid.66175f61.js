import{d as G,P as K,Q,r as C,o as g,h as x,F as E,I as N,M as P,f as c,S as Y,j as O,t as S,T as J,U as X,m as q,z as Z,_ as H,L as ee,c as L,k as p,n as U,i as h,w as D,u as te,b as R,K as ne,p as oe,l as ae}from"./index.a7f8e826.js";import{u as le}from"./thumbnail-image.728df530.js";import{c as se}from"./types.6a5ef88e.js";import{u as re}from"./token-meta.0d6418b8.js";import"./firebaseConfig.d7a6b5a9.js";import"./token-meta.2d60a689.js";import"./account.7af1ed3c.js";import"./util.61e84c7d.js";const ie={columnWidth:400,gap:0,keyMapper:(n,s,f,l)=>l,minColumns:1,maxColumns:void 0,rtl:!1,scrollContainer:null,ssrColumns:0};function ue({columns:n,columnWidth:s,emit:f,gap:l,items:i,maxColumns:u,minColumns:v,nextTick:b,onBeforeUnmount:B,onMounted:M,rtl:r,scrollContainer:t,ssrColumns:a,vue:m,wall:y,watch:T}){function V(o,e,_,$){const A=d(_);return $+e+A<=o?V(o,e,_+1,$+e+A):_}function d(o){const e=Array.isArray(s.value)?s.value:[s.value];return e[o%e.length]}function w(){const o=V(y.value.getBoundingClientRect().width,l.value,0,-l.value),e=z(k(o));return e>0?e:1}function k(o){const e=u==null?void 0:u.value;return e&&o>e?e:o}function z(o){const e=v==null?void 0:v.value;return e&&o<e?e:o}function j(o){return[...new Array(o)].map(()=>[])}if(a.value>0){const o=j(a.value);i.value.forEach((e,_)=>o[_%a.value].push(_)),n.value=o}async function F(o){if(o>=i.value.length)return;await b();const e=[...y.value.children];r.value&&e.reverse();const _=e.reduce(($,A)=>A.getBoundingClientRect().height<$.getBoundingClientRect().height?A:$);n.value[+_.dataset.index].push(o),await F(o+1)}async function W(o=!1){if(n.value.length===w()&&!o){f(m===2?"redraw-skip":"redrawSkip");return}n.value=j(w());const e=t==null?void 0:t.value,_=e?e.scrollTop:window.scrollY;await F(0),e?e.scrollBy({top:_-e.scrollTop}):window.scrollTo({top:_}),f("redraw")}const I=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>W());return M(()=>{W(),I==null||I.observe(y.value)}),B(()=>I==null?void 0:I.unobserve(y.value)),T([i,r],()=>W(!0)),T([s,l,v,u],()=>W()),{getColumnWidthTarget:d}}const ce=["data-index"],me=G({__name:"masonry-wall",props:K({columnWidth:{},items:{},gap:{},rtl:{type:Boolean},ssrColumns:{},scrollContainer:{},minColumns:{},maxColumns:{},keyMapper:{type:Function}},ie),emits:["redraw","redrawSkip"],setup(n,{emit:s}){const f=n,{columnWidth:l,items:i,gap:u,rtl:v,ssrColumns:b,scrollContainer:B,minColumns:M,maxColumns:r,keyMapper:t}=Q(f),a=C([]),m=C(),{getColumnWidthTarget:y}=ue({columns:a,columnWidth:l,emit:s,gap:u,items:i,keyMapper:t,maxColumns:r,minColumns:M,nextTick:J,onBeforeUnmount:X,onMounted:q,rtl:v,scrollContainer:B,ssrColumns:b,vue:3,wall:m,watch:Z});return(T,V)=>(g(),x("div",{ref_key:"wall",ref:m,class:"masonry-wall",style:P({display:"flex",gap:`${c(u)}px`})},[(g(!0),x(E,null,N(a.value,(d,w)=>(g(),x("div",{key:w,class:"masonry-column","data-index":w,style:P({display:"flex","flex-basis":`${c(y)(w)}px`,"flex-direction":"column","flex-grow":1,gap:`${c(u)}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(g(!0),x(E,null,N(d,(k,z)=>(g(),x("div",{key:c(t)(c(i)[k],w,z,k),class:"masonry-item"},[Y(T.$slots,"default",{item:c(i)[k],column:w,row:z,index:k},()=>[O(S(c(i)[k]),1)])]))),128))],12,ce))),128))],4))}}),de=(()=>{const n=me;return n.install=s=>{s.component("MasonryWall",n)},n})();const _e=["src"],pe={class:"header"},ve={class:"platform"},fe={style:{"font-size":"1.6em","font-weight":"bold"}},ye={style:{"font-weight":"bold"}},we={style:{"font-size":"0.9em","line-height":"1.3em"}},he=G({__name:"ArtworkTile",props:{token_meta:null},setup(n){const s=n,f=le(ee(s,"token_meta")),l=C(!1),i=L(()=>se(s.token_meta.entity.platform));return(u,v)=>(g(),x("div",{class:"custom-card",onClick:v[0]||(v[0]=b=>l.value=!l.value)},[p("img",{class:U(l.value?"absolute":""),src:c(f)},null,10,_e),p("div",{class:U(["transition absolute",l.value?"hide-blur":"show-blur"])},[p("div",pe,S(`${n.token_meta.entity.name} | ${n.token_meta.entity.artist}`),1),p("div",ve,S(c(i)),1)],2),p("div",{class:U(["detail-container transition",l.value?"show-blur":"hide-blur absolute"])},[p("div",fe,S(n.token_meta.entity.name),1),p("div",ye,S(n.token_meta.entity.artist),1),p("div",we,S(n.token_meta.entity.description),1)],2)]))}});var ke=H(he,[["__scopeId","data-v-338a6379"]]);const ge=n=>(oe("data-v-33742f3e"),n=n(),ae(),n),xe={class:"subheader",style:{display:"flex","align-items":"center"}},Ce=ge(()=>p("div",{style:{"padding-bottom":"40px"}},null,-1)),be=G({__name:"ArtworkTileGrid",setup(n){const s=te(),f=re(),l=C(""),i=C(null),u=C(localStorage.getItem("token_list_sort_order")||"name"),v=C(1e3),b=L(()=>f.sorted_all_token_metas),B=L(()=>{let r=b.value.filter(t=>{var a,m;return((a=t.entity.artist)==null?void 0:a.toLowerCase().includes(l.value.toLowerCase()))||((m=t.entity.name)==null?void 0:m.toLowerCase().includes(l.value.toLowerCase()))});return u.value==="name"?r=r.sort((t,a)=>t.entity.name.localeCompare(a.entity.name)):u.value==="created_at"&&(r=r.sort((t,a)=>t.entity.created_at==null&&a.entity.created_at==null?0:t.entity.created_at==null?1:a.entity.created_at==null?-1:a.entity.created_at.seconds-t.entity.created_at.seconds)),r}),M=L(()=>{const r=B.value,t=0,a=t+v.value;return r.slice(t,a)});return q(()=>{if(!document.getElementById("masonry-container")){console.log("ArtworkTileGrid error, masonary_wall element not found");return}}),(r,t)=>{const a=R("el-input"),m=R("el-option"),y=R("el-select"),T=R("el-button"),V=R("RouterView");return g(),x(E,null,[p("div",xe,[h(a,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=d=>l.value=d),"prefix-icon":c(ne),placeholder:"Search artwork or artist",style:{"max-width":"350px"},clearable:""},null,8,["modelValue","prefix-icon"]),h(y,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=d=>u.value=d),placeholder:"Sort by",style:{"margin-left":"10px"}},{default:D(()=>[h(m,{label:"Sort by name",value:"name"}),h(m,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"]),h(T,{icon:"Plus",onClick:t[2]||(t[2]=d=>c(s).push({name:"new-artwork"})),color:"#000000",style:{"margin-left":"10px"},size:"small"},{default:D(()=>[O("Artwork")]),_:1})]),Ce,p("div",{id:"masonry-container",ref_key:"masonryContainer",ref:i,style:{"overflow-y":"auto",height:"100%",padding:"10px",margin:"-10px"}},[h(c(de),{id:"masonary-wall","scroll-container":i.value,items:c(M),"column-width":250,gap:14},{default:D(({item:d})=>[h(ke,{token_meta:d},null,8,["token_meta"])]),_:1},8,["scroll-container","items"])],512),h(V)],64)}}});var ze=H(be,[["__scopeId","data-v-33742f3e"]]);export{ze as default};
