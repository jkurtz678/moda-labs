import{s as E}from"./util.e1280d05.js";import{P as f}from"./types.67d14e22.js";import{d as k,r as _,c as y,h as l,l as p,t as h,g as $,F as P,o as a,L,u as V,i as x,Q as C,q as D,E as T,a as b,w as q,e as B,f as A,bh as M}from"./index.f8b5e9e5.js";import{a as N}from"./thumbnail-image.3fbbb806.js";import"./bid.0f39a804.js";import{h as R}from"./token-meta.9b03395e.js";import{i as w}from"./firebaseConfig.4d01e9b5.js";const H={key:0},Q={key:1},v=150,F=k({__name:"TruncatedDescription",props:{description:{}},setup(g){const t=g,i=_(!1),c=y(()=>t.description?i.value||t.description.length<v?t.description:`${t.description.substring(0,v)}...`:"No artwork description");return(e,m)=>(a(),l(P,null,[p("div",null,h(c.value),1),p("div",null,[e.description&&e.description.length>v?(a(),l("a",{key:0,onClick:m[0]||(m[0]=o=>i.value=!i.value),class:"link"},[i.value?(a(),l("span",H,"Less")):(a(),l("span",Q,"More"))])):$("",!0)])],64))}}),S={style:{"font-weight":"bold"}},U={style:{"font-weight":"bold"}},I=["src"],W={key:0,style:{"font-weight":"bold"}},j=k({__name:"ArtPreviewHeader",props:{token_meta:{}},setup(g){const t=g,i=N(L(t,"token_meta")),c=y(()=>{var e,m,o,s,n,r;switch((m=(e=t.token_meta)==null?void 0:e.entity)==null?void 0:m.price_unit){case f.USD:return`$${(s=(o=t.token_meta)==null?void 0:o.entity)==null?void 0:s.price}`;case f.ETH:return`${(r=(n=t.token_meta)==null?void 0:n.entity)==null?void 0:r.price} ETH`;default:return""}});return(e,m)=>{var o,s,n,r,d,u;return a(),l(P,null,[p("h1",S,h((s=(o=e.token_meta)==null?void 0:o.entity)==null?void 0:s.name),1),p("h3",U,h((r=(n=e.token_meta)==null?void 0:n.entity)==null?void 0:r.artist),1),p("img",{src:V(i),style:{"max-width":"100%","max-height":"250px",padding:"10px 0px"}},null,8,I),e.token_meta.entity.permission_to_sell?(a(),l("h2",W,h(c.value),1)):$("",!0),x(F,{description:(u=(d=e.token_meta)==null?void 0:d.entity)==null?void 0:u.description},null,8,["description"])],64)}}});const z={class:"container"},G={key:0},te=k({__name:"QrLandingView",setup(g){const t=B();_();const i=_({token_meta_id:"",bidding_name:"",email:"",phone_number:"",amount:0,created_at:w.now(),updated_at:w.now()}),c=_([]),e=_();C({bidding_name:[{required:!0,message:"Please enter your bidding name",trigger:"blur"}],email:[{required:!0,message:"Please enter your email",trigger:"blur"},{type:"email",message:"Please enter a valid email address",trigger:["blur","change"]}],phone_number:[{required:!0,message:"Please enter your phone number",trigger:"blur"},{pattern:/^\d{10}$/,message:"Please enter a valid 10-digit phone number",trigger:"blur"}],amount:[{required:!0,message:"Please enter a bid amount",trigger:"blur"},{validator:(n,r,d)=>{let u=0;s.value&&(u=s.value.entity.amount+1),r<=u?d(new Error(`Please enter a bid amount greater than $${u}`)):d()},trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"Please enter a valid number",trigger:"blur"}]});const o=_();_(!1),D(async()=>{if(!t.params.token_meta_id||t.params.token_meta_id instanceof Array){E("Error invalid token meta id");return}o.value=T.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),console.log("route.params.token_meta_id",t.params.token_meta_id),await R(t.params.token_meta_id,n=>{e.value=n,i.value.token_meta_id=n.id,o.value.close()})});const s=y(()=>c.value.length===0?null:c.value.reduce((n,r)=>n.entity.amount>r.entity.amount?n:r));return(n,r)=>{const d=A("RouterView");return a(),l("div",z,[e.value?(a(),b(j,{key:1,token_meta:e.value},null,8,["token_meta"])):(a(),l("div",G,"Loading")),x(d,null,{default:q(({Component:u})=>[(a(),b(M(u),{token_meta:e.value},null,8,["token_meta"]))]),_:1})])}}});export{te as default};
