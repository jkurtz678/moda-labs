import{d as I,t as x,v as T,r as m,c as n,y as p,z as e,A as U,C as E,F as M,G as f,f as i,h as c,H as C,I as D,_ as z,J as H,K as J,w as l,L as P,e as A,M as K,N as R,O as F,P as q,S as O,T as $,U as S,V,b as B}from"./index.39763943.js";import{a as Q}from"./token-meta.1befabf2.js";import{u as L,a as W}from"./token-meta.84077e42.js";const X=e("hr",{class:"hr"},null,-1),Y={class:"card-flex-container"},Z={style:{flex:"1",width:"70px"}},ee=["src"],te={style:{flex:"3 1 0%"}},se={class:"bold"},oe={class:"bold"},le=I({props:{detail:null,plaque_id:null},setup(s){const t=s,o=x(!1),u=T(()=>!!_.value.entity.token_meta_id_list.find(a=>a==t.detail.id)),_=T(()=>h.plaque_map[t.plaque_id]),h=L(),y=async()=>{if(o.value=!0,u.value){const a=_.value.entity.token_meta_id_list.filter(r=>r!=t.detail.id);await D(t.plaque_id,{token_meta_id_list:a})}else{const a=[..._.value.entity.token_meta_id_list];a.push(t.detail.id),await D(t.plaque_id,{token_meta_id_list:a})}o.value=!1},v=a=>new URL({"../assets/base.css":U,"../assets/logo.png":E,"../assets/logo.svg":M}[`../assets/${a}`],self.location).href;return(a,r)=>{const d=m("el-button");return n(),p(C,null,[X,e("div",Y,[e("div",Z,[e("img",{src:v("logo.png"),style:{width:"70px"}},null,8,ee)]),e("div",te,[e("p",se,f(t.detail.entity.name),1),e("p",oe,f(t.detail.entity.artist),1)]),i(d,{icon:c(u)?"close":"plus",type:c(u)?"danger":"success",plain:"",circle:"",onClick:y,loading:o.value},null,8,["icon","type","loading"])])],64)}}});const ne=s=>(R("data-v-03695a7c"),s=s(),F(),s),ae={class:"dialog-container"},ie=ne(()=>e("hr",{class:"hr"},null,-1)),de={class:"dialog-footer"},_e=q("Clear"),re=q("Done"),ce=I({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(s,{emit:t}){const o=s,u=x(),_=x(!1),{width:h,screen_type:y}=H(),v=T({get(){return o.show_add_token_dialog},set(a){t("update:show_add_token_dialog",a)}});return J(v,async a=>{!a||(_.value=!0,u.value=await Q(),_.value=!1)}),(a,r)=>{const d=m("el-card"),k=m("el-button"),w=m("el-dialog");return n(),p("div",ae,[i(w,{class:"box-dialog",center:"",modelValue:c(v),"onUpdate:modelValue":r[0]||(r[0]=b=>K(v)?v.value=b:null),title:"Add tokens","close-on-click-modal":"false",fullscreen:c(y)=="xs","custom-class":"add-dialog"},{footer:l(()=>[e("span",de,[i(k,null,{default:l(()=>[_e]),_:1}),i(k,{type:"info"},{default:l(()=>[re]),_:1})])]),default:l(()=>[i(d,{class:"box-card",shadow:"never"},{default:l(()=>[(n(!0),p(C,null,P(u.value,b=>(n(),A(le,{plaque_id:s.plaque_id,detail:b},null,8,["plaque_id","detail"]))),256)),ie]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var ue=z(ce,[["__scopeId","data-v-03695a7c"]]);const pe=e("hr",{class:"hr"},null,-1),ge={class:"card-flex-container"},me={style:{flex:"1"}},fe=["src"],he={style:{flex:"3 1 0%"}},ye={class:"bold"},ve={class:"bold"},ke={style:{flex:"1","text-align":"right","padding-right":"1em"}},we={key:0,class:"card-body"},xe={class:"card-flex-container"},$e={style:{flex:"1",width:"30%"}},qe=["src"],be={style:{flex:"3 1 0%",width:"70%"}},Ce={class:"bold bigger-font description"},Ae={class:"description"},Te=I({props:{detail:null},setup(s){const t=s,o=O({expanded:!1});x(!0);const u=_=>new URL({"../assets/base.css":U,"../assets/logo.png":E,"../assets/logo.svg":M}[`../assets/${_}`],self.location).href;return(_,h)=>{var r,d,k,w;const y=m("ArrowRightBold"),v=m("ArrowDownBold"),a=m("el-icon");return n(),p(C,null,[pe,e("div",ge,[e("div",me,[e("img",{src:u("logo.png"),class:"image",style:{"max-width":"70px"}},null,8,fe)]),e("div",he,[e("p",ye,f((d=(r=t.detail)==null?void 0:r.entity)==null?void 0:d.name),1),e("p",ve,f((w=(k=t.detail)==null?void 0:k.entity)==null?void 0:w.artist),1)]),e("div",ke,[i(a,{onClick:h[0]||(h[0]=b=>c(o).expanded=!c(o).expanded)},{default:l(()=>[c(o).expanded?$("",!0):(n(),A(y,{key:0})),c(o).expanded?(n(),A(v,{key:1})):$("",!0)]),_:1}),e("p",{onClick:h[1]||(h[1]=()=>{})},"Archive")])]),c(o).expanded?(n(),p("div",we,[e("div",xe,[e("div",$e,[e("div",null,f(t.detail.entity.name),1),e("img",{style:{width:"121px"},src:u("logo.png")},null,8,qe)]),e("div",be,[e("div",Ce,f(t.detail.entity.artist),1),e("div",Ae,f(t.detail.entity.description),1)])])])):$("",!0)],64)}}});const N=s=>(R("data-v-6f4f2628"),s=s(),F(),s),Ie=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Be=q("online"),De={key:0},Ne={style:{padding:"0 1em"}},Se={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Pe=q("Settings"),Ve=q("Add Artwork"),Ue=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Ee=N(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Me={style:{padding:"1em"}},ze={key:0,class:"card-detail"},Re={key:0,style:{padding:"1em"}},Fe={style:{display:"flex",padding:"1em"}},Le=q("Clear Tokens"),je=N(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ge=q("Forget Display"),He=I({props:{plaque:null},setup(s){const t=s;x(!0);const o=x(!1),u=x(!1),_=W();_.token_meta_list;const h=T(()=>y.value.length==0?null:y.value[0]),y=T(()=>{const r=_.token_meta_map;return t.plaque.entity.token_meta_id_list.map(k=>r[k])});x("0"),x(!0);const v=()=>{V.confirm(`Are you sure you want to clear tokens for plaque '${t.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{D(t.plaque.id,{token_meta_id_list:[]}).then(()=>{B({type:"success",message:"Tokens cleared"})}).catch(r=>{B({message:`Error clearing tokens from plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})},a=()=>{V.confirm(`Are you sure you want to forget the plaque named '${t.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{D(t.plaque.id,{account_id:""}).then(()=>{B({type:"success",message:"Plaque forgotten"})}).catch(r=>{B({message:`Error forgetting plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})};return(r,d)=>{const k=m("el-tag"),w=m("el-button"),b=m("el-col"),j=m("el-row"),G=m("el-card");return n(),A(G,null,{header:l(()=>[e("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:d[0]||(d[0]=g=>o.value=!o.value)},[e("h1",null,f(t.plaque.entity.name),1),Ie,i(k,{class:"ml-2",type:"success"},{default:l(()=>[Be]),_:1})]),i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?(n(),p("section",De,[e("p",Ne,f(`Total artworks: ${s.plaque.entity.token_meta_id_list.length}`),1),e("div",Se,[i(w,null,{default:l(()=>[Pe]),_:1}),i(w,{type:"info",onClick:d[1]||(d[1]=g=>u.value=!0)},{default:l(()=>[Ve]),_:1})])])):$("",!0)]),_:1})]),default:l(()=>[i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?$("",!0):(n(),p("section",{key:0,class:"card-simple",onClick:d[2]||(d[2]=g=>o.value=!0)},[i(j,{style:{"margin-bottom":"8px",padding:"1em"}},{default:l(()=>[i(b,{span:12},{default:l(()=>{var g;return[Ue,e("span",null,f(((g=c(h))==null?void 0:g.entity.name)||"N/A"),1)]}),_:1}),i(b,{span:12},{default:l(()=>{var g;return[Ee,q(" "+f(((g=c(h))==null?void 0:g.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),e("div",Me,f(`Total artworks: ${s.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),i(S,{name:"el-fade-in-linear"},{default:l(()=>[o.value?(n(),p("section",ze,[c(y).length==0?(n(),p("div",Re,"No tokens added")):$("",!0),(n(!0),p(C,null,P(c(y),g=>(n(),A(Te,{detail:g},null,8,["detail"]))),256)),e("div",Fe,[i(w,{onClick:v},{default:l(()=>[Le]),_:1}),je,i(w,{type:"danger",plain:"",onClick:a},{default:l(()=>[Ge]),_:1})])])):$("",!0)]),_:1}),i(ue,{plaque_id:t.plaque.id,show_add_token_dialog:u.value,"onUpdate:show_add_token_dialog":d[3]||(d[3]=g=>u.value=g)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Je=z(He,[["__scopeId","data-v-6f4f2628"]]);const Ke={key:0,style:{padding:"1em"}},Xe=I({setup(s){const t=L();return(o,u)=>(n(),p(C,null,[c(t).plaques.length==0?(n(),p("div",Ke,"No plaques connected")):$("",!0),(n(!0),p(C,null,P(c(t).plaques,_=>(n(),A(Je,{plaque:_,key:_.id},null,8,["plaque"]))),128))],64))}});export{Xe as default};
