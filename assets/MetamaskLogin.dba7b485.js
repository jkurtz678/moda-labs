import{d as w,t as _,o as f,r as d,c as r,y as g,z as l,A as b,C as k,F as y,e as v,w as u,f as x,P as o,bW as M,bX as C,b as E}from"./index.8e3fcbc8.js";const A={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",height:"100%"}},B=["src"],P=o("Connect Metamask "),S={key:1,style:{"text-align":"center"}},q=o(" The Metamask extension was not detected on your browser. "),I=l("br",null,null,-1),N=o("Please "),V=o(" install Metamask "),W=o(" and then refresh the page. "),L=l("div",{style:{height:"100px"}},null,-1),$=w({setup(T){const c=_(!1),n=_(!1);f(()=>{const{ethereum:e}=window;c.value=Boolean(e&&e.isMetaMask),e.on("message",s=>{console.log("MESSAGE",s)})});const h=async()=>{const{ethereum:e}=window;n.value=!0;let s,a;try{await e.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});const t=new M(window.ethereum);await t.send("eth_requestAccounts",[]);const i=t.getSigner();s=await i.getAddress();const p="MoDA Labs - proof of ownership. Please sign this message to prove ownership over your Ethereum account.";a=await i.signMessage(p),window.localStorage.setItem("account_address",s),window.localStorage.setItem("account_signature",a),C.push({name:"submit"})}catch(t){E({message:`Error connecting to Metamask - ${t.message?t.message:t}`,type:"error",showClose:!0,duration:1e4})}finally{n.value=!1}},m=e=>new URL({"../assets/base.css":b,"../assets/logo.png":k,"../assets/logo.svg":y}[`../assets/${e}`],self.location).href;return(e,s)=>{const a=d("el-button"),t=d("el-link");return r(),g("div",A,[l("img",{src:m("logo.png"),style:{width:"180px",height:"180px",display:"block","margin-bottom":"25px"}},null,8,B),c.value?(r(),v(a,{key:0,loading:n.value,onClick:h},{default:u(()=>[P]),_:1},8,["loading"])):(r(),g("div",S,[q,I,N,x(t,{type:"primary",href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en"},{default:u(()=>[V]),_:1}),W])),L])}}});export{$ as default};
