import{_ as S,d as U,r as d,g as x,w as r,u as k,b as l,o as C,i as o,bD as E,j as v,k as _,f as A,q,y as I,z as B}from"./index.a3819d71.js";import{k as N,a as $}from"./firebaseConfig.bef60b65.js";import{s as c}from"./util.0860e18a.js";import{u as j,c as D}from"./account.b9611fa1.js";import"./types.01590581.js";const K=u=>(I("data-v-2140ac3e"),u=u(),B(),u),M=K(()=>_("div",{class:"card-header",style:{display:"inline-block"}},[_("span",null,"Sign Up For MoDA Labs")],-1)),R=U({__name:"SignUpView",setup(u){const y=j(),p=d(!1),m=d(),f=k(),b=d({email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",message:"Please input a valid email",trigger:"blur"}],password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],confirm_password:[{required:!0,message:"Please input your password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"},{validator:(i,e,a)=>{if(e!=s.value.password)return a(new Error("Passwords do not match"));a()},trigger:"blur"}]}),s=d({email:"",password:"",confirm_password:""}),w=async i=>{if(!i){c("Error finding form element");return}if(!!await i.validate(a=>a)){p.value=!0;try{const a=await N($,s.value.email,s.value.password),n=await D(a.user.uid,{email:a.user.email});y.setAccount(n),q({type:"success",message:"Successfully created an account"}),f.push({name:"home"})}catch(a){a.code==="auth/email-already-in-use"?c("Email already in use"):c(a.message)}finally{p.value=!1}}};return(i,e)=>{const a=l("el-input"),n=l("el-form-item"),g=l("el-button"),V=l("el-form"),h=l("el-card"),P=l("el-container");return C(),x(P,{style:{display:"flex","justify-content":"center"}},{default:r(()=>[o(h,{class:"login-card"},{header:r(()=>[M]),default:r(()=>[o(V,{ref_key:"form_ref",ref:m,model:s.value,rules:b.value,"label-position":"left","label-width":"140px",onKeyup:e[5]||(e[5]=E(t=>w(m.value),["enter","native"]))},{default:r(()=>[o(n,{label:"Username",prop:"email"},{default:r(()=>[o(a,{modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.email=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"Password",prop:"password"},{default:r(()=>[o(a,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.password=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(n,{label:"Confirm Password",prop:"confirm_password"},{default:r(()=>[o(a,{modelValue:s.value.confirm_password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.confirm_password=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(g,{onClick:e[3]||(e[3]=t=>w(m.value)),color:"#000000",loading:p.value,style:{width:"100%"}},{default:r(()=>[v("Sign Up ")]),_:1},8,["loading"]),_("div",null,[o(g,{type:"primary",link:"",onClick:e[4]||(e[4]=t=>A(f).push("login")),style:{width:"100%","margin-top":"15px"}},{default:r(()=>[v(" Return to login")]),_:1})])]),_:1},8,["model","rules"])]),_:1})]),_:1})}}});var H=S(R,[["__scopeId","data-v-2140ac3e"]]);export{H as default};
