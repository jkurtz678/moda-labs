import{u as $,c as D,d as M}from"./account.1961531e.js";import{u as W}from"./token-meta.d139d64c.js";import{i as N,s as x}from"./util.5ab90654.js";import{u as V}from"./breakpoints.4926cb9b.js";import{d as j}from"./index.d82c3a20.js";import{_ as F,d as L,r as E,m as P,c as q,h as v,j as b,w as m,n as A,u as s,f as y,Y as I,o as i,i as n,t as d,F as Y,A as G,a as C,k as _,x as k,y as H}from"./index.7cde34ee.js";import"./types.b78a5cbd.js";import"./firebaseConfig.4d01e9b5.js";import"./token-meta.2699ce9f.js";const J={style:{display:"flex","justify-content":"center","margin-top":"50px"}},K={key:0},Q={style:{display:"flex","align-items":"center"}},R={key:0,style:{width:"60px",height:"60px"}},U=L({__name:"AccountSettings",setup(X){const p=$(),o=W(),a=E(!1),{md_and_up:z,screen_type:B}=V(),w=E(!1),g=E(!1);P(()=>{S()});const S=async()=>{if(N()){w.value=!0;return}g.value=!0;const t=await j().catch(e=>{x(`Error detecting ethereum provider - ${e}`)});w.value=Boolean(t),g.value=!1},l=q(()=>p.get_account),T=async()=>{const{address:t,signature:e,ens_name:r}=await D();console.log("address",t,e,r),a.value=!0;const f={wallet_address:t,signature:e};r&&(f.ens_name=r),M(l.value.id,f).then(()=>p.loadAccount(l.value.id)).then(()=>{const c=o.loadOpenseaMintedTokenMetas(t).catch(u=>x(`Error loading opensea minted tokens - ${u}`)),h=o.loadOpenseaWalletTokenMetas(t).catch(u=>x(`Error loading opensea wallet tokens - ${u}`));return Promise.all([c,h])}).then(()=>o.loadOpenseaConvertedTokens()).then(()=>{k({type:"success",message:"Ethereum wallet connected"})}).catch(c=>{k({message:`Error connecting wallet - ${c}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>a.value=!1)},O=async()=>{a.value=!0,H.confirm("Are you sure you want to disconnect your wallet?","Disconnect",{type:"warning"}).then(()=>{const t={wallet_address:"",signature:"",ens_name:""};return M(l.value.id,t)}).then(()=>p.loadAccount(l.value.id)).then(()=>{o.opensea_minted_token_meta_list=[],o.opensea_wallet_token_meta_list=[],k({type:"success",message:"Ethereum wallet disconnected"})}).catch(t=>{k({message:`Error disconnecting wallet - ${t}`,type:"error",showClose:!0,duration:12e3})}).finally(()=>a.value=!1)};return(t,e)=>{const r=y("el-button"),f=y("el-link"),c=y("el-alert"),h=y("el-card"),u=I("loading");return i(),v("div",J,[b(h,{class:"container-card",style:A(s(z)?"min-width: 700px;":"")},{header:m(()=>e[0]||(e[0]=[n("div",{class:"card-header"},[n("span",{style:{"font-size":"18px"}},"Account Settings")],-1)])),default:m(()=>[e[7]||(e[7]=n("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"Email",-1)),n("div",null,d(s(p).get_account.entity.email),1),e[8]||(e[8]=n("div",{style:{"font-size":"var(--el-font-size-extra-small)","margin-top":"2em"}},"Ethereum Wallet",-1)),l.value.entity.wallet_address?(i(),v("div",K,[n("div",Q,[n("div",{style:A(s(B)=="xs"?"max-width: 250px; text-overflow: ellipsis; overflow: hidden;":"")},d(l.value.entity.wallet_address),5),b(r,{text:"",circle:"",size:"small",icon:"close",style:{"margin-left":"5px"},onClick:O,loading:a.value},null,8,["loading"])]),n("div",null,"Loaded "+d(s(o).opensea_wallet_token_meta_list.length)+" wallet token"+d(s(o).opensea_wallet_token_meta_list.length==1?"":"s")+" from Opensea",1),n("div",null,"Loaded "+d(s(o).opensea_minted_token_meta_list.length)+" token"+d(s(o).opensea_minted_token_meta_list.length==1?"":"s")+" you minted from Opensea ",1)])):(i(),v(Y,{key:1},[g.value?G((i(),v("div",R,null,512)),[[u,g.value]]):w.value?(i(),C(r,{key:1,onClick:T,loading:a.value,icon:"Connection",color:"#000000"},{default:m(()=>e[1]||(e[1]=[_(" Connect With Metamask ")])),_:1},8,["loading"])):(i(),C(c,{key:2,type:"warning","show-icon":"",title:"Metamask extension not found",style:{"margin-bottom":"1.5em"},closable:!1},{default:m(()=>[e[3]||(e[3]=_(" The Metamask browser extension is required to connect your wallet, and this extension was not detected on your browser. ")),e[4]||(e[4]=n("br",null,null,-1)),e[5]||(e[5]=_("Please ")),b(f,{type:"primary",style:{"font-size":"12px","vertical-align":"top"},href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en"},{default:m(()=>e[2]||(e[2]=[_(" install Metamask ")])),_:1}),e[6]||(e[6]=_(" and then refresh the page. "))]),_:1}))],64))]),_:1},8,["style"])])}}});var ie=F(U,[["__scopeId","data-v-59a73eb0"]]);export{ie as default};
