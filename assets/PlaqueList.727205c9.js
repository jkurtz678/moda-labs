import{d as I,t as w,v as B,r as m,c as a,y as h,z as e,A as E,C as M,F as N,G as g,f as d,h as u,H as A,I as L,J as j,e as C,w as n,K as D,L as G,M as x,N as H,O as b,_ as J,P as V,S as K,U as O,V as U,b as T}from"./index.9def8887.js";import{a as Q}from"./token-meta.6dac698b.js";import{u as z,a as W}from"./token-meta.967f1de2.js";import{u as P}from"./plaque.fb2a1e0f.js";const X=e("hr",{class:"hr"},null,-1),Y={class:"card-flex-container"},Z={style:{flex:"1",width:"70px"}},ee=["src"],te={style:{flex:"3 1 0%"}},se={class:"bold"},oe={class:"bold"},ne=I({props:{detail:null,plaque_id:null},setup(r){const t=r,s=w(!1),c=B(()=>!!_.value.entity.token_meta_id_list.find(l=>l==t.detail.id)),_=B(()=>y.plaque_map[t.plaque_id]),y=z(),$=async()=>{if(s.value=!0,c.value){const l=_.value.entity.token_meta_id_list.filter(i=>i!=t.detail.id);await P(t.plaque_id,{token_meta_id_list:l})}else{const l=[..._.value.entity.token_meta_id_list];l.push(t.detail.id),await P(t.plaque_id,{token_meta_id_list:l})}s.value=!1},v=l=>new URL({"../assets/base.css":E,"../assets/logo.png":M,"../assets/logo.svg":N}[`../assets/${l}`],self.location).href;return(l,i)=>{const o=m("el-button");return a(),h(A,null,[X,e("div",Y,[e("div",Z,[e("img",{src:v("logo.png"),style:{width:"70px"}},null,8,ee)]),e("div",te,[e("p",se,g(t.detail.entity.name),1),e("p",oe,g(t.detail.entity.artist),1)]),d(o,{icon:u(c)?"close":"plus",type:u(c)?"danger":"success",plain:"",circle:"",onClick:$,loading:s.value},null,8,["icon","type","loading"])])],64)}}}),le=e("hr",{class:"hr"},null,-1),ae={class:"dialog-footer"},ie=x("Clear"),de=x("Done"),_e=I({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(r,{emit:t}){const s=r,c=w(),_=w(!1),{width:y,screen_type:$}=L(),v=B({get(){return s.show_add_token_dialog},set(l){t("update:show_add_token_dialog",l)}});return j(v,async l=>{!l||(_.value=!0,c.value=await Q(),_.value=!1)}),(l,i)=>{const o=m("el-card"),f=m("el-button"),k=m("el-dialog");return a(),C(k,{class:"box-dialog",center:"",modelValue:u(v),"onUpdate:modelValue":i[0]||(i[0]=q=>G(v)?v.value=q:null),title:"Add tokens",width:"530px","close-on-click-modal":"false",fullscreen:u($)=="xs"},{footer:n(()=>[e("span",ae,[d(f,null,{default:n(()=>[ie]),_:1}),d(f,{type:"info"},{default:n(()=>[de]),_:1})])]),default:n(()=>[d(o,{class:"box-card",shadow:"never"},{default:n(()=>[(a(!0),h(A,null,D(c.value,q=>(a(),C(ne,{plaque_id:r.plaque_id,detail:q},null,8,["plaque_id","detail"]))),256)),le]),_:1})]),_:1},8,["modelValue","fullscreen"])}}});const re=e("hr",{class:"hr"},null,-1),ce={class:"card-flex-container"},ue={style:{flex:"1"}},pe=["src"],me={style:{flex:"3 1 0%"}},ge={class:"bold"},fe={class:"bold"},he={style:{flex:"1","text-align":"right","padding-right":"1em"}},ye={key:0,class:"card-body"},ve={class:"card-flex-container"},ke={style:{flex:"1",width:"30%"}},we=["src"],xe={style:{flex:"3 1 0%",width:"70%"}},$e={class:"bold bigger-font description"},qe={class:"description"},be=I({props:{detail:null},setup(r){const t=r,s=H({expanded:!1});w(!0);const c=_=>new URL({"../assets/base.css":E,"../assets/logo.png":M,"../assets/logo.svg":N}[`../assets/${_}`],self.location).href;return(_,y)=>{var i,o,f,k;const $=m("ArrowRightBold"),v=m("ArrowDownBold"),l=m("el-icon");return a(),h(A,null,[re,e("div",ce,[e("div",ue,[e("img",{src:c("logo.png"),class:"image",style:{"max-width":"70px"}},null,8,pe)]),e("div",me,[e("p",ge,g((o=(i=t.detail)==null?void 0:i.entity)==null?void 0:o.name),1),e("p",fe,g((k=(f=t.detail)==null?void 0:f.entity)==null?void 0:k.artist),1)]),e("div",he,[d(l,{onClick:y[0]||(y[0]=q=>u(s).expanded=!u(s).expanded)},{default:n(()=>[u(s).expanded?b("",!0):(a(),C($,{key:0})),u(s).expanded?(a(),C(v,{key:1})):b("",!0)]),_:1}),e("p",{onClick:y[1]||(y[1]=()=>{})},"Archive")])]),u(s).expanded?(a(),h("div",ye,[e("div",ve,[e("div",ke,[e("div",null,g(t.detail.entity.name),1),e("img",{style:{width:"121px"},src:c("logo.png")},null,8,we)]),e("div",xe,[e("div",$e,g(t.detail.entity.artist),1),e("div",qe,g(t.detail.entity.description),1)])])])):b("",!0)],64)}}});const S=r=>(K("data-v-642b48a6"),r=r(),O(),r),Ce=S(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Ae=x("online"),Be={key:0},Ie={style:{padding:"0 1em"}},Te={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},Pe=x("Settings"),Se=x("Add Artwork"),Ve=S(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),De=S(()=>e("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Ue={style:{padding:"1em"}},Ee={key:0,class:"card-detail"},Me={style:{display:"flex",padding:"1em"}},Ne=x("Clear Tokens"),ze=S(()=>e("div",{style:{"flex-grow":"1"}},null,-1)),Re=x("Forget Display"),Fe=I({props:{plaque:null},setup(r){const t=r;w(!0);const s=w(!1),c=w(!1),_=W();_.token_meta_list;const y=B(()=>{const i=_.token_meta_map;let o=t.plaque.entity.token_meta_id_list.map(f=>i[f]);return o[0]?o[0]:null}),$=B(()=>{const i=_.token_meta_map;return t.plaque.entity.token_meta_id_list.map(f=>i[f])});w("0"),w(!0);const v=()=>{U.confirm(`Are you sure you want to clear tokens for plaque '${t.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{P(t.plaque.id,{token_meta_id_list:[]}).then(()=>{T({type:"success",message:"Tokens cleared"})}).catch(i=>{T({message:`Error clearing tokens from plaque - ${i}`,type:"error",showClose:!0,duration:12e3})})})},l=()=>{U.confirm(`Are you sure you want to forget the plaque named '${t.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{P(t.plaque.id,{account_id:""}).then(()=>{T({type:"success",message:"Plaque forgotten"})}).catch(i=>{T({message:`Error forgetting plaque - ${i}`,type:"error",showClose:!0,duration:12e3})})})};return(i,o)=>{const f=m("el-tag"),k=m("el-button"),q=m("el-col"),R=m("el-row"),F=m("el-card");return a(),C(F,null,{header:n(()=>[e("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:o[0]||(o[0]=p=>s.value=!s.value)},[e("h1",null,g(t.plaque.entity.name),1),Ce,d(f,{class:"ml-2",type:"success"},{default:n(()=>[Ae]),_:1})]),d(V,{name:"el-fade-in-linear"},{default:n(()=>[s.value?(a(),h("section",Be,[e("p",Ie,g(`Total artworks: ${r.plaque.entity.token_meta_id_list.length}`),1),e("div",Te,[d(k,null,{default:n(()=>[Pe]),_:1}),d(k,{type:"info",onClick:o[1]||(o[1]=p=>c.value=!0)},{default:n(()=>[Se]),_:1})])])):b("",!0)]),_:1})]),default:n(()=>[d(V,{name:"el-fade-in-linear"},{default:n(()=>[s.value?b("",!0):(a(),h("section",{key:0,class:"card-simple",onClick:o[2]||(o[2]=p=>s.value=!0)},[d(R,{style:{"margin-bottom":"8px",padding:"1em"}},{default:n(()=>[d(q,{span:12},{default:n(()=>{var p;return[Ve,e("span",null,g((p=u(y))==null?void 0:p.entity.name),1)]}),_:1}),d(q,{span:12},{default:n(()=>{var p;return[De,x(" "+g((p=u(y))==null?void 0:p.entity.artist),1)]}),_:1})]),_:1}),e("div",Ue,g(`Total artworks: ${r.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),d(V,{name:"el-fade-in-linear"},{default:n(()=>[s.value?(a(),h("section",Ee,[(a(!0),h(A,null,D(u($),p=>(a(),C(be,{detail:p},null,8,["detail"]))),256)),e("div",Me,[d(k,{onClick:v},{default:n(()=>[Ne]),_:1}),ze,d(k,{type:"danger",plain:"",onClick:l},{default:n(()=>[Re]),_:1})])])):b("",!0)]),_:1}),d(_e,{plaque_id:t.plaque.id,show_add_token_dialog:c.value,"onUpdate:show_add_token_dialog":o[3]||(o[3]=p=>c.value=p)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Le=J(Fe,[["__scopeId","data-v-642b48a6"]]);const je={key:0,style:{padding:"1em"}},Oe=I({setup(r){const t=z();return(s,c)=>(a(),h(A,null,[u(t).plaques.length==0?(a(),h("div",je,"No plaques connected")):b("",!0),(a(!0),h(A,null,D(u(t).plaques,_=>(a(),C(Le,{plaque:_,key:_.id},null,8,["plaque"]))),128))],64))}});export{Oe as default};
