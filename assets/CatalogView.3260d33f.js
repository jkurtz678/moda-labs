import{a as $}from"./bid.3628f065.js";import{i as A}from"./token-meta.3b6b8610.js";import{s as v}from"./util.95079966.js";import{a as B}from"./thumbnail-image.28f66c83.js";import{p as L}from"./types.903c99bc.js";import{d as h,J as R,h as u,i as s,u as d,t as y,e as T,b as E,o as a,_ as k,a as b,w as H,f as g,j as f,r as x,c as _,m as M,F as w,H as C}from"./index.467b5d62.js";import{_ as S,a as V,b as D,c as I}from"./search-icon.c7e2c65a.js";import"./firebaseConfig.4d01e9b5.js";const j={style:{display:"flex","flex-direction":"column",height:"100%"}},F={style:{display:"flex","justify-content":"center","background-color":"#eeeeee","border-radius":"18px","flex-grow":"1"}},N=["src"],U={style:{"font-weight":"bold"}},W=h({__name:"CatalogArtTile",props:{token_meta:{}},setup(c){T();const n=E(),r=c,o=B(R(r,"token_meta"));return(m,i)=>(a(),u("div",{style:{margin:"12px",width:"340px"},onClick:i[0]||(i[0]=t=>d(n).push({name:"qr-landing",params:{token_meta_id:r.token_meta.id}}))},[s("div",j,[s("div",F,[s("img",{src:d(o)},null,8,N)]),s("h2",U,y(r.token_meta.entity.name),1),s("div",null,y(d(L)(r.token_meta)),1)])]))}});var q=k(W,[["__scopeId","data-v-0bf3fafb"]]);const J=h({__name:"CatalogHeader",setup(c){const n=r=>new URL({"../../assets/base.css":S,"../../assets/logo.png":V,"../../assets/logo.svg":D,"../../assets/search-icon.svg":I}[`../../assets/${r}`],self.location).href;return(r,o)=>{const m=g("el-image"),i=g("el-divider"),t=g("el-header");return a(),b(t,null,{default:H(()=>[f(m,{src:n("logo.png"),style:{width:"60px",height:"60px","margin-right":"2em"}},null,8,["src"]),o[0]||(o[0]=s("h1",{style:{"font-weight":"bold"}}," M0DA LABS",-1)),f(i,{style:{position:"absolute",bottom:"0px",left:"0px",right:"0px",margin:"0px"}})]),_:1})}}});var O=k(J,[["__scopeId","data-v-5853d4b8"]]);const z={style:{"overflow-y":"auto",height:"100%"}},G={class:"container"},K={style:{"font-weight":"bold"}},P={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},st=h({__name:"CatalogView",setup(c){const n=x([]),r=x([]);_(()=>n.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const o=_(()=>Array.from(new Set(n.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),m=_(()=>n.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),i=_(()=>n.value.reduce((t,e)=>(t[e.id]=e,t),{}));return _(()=>r.value.map(t=>{var l,p;const e=i.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(l=e==null?void 0:e.entity)==null?void 0:l.artist,artwork_name:(p=e==null?void 0:e.entity)==null?void 0:p.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),M(async()=>{A(t=>{console.log("R",t),n.value=t}).catch(t=>{v(`Error fetching token metas: ${t}`)}),$(t=>{console.log("bids",t),r.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{v(`Error fetching bids: ${t}`)})}),(t,e)=>(a(),u("div",z,[f(O),s("div",G,[(a(!0),u(w,null,C(o.value,l=>(a(),u("div",{key:l,style:{margin:"24px 0px"}},[s("h1",K,y(l),1),s("div",P,[(a(!0),u(w,null,C(m.value[l],p=>(a(),b(q,{token_meta:p},null,8,["token_meta"]))),256))])]))),128))])]))}});export{st as default};
