import{a as k}from"./bid.3628f065.js";import{i as C}from"./token-meta.3b6b8610.js";import{s as f}from"./util.56173612.js";import{a as $}from"./thumbnail-image.b8176fc7.js";import{p as A}from"./types.903c99bc.js";import{d as x,J as B,a as w,w as T,u as c,e as E,b as R,f as L,o as i,i as r,t as p,_ as M,r as h,c as s,m as S,h as _,F as g,H as v}from"./index.85922471.js";import"./firebaseConfig.4d01e9b5.js";const V={style:{display:"flex","flex-direction":"column",height:"100%"}},j={style:{display:"flex","justify-content":"center","background-color":"#eeeeee","flex-grow":"1"}},D=["src"],F={style:{"font-weight":"bold"}},W=x({__name:"CatalogArtTile",props:{token_meta:{}},setup(d){E();const n=R(),a=d,m=$(B(a,"token_meta"));return(y,l)=>{const t=L("el-card");return i(),w(t,{style:{margin:"12px",width:"340px"},onClick:l[0]||(l[0]=e=>c(n).push({name:"qr-landing",params:{token_meta_id:a.token_meta.id}}))},{default:T(()=>[r("div",V,[r("div",j,[r("img",{src:c(m),style:{"max-width":"100%","min-width":"140px","max-height":"240px","object-fit":"contain"}},null,8,D)]),r("h2",F,p(a.token_meta.entity.name),1),r("div",null,p(c(A)(a.token_meta)),1)])]),_:1})}}});var q=M(W,[["__scopeId","data-v-0998f168"]]);const H={style:{"overflow-y":"auto",height:"100%"}},I={class:"container"},J={style:{"font-weight":"bold"}},N={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},X=x({__name:"CatalogView",setup(d){const n=h([]),a=h([]);s(()=>n.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const m=s(()=>Array.from(new Set(n.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),y=s(()=>n.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),l=s(()=>n.value.reduce((t,e)=>(t[e.id]=e,t),{}));return s(()=>a.value.map(t=>{var o,u;const e=l.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(o=e==null?void 0:e.entity)==null?void 0:o.artist,artwork_name:(u=e==null?void 0:e.entity)==null?void 0:u.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),S(async()=>{C(t=>{console.log("R",t),n.value=t}).catch(t=>{f(`Error fetching token metas: ${t}`)}),k(t=>{console.log("bids",t),a.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{f(`Error fetching bids: ${t}`)})}),(t,e)=>(i(),_("div",H,[r("div",I,[(i(!0),_(g,null,v(m.value,o=>(i(),_("div",{key:o,style:{margin:"24px 0px"}},[r("h1",J,p(o),1),r("div",N,[(i(!0),_(g,null,v(y.value[o],u=>(i(),w(q,{token_meta:u},null,8,["token_meta"]))),256))])]))),128))])]))}});export{X as default};
