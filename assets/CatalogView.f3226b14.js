import{a as $}from"./bid.aeea6277.js";import{i as V}from"./token-meta.2699ce9f.js";import{s as C}from"./util.35d81590.js";import{b as B}from"./thumbnail-image.3b60a05e.js";import{p as O}from"./types.b78a5cbd.js";import{r as v,p as E,d as x,J as M,m as T,h as d,i as a,u as g,g as N,t as w,e as R,b as j,o as l,_ as k,a as I,w as f,f as y,j as p,k as h,c,F as b,H as A}from"./index.7ef43f6e.js";import{_ as z,a as D,b as H,c as P}from"./search-icon.c7e2c65a.js";import"./firebaseConfig.4d01e9b5.js";function q(m="0px"){const r=v(!1),o=new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting&&(r.value=!0,o.disconnect())})},{rootMargin:m}),_=s=>{s&&o.observe(s)};return E(()=>{o.disconnect()}),{isIntersecting:r,observe:_}}const S={style:{display:"flex","border-radius":"18px","flex-grow":"1"}},U=["src"],F={style:{"font-weight":"bold","overflow-wrap":"break-word"}},G=x({__name:"CatalogArtTile",props:{token_meta:{}},setup(m){R();const r=j(),o=m,_=B(M(o,"token_meta")),{isIntersecting:s,observe:i}=q("600px"),t=v(null);return T(()=>{t.value&&i(t.value)}),(e,n)=>(l(),d("div",{class:"tile-container",style:{margin:"12px",width:"340px"},onClick:n[0]||(n[0]=u=>g(r).push({name:"actions",params:{token_meta_id:o.token_meta.id}}))},[a("div",{style:{display:"flex","flex-direction":"column",height:"100%"},ref_key:"tile",ref:t},[a("div",S,[g(s)?(l(),d("img",{key:0,src:g(_)},null,8,U)):N("",!0)]),a("h2",F,w(o.token_meta.entity.name),1),a("div",null,w(g(O)(o.token_meta)),1)],512)]))}});var W=k(G,[["__scopeId","data-v-3d731c18"]]);const J=x({__name:"CatalogHeader",setup(m){const r=i=>new URL({"../../assets/base.css":z,"../../assets/logo.png":D,"../../assets/logo.svg":H,"../../assets/search-icon.svg":P}[`../../assets/${i}`],self.location).href,o=()=>{window.open("https://moda-labs.xyz/","_blank")},_=()=>{window.open("https://www.instagram.com/projekt.______/","_blank")},s=()=>{window.location.href="https://labs.modadisplay.art/#/home/plaque-list"};return(i,t)=>{const e=y("el-image"),n=y("el-button"),u=y("el-divider"),L=y("el-header");return l(),I(L,null,{default:f(()=>[p(e,{src:r("logo.png"),style:{width:"60px",height:"60px","margin-right":"2em"}},null,8,["src"]),t[3]||(t[3]=a("h1",{style:{"font-weight":"bold"}},"MODA CATALOG",-1)),t[4]||(t[4]=a("div",{style:{"flex-grow":"1"}},null,-1)),p(n,{onClick:_},{default:f(()=>t[0]||(t[0]=[h("Projekt _______")])),_:1}),p(n,{onClick:o},{default:f(()=>t[1]||(t[1]=[h("MODA Plaque")])),_:1}),p(n,{color:"#000000",size:"large",onClick:s},{default:f(()=>t[2]||(t[2]=[h("LOGIN")])),_:1}),p(u,{style:{position:"absolute",bottom:"0px",left:"0px",right:"0px",margin:"0px"}})]),_:1})}}});var K=k(J,[["__scopeId","data-v-23d99fe9"]]);const Q={style:{"overflow-y":"auto",height:"100%"}},X={class:"container"},Y={style:{"font-weight":"bold","font-size":"2.8em",padding:"48px 0px 24px 0px"}},Z={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},tt=x({__name:"CatalogView",setup(m){const r=v([]),o=v([]);c(()=>r.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const _=c(()=>Array.from(new Set(r.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),s=c(()=>r.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),i=c(()=>r.value.reduce((t,e)=>(t[e.id]=e,t),{}));return c(()=>o.value.map(t=>{var n,u;const e=i.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(n=e==null?void 0:e.entity)==null?void 0:n.artist,artwork_name:(u=e==null?void 0:e.entity)==null?void 0:u.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),T(async()=>{V(t=>{console.log("R",t),r.value=t}).catch(t=>{C(`Error fetching token metas: ${t}`)}),$(t=>{console.log("bids",t),o.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{C(`Error fetching bids: ${t}`)})}),(t,e)=>(l(),d("div",Q,[p(K),a("div",X,[(l(!0),d(b,null,A(_.value,n=>(l(),d("div",{key:n,style:{margin:"20px 0px"}},[a("h1",Y,w(n),1),a("div",Z,[(l(!0),d(b,null,A(s.value[n],u=>(l(),I(W,{token_meta:u},null,8,["token_meta"]))),256))])]))),128))])]))}});var _t=k(tt,[["__scopeId","data-v-6a56df93"]]);export{_t as default};
