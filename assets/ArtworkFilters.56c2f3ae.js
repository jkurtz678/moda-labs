import{u as B}from"./gallery.c81b9f4b.js";import{T as y}from"./types.7e0350da.js";import{_ as L,d as O,r as b,B as f,O as U,c as S,b as m,o as h,e as V,w as i,i as t,j as q,f as A,h as N,K as T,F as D,p as M,m as P,k as g}from"./index.7bb34df8.js";const w=p=>(M("data-v-109662b3"),p=p(),P(),p),j=w(()=>g("div",{class:"caption"},"Filter by gallery",-1)),z=w(()=>g("div",{class:"caption"},"Filter by aspect ratio",-1)),E=w(()=>g("div",{class:"caption"},"Filter by platform",-1)),G=w(()=>g("div",{class:"caption"},"Sort order",-1)),K=O({__name:"ArtworkFilters",props:{all_tokens:null,search_filter:null,use_local_storage:{type:Boolean}},emits:["update-filtered-tokens"],setup(p,{emit:F}){const o=p,k=B(),_=b("");f(_,a=>{o.use_local_storage&&localStorage.setItem("artwork_grid_aspect_ratio_filter",a)});const n=b("");f(n,a=>{o.use_local_storage&&localStorage.setItem("artwork_grid_filter_by_gallery",a)});const c=b("");f(c,a=>{o.use_local_storage&&localStorage.setItem("artwork_grid_filter_by_platform",a)});const u=b("created_at");f(u,a=>{o.use_local_storage&&localStorage.setItem("artwork_grid_sort_order",a)}),U(()=>{o.use_local_storage&&(_.value=localStorage.getItem("artwork_grid_aspect_ratio_filter")||"",n.value=localStorage.getItem("artwork_grid_filter_by_gallery")||"",c.value=localStorage.getItem("artwork_grid_filter_by_platform")||"",u.value=localStorage.getItem("artwork_grid_sort_order")||"name")});const I=S(()=>_.value||n.value||c.value),C=S(()=>{if(!o.all_tokens)return[];let a=o.all_tokens.filter(e=>{var s,v,l;if(o.search_filter&&!((s=e.entity.artist)!=null&&s.toLowerCase().includes(o.search_filter.toLowerCase()))&&!((v=e.entity.name)!=null&&v.toLowerCase().includes(o.search_filter.toLowerCase()))||n.value&&!((l=k.gallery_list.find(d=>d.id==n.value))!=null&&l.entity.token_meta_id_list.includes(e.id)))return!1;switch(c.value){case"moda_archive":if(e.entity.platform!=y.Archive)return!1;break;case"opensea":if(e.entity.platform!=y.Opensea&&e.entity.platform!=y.OpenseaArchive)return!1;break;case"archive_demo":if(e.entity.platform!=y.ArchiveDemo)return!1;break}switch(_.value){case"portrait":if(!e.entity.aspect_ratio||e.entity.aspect_ratio>.9)return!1;break;case"landscape":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<1.1)return!1;break;case"square":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<.9||e.entity.aspect_ratio>1.1)return!1;break}return!0});return u.value==="name"?a=a.sort((e,s)=>e.entity.name.localeCompare(s.entity.name)):u.value==="created_at"&&(a=a.sort((e,s)=>e.entity.created_at==null&&s.entity.created_at==null?0:e.entity.created_at==null?1:s.entity.created_at==null?-1:s.entity.created_at.seconds-e.entity.created_at.seconds)),a});return f(C,a=>{F("update-filtered-tokens",a)},{immediate:!0}),(a,e)=>{const s=m("el-button"),v=m("el-badge"),l=m("el-option"),d=m("el-select"),x=m("el-popover");return h(),V(x,{placement:"bottom",title:"Artwork Filters",width:300,trigger:"click"},{reference:i(()=>[t(v,{"is-dot":"",hidden:!A(I)},{default:i(()=>[t(s,{icon:"Filter",style:{"margin-left":"10px"},type:"info",size:"small"},{default:i(()=>[q("Filters")]),_:1})]),_:1},8,["hidden"])]),default:i(()=>[j,t(d,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),placeholder:"Filter by gallery",class:"filter-select"},{default:i(()=>[t(l,{label:"All artwork",value:""}),(h(!0),N(D,null,T(A(k).gallery_list,r=>(h(),V(l,{key:r.id,label:`${r.entity.name}`,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),z,t(d,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=r=>_.value=r),class:"filter-select"},{default:i(()=>[t(l,{label:"All",value:""}),t(l,{label:"Landscape",value:"landscape"}),t(l,{label:"Portrait",value:"portrait"}),t(l,{label:"Square",value:"square"})]),_:1},8,["modelValue"]),E,t(d,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),class:"filter-select"},{default:i(()=>[t(l,{label:"All",value:""}),t(l,{label:"Moda Archive",value:"moda_archive"}),t(l,{label:"Opensea",value:"opensea"}),t(l,{label:"Demo",value:"archive_demo"})]),_:1},8,["modelValue"]),G,t(d,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=r=>u.value=r),placeholder:"Sort by",class:"filter-select"},{default:i(()=>[t(l,{label:"Sort by name",value:"name"}),t(l,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"])]),_:1})}}});var Q=L(K,[["__scopeId","data-v-109662b3"]]);export{Q as A};
