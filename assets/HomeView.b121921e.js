import{d as $,u as D,a as N,c as B,r as i,o as l,b as y,e as s,f as q,g as V,F as E,h as n,w as u,t as S,i as T,j as L,_ as z,k as H,l as U,E as F,R as G}from"./index.88ec2767.js";import{u as M,s as _}from"./account.011f6697.js";import{u as I,a as K}from"./token-meta.854acc26.js";import{u as O,a as j}from"./plaque.092523b4.js";import{u as W}from"./plaque.97b14230.js";import"./token-meta.25680619.js";var J=`@import"https://fonts.googleapis.com/css2?family=K2D&display=swap";:root{--vt-c-white: #ffffff;--vt-c-white-soft: #f8f8f8;--vt-c-white-mute: #f2f2f2;--vt-c-black: #181818;--vt-c-black-soft: #222222;--vt-c-black-mute: #282828;--vt-c-indigo: #2c3e50;--vt-c-divider-light-1: rgba(60, 60, 60, .29);--vt-c-divider-light-2: rgba(60, 60, 60, .12);--vt-c-divider-dark-1: rgba(84, 84, 84, .65);--vt-c-divider-dark-2: rgba(84, 84, 84, .48);--vt-c-text-light-1: var(--vt-c-indigo);--vt-c-text-light-2: rgba(60, 60, 60, .66);--vt-c-text-dark-1: var(--vt-c-white);--vt-c-text-dark-2: rgba(235, 235, 235, .64)}:root{--color-background: var(--vt-c-white);--color-background-soft: var(--vt-c-white-soft);--color-background-mute: var(--vt-c-white-mute);--color-border: var(--vt-c-divider-light-2);--color-border-hover: var(--vt-c-divider-light-1);--color-heading: var(--vt-c-text-light-1);--color-text: var(--vt-c-text-light-1);--section-gap: 160px}*,*:before,*:after{box-sizing:border-box;margin:0;position:relative;font-weight:400}html{height:100%}body{min-height:100vh;color:var(--color-text);background:var(--color-background);transition:color .5s,background-color .5s;line-height:1.6;font-family:K2D,sans-serif;font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}hr{border:.1px solid lightgray}
`,Q="/assets/logo.61e654f6.png",X="/assets/logo.da9b9095.svg",Y="/assets/search-icon.38a117a4.svg";const Z={style:{display:"flex","align-items":"center"}},ee=T("div",{style:{"flex-grow":"1"}},null,-1),te=L(" Cancel "),oe=T("div",{style:{"flex-grow":"1"}},null,-1),ae={key:0,style:{"margin-right":"10px"}},se=L("Logout"),ne=$({__name:"Header",setup(P){const o=D(),g=N(),c=M(),{width:C,screen_type:v}=I(),h=(e,t)=>{e.paneName&&typeof e.paneName=="string"&&o.push({name:e.paneName})},w=B(()=>{const e=c.account;if(!e)return"";if(e.entity.ens_name)return e.entity.ens_name;const t=e.entity.wallet_address;return`${t.substring(0,6)}...${t.substring(t.length-4)}`}),m=()=>{c.logout(),o.push({name:"landing",query:{redir:window.location.href}})},d=e=>new URL({"../assets/base.css":J,"../assets/logo.png":Q,"../assets/logo.svg":X,"../assets/search-icon.svg":Y}[`../assets/${e}`],self.location).href;return(e,t)=>{const p=i("el-image"),f=i("el-button"),r=i("el-tab-pane"),x=i("el-tabs");return l(),y("div",Z,[s(v)!="xs"?(l(),q(p,{key:0,src:d("logo.png"),style:{width:"43px",height:"43px","margin-right":"2em"}},null,8,["src"])):V("",!0),s(o).currentRoute.value.name=="qr-scan"?(l(),y(E,{key:1},[ee,n(f,{icon:"close",onClick:t[0]||(t[0]=b=>s(o).push("plaque-list"))},{default:u(()=>[te]),_:1})],64)):(l(),y(E,{key:2},[n(x,{modelValue:s(g).name,"onUpdate:modelValue":t[1]||(t[1]=b=>s(g).name=b),onTabClick:h},{default:u(()=>[n(r,{label:"Plaques",name:"plaque-list"}),n(r,{label:"Tokens",name:"token-list"})]),_:1},8,["modelValue"]),oe,s(v)!="xs"?(l(),y("div",ae,S(s(w)),1)):V("",!0),n(f,{onClick:m,style:{"margin-left":"1em"}},{default:u(()=>[se]),_:1})],64))])}}});const re=$({__name:"HomeView",setup(P){const o=M(),g=O(),c=K(),C=j(),v=D(),h=H(!1),w=N();return U(async()=>{const m=F.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),{wallet_address:d,signature:e,ens_name:t}=o.getCachedAccountData();if(!d||!e){v.push({name:"landing",query:{redir:window.location.href}}),m.close();return}const p=o.loadAccount(d,e,t),f=C.loadGalleryList(d);if(await Promise.all([p,f]),o.account==null){_("Error - failed to load account");return}const r=o.get_account.entity.wallet_address,x=g.loadPlaques(r).catch(a=>_(`Error loading plaques - ${a}`)),b=c.loadArchiveTokenMetas(r).catch(a=>_(`Error loading archive token metas - ${a}`)),R=c.loadOpenseaMintedTokenMetas(r).catch(a=>_(`Error loading opensea minted tokens - ${a}`)),A=c.loadOpenseaWalletTokenMetas(r).catch(a=>_(`Error loading opensea wallet tokens - ${a}`));await Promise.all([x,b,R]),await A;const k=w.query.plaque_id;k&&typeof k=="string"&&!g.plaque_map[k]&&await W(k,{wallet_address:o.get_account.entity.wallet_address,token_meta_id_list:[]}).catch(a=>{_(`Error adding plaque from query param = ${a}`)}),h.value=!0,m.close()}),(m,d)=>{const e=i("el-header"),t=i("el-main"),p=i("el-container");return l(),q(p,{style:{height:"100%"}},{default:u(()=>[n(e,{class:"header"},{default:u(()=>[n(ne)]),_:1}),n(t,{style:{"background-color":"#DAD9D7"}},{default:u(()=>[h.value?(l(),q(s(G),{key:0})):V("",!0)]),_:1})]),_:1})}}});var ge=z(re,[["__scopeId","data-v-3d5f7fc6"]]);export{ge as default};
