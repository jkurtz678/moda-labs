import{d as V,s as $,t as C,r as c,c as d,v as g,y as t,z as G,A as H,C as J,F as b,f as a,h as u,G as S,_ as D,H as j,w as s,I as P,J as E,e as I,K,L,M,N as k,O as B,P as F,b as T,a as O,u as W,Q as R}from"./index.5244cc5b.js";import{u as U}from"./plaque.bacdb76a.js";import{u as N,c as X}from"./plaque.f6de3f0d.js";import{u as Q}from"./token-meta.9035f5c7.js";import{_ as Y}from"./PlaqueTokenItem.15e3034f.js";import"./token-meta.130e00c9.js";const Z=t("hr",{class:"hr"},null,-1),ee={class:"card-flex-container"},te={style:{flex:"1",width:"70px"}},oe=["src"],se={style:{flex:"3 1 0%"}},ae={class:"bold"},ne={class:"bold"},le=V({props:{token:null,plaque_id:null},setup(n){const o=n,i=$(!1),y=C(()=>!!r.value.entity.token_meta_id_list.find(l=>l==o.token.id)),r=C(()=>q.plaque_map[o.plaque_id]),q=U(),h=async()=>{if(i.value=!0,y.value){const l=r.value.entity.token_meta_id_list.filter(_=>_!=o.token.id);await N(o.plaque_id,{token_meta_id_list:l})}else{const l=[...r.value.entity.token_meta_id_list];l.push(o.token.id),await N(o.plaque_id,{token_meta_id_list:l})}i.value=!1},v=l=>new URL({"../assets/base.css":G,"../assets/logo.png":H,"../assets/logo.svg":J}[`../assets/${l}`],self.location).href;return(l,_)=>{const e=c("el-button");return d(),g(S,null,[Z,t("div",ee,[t("div",te,[t("img",{src:v("logo.png"),style:{width:"70px"}},null,8,oe)]),t("div",se,[t("p",ae,b(o.token.entity.name),1),t("p",ne,b(o.token.entity.artist),1)]),a(e,{icon:u(y)?"close":"plus",type:u(y)?"danger":"success",plain:"",circle:"",onClick:h,loading:i.value},null,8,["icon","type","loading"])])],64)}}});const de=n=>(L("data-v-65d3984c"),n=n(),M(),n),_e={class:"dialog-container"},ie={key:0},ue=de(()=>t("hr",{class:"hr"},null,-1)),re={class:"dialog-footer"},ce=k("Clear"),pe=k("Done"),me=V({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(n,{emit:o}){const i=n;$(!1);const{width:y,screen_type:r}=j(),q=U(),h=Q(),v=C({get(){return i.show_add_token_dialog},set(e){o("update:show_add_token_dialog",e)}}),l=C(()=>h.archive_token_meta_list),_=C(()=>{const e=[];if(l!=null&&l.value)for(let p of l==null?void 0:l.value)q.meta_in_playlist(i.plaque_id,p.id)?e.unshift(p):e.push(p);return e});return(e,p)=>{const w=c("el-card"),x=c("el-button"),A=c("el-dialog");return d(),g("div",_e,[a(A,{class:"box-dialog",center:"",modelValue:u(v),"onUpdate:modelValue":p[0]||(p[0]=m=>K(v)?v.value=m:null),title:"Add tokens to plaque","close-on-click-modal":"false",fullscreen:u(r)=="xs","custom-class":"add-dialog"},{footer:s(()=>[t("span",re,[a(x,null,{default:s(()=>[ce]),_:1}),a(x,{type:"info"},{default:s(()=>[pe]),_:1})])]),default:s(()=>[a(w,{class:"box-card",shadow:"never"},{default:s(()=>[u(_).length==0?(d(),g("div",ie,"No tokens found")):P("",!0),(d(!0),g(S,null,E(u(_),m=>(d(),I(le,{plaque_id:n.plaque_id,token:m},null,8,["plaque_id","token"]))),256)),ue]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var fe=D(me,[["__scopeId","data-v-65d3984c"]]);const z=n=>(L("data-v-ccfada7c"),n=n(),M(),n),ge=z(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),ye=k("online"),he={key:0},ve={style:{padding:"0 1em"}},ke={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},qe=k("Settings"),we=k("Add Artwork"),xe=z(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),$e=z(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),be={style:{padding:"1em"}},Ce={key:0,class:"card-detail"},Pe={key:0,style:{padding:"1em"}},Ae={style:{display:"flex",padding:"1em"}},Te=k("Clear Tokens"),Se=z(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Ie=k("Forget Display"),Ne=V({props:{plaque:null},setup(n){const o=n,i=$(!1),y=$(!1),r=Q(),q=C(()=>h.value.length==0?null:h.value[0]),h=C(()=>{const _=r.token_meta_map;return o.plaque.entity.token_meta_id_list.map(p=>_[p])});$("0"),$(!0);const v=()=>{F.confirm(`Are you sure you want to clear tokens for plaque '${o.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{N(o.plaque.id,{token_meta_id_list:[]}).then(()=>{T({type:"success",message:"Tokens cleared"})}).catch(_=>{T({message:`Error clearing tokens from plaque - ${_}`,type:"error",showClose:!0,duration:12e3})})})},l=()=>{F.confirm(`Are you sure you want to forget the plaque named '${o.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{N(o.plaque.id,{wallet_address:""}).then(()=>{T({type:"success",message:"Plaque forgotten"})}).catch(_=>{T({message:`Error forgetting plaque - ${_}`,type:"error",showClose:!0,duration:12e3})})})};return(_,e)=>{const p=c("el-tag"),w=c("el-button"),x=c("el-col"),A=c("el-row"),m=c("el-card");return d(),I(m,null,{header:s(()=>[t("div",{style:{display:"flex","align-items":"center",padding:"1em"},onClick:e[0]||(e[0]=f=>i.value=!i.value)},[t("h1",null,b(o.plaque.entity.name),1),ge,a(p,{class:"ml-2",type:"success"},{default:s(()=>[ye]),_:1})]),a(B,{name:"el-fade-in-linear"},{default:s(()=>[i.value?(d(),g("section",he,[t("p",ve,b(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1),t("div",ke,[a(w,null,{default:s(()=>[qe]),_:1}),a(w,{type:"info",onClick:e[1]||(e[1]=f=>y.value=!0)},{default:s(()=>[we]),_:1})])])):P("",!0)]),_:1})]),default:s(()=>[a(B,{name:"el-fade-in-linear"},{default:s(()=>[i.value?P("",!0):(d(),g("section",{key:0,class:"card-simple",onClick:e[2]||(e[2]=f=>i.value=!0)},[a(A,{style:{"margin-bottom":"8px",padding:"1em"}},{default:s(()=>[a(x,{span:12},{default:s(()=>{var f;return[xe,t("span",null,b(((f=u(q))==null?void 0:f.entity.name)||"N/A"),1)]}),_:1}),a(x,{span:12},{default:s(()=>{var f;return[$e,k(" "+b(((f=u(q))==null?void 0:f.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),t("div",be,b(`Total artworks: ${n.plaque.entity.token_meta_id_list.length}`),1)]))]),_:1}),a(B,{name:"el-fade-in-linear"},{default:s(()=>[i.value?(d(),g("section",Ce,[u(h).length==0?(d(),g("div",Pe,"No tokens added")):P("",!0),(d(!0),g(S,null,E(u(h),f=>(d(),I(Y,{token_meta:f},null,8,["token_meta"]))),256)),t("div",Ae,[a(w,{onClick:v},{default:s(()=>[Te]),_:1}),Se,a(w,{type:"danger",plain:"",onClick:l},{default:s(()=>[Ie]),_:1})])])):P("",!0)]),_:1}),a(fe,{plaque_id:o.plaque.id,show_add_token_dialog:y.value,"onUpdate:show_add_token_dialog":e[3]||(e[3]=f=>y.value=f)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var Ve=D(Ne,[["__scopeId","data-v-ccfada7c"]]);const ze=n=>(L("data-v-ade8bed6"),n=n(),M(),n),Be={key:0,style:{padding:"1em"}},De={class:"add-button-container"},Ee={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},Le=ze(()=>t("div",{style:{"font-size":"17px"}},"Add plaque",-1)),Me={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},Ue=k("Scan Plaque QR Code"),Fe=k("Add test plaque "),Re=V({setup(n){const o=$(!1),{width:i,screen_type:y}=j(),r=$(!1),q=O(),h=W(),v=U(),l=async()=>{o.value=!0,await X({name:"Test Plaque",wallet_address:h.get_account.entity.wallet_address,token_meta_id_list:[],created_at:R.now(),updated_at:R.now()}).catch(_=>T({message:`Error creating test plaque- ${_}`,type:"error",showClose:!0,duration:12e3})),o.value=!1,r.value=!1};return(_,e)=>{const p=c("Plus"),w=c("el-icon"),x=c("el-button"),A=c("el-dialog");return d(),g(S,null,[u(v).plaques.length==0?(d(),g("div",Be,"No plaques connected")):P("",!0),(d(!0),g(S,null,E(u(v).plaques,m=>(d(),I(Ve,{plaque:m,key:m.id},null,8,["plaque"]))),128)),t("div",De,[t("div",Ee,[t("div",{class:"add-button",onClick:e[0]||(e[0]=m=>r.value=!0)},[a(w,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:s(()=>[a(p)]),_:1}),Le])])]),a(A,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=m=>r.value=m),title:"Add plaque",width:u(y)=="xs"?"90%":"50%"},{default:s(()=>[t("div",Me,[a(x,{onClick:e[1]||(e[1]=m=>{u(q).push("qr-scan"),r.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:s(()=>[Ue]),_:1}),a(x,{icon:"plus",onClick:l,loading:o.value,style:{margin:"10px 0px 10px 0px"}},{default:s(()=>[Fe]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var Oe=D(Re,[["__scopeId","data-v-ade8bed6"]]);export{Oe as default};
