import{a as w}from"./bid.de4d7d96.js";import{i as f}from"./token-meta.094c1d66.js";import{s as p}from"./util.c5e5eb8b.js";import{d as g,r as u,c as i,q as v,h as b,l as _,t as c,i as r,w as d,f as h,o as k}from"./index.22cc418a.js";import"./firebaseConfig.4d01e9b5.js";import"./types.67d14e22.js";const A={class:"container"},C={style:{"padding-top":"20px"}},S=g({__name:"CatalogView",setup(N){const o=u([]),l=u([]),s=i(()=>o.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist))),y=i(()=>o.value.reduce((t,e)=>(t[e.id]=e,t),{})),m=i(()=>l.value.map(t=>{var a,n;const e=y.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(a=e==null?void 0:e.entity)==null?void 0:a.artist,artwork_name:(n=e==null?void 0:e.entity)==null?void 0:n.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name)));return v(async()=>{f(t=>{console.log("R",t),o.value=t}).catch(t=>{p(`Error fetching token metas: ${t}`)}),w(t=>{console.log("bids",t),l.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{p(`Error fetching bids: ${t}`)})}),(t,e)=>{const a=h("el-table-column"),n=h("el-table");return k(),b("div",A,[_("h2",null,c(`Artwork On Sale (${s.value.length} total)`),1),r(n,{height:"350",data:s.value,style:{width:"100%","overflow-y":"auto"}},{default:d(()=>[r(a,{prop:"artist",label:"Artist"}),r(a,{prop:"name",label:"Name"}),r(a,{prop:"price",label:"Price",width:"100"}),r(a,{prop:"price_unit",label:"Price Unit",width:"100"})]),_:1},8,["data"]),_("h2",C,c(`All Bids (${m.value.length} total)`),1),r(n,{height:"350",data:m.value,style:{width:"100%","overflow-y":"auto"}},{default:d(()=>[r(a,{prop:"bidding_name",label:"Name"}),r(a,{prop:"email",label:"Email"}),r(a,{prop:"phone_number",label:"Phone Number"}),r(a,{prop:"amount",label:"Amount"}),r(a,{prop:"amount_unit",label:"Unit"}),r(a,{prop:"artist_name",label:"Artist Name"}),r(a,{prop:"artwork_name",label:"Artwork Name"})]),_:1},8,["data"])])}}});export{S as default};
