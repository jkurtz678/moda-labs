import{a as k}from"./bid.3628f065.js";import{i as C}from"./token-meta.3b6b8610.js";import{s as h}from"./util.dc35e505.js";import{a as $}from"./thumbnail-image.61bf9ee3.js";import{p as B}from"./types.903c99bc.js";import{d as w,L as A,a as x,w as E,u as p,e as L,b as R,f as M,o,l as a,t as c,r as f,c as s,q as S,h as m,F as g,J as v}from"./index.dfe82d38.js";import"./firebaseConfig.4d01e9b5.js";const T={style:{display:"flex","justify-content":"center","background-color":"#eeeeee"}},V=["src"],q={style:{"font-weight":"bold"}},D=w({__name:"CatalogArtTile",props:{token_meta:{}},setup(d){L();const r=R(),n=d,_=$(A(n,"token_meta"));return(y,l)=>{const t=M("el-card");return o(),x(t,{style:{margin:"12px",width:"340px"},onClick:l[0]||(l[0]=e=>p(r).push({name:"qr-landing",params:{token_meta_id:n.token_meta.id}}))},{default:E(()=>[a("div",T,[a("img",{src:p(_),style:{"max-width":"100%","min-width":"140px","max-height":"240px"}},null,8,V)]),a("h2",q,c(n.token_meta.entity.name),1),a("div",null,c(p(B)(n.token_meta)),1)]),_:1})}}});const F={style:{"overflow-y":"auto",height:"100%"}},W={class:"container"},j={style:{display:"flex",margin:"-12px","flex-wrap":"wrap"}},K=w({__name:"CatalogView",setup(d){const r=f([]),n=f([]);s(()=>r.value.map(t=>({name:t.entity.name,artist:t.entity.artist,price:t.entity.price,price_unit:t.entity.price_unit})).sort((t,e)=>!(t!=null&&t.artist)||!(e!=null&&e.artist)?0:t.artist.localeCompare(e.artist)));const _=s(()=>Array.from(new Set(r.value.map(t=>t.entity.artist||""))).sort((t,e)=>t.localeCompare(e))),y=s(()=>r.value.reduce((t,e)=>(e.entity.artist&&(t[e.entity.artist]||(t[e.entity.artist]=[]),t[e.entity.artist].push(e)),t),{})),l=s(()=>r.value.reduce((t,e)=>(t[e.id]=e,t),{}));return s(()=>n.value.map(t=>{var i,u;const e=l.value[t.entity.token_meta_id];return{bidding_name:t.entity.bidding_name,email:t.entity.email,phone_number:t.entity.phone_number,amount:t.entity.amount,amount_unit:t.entity.amount_unit,artist_name:(i=e==null?void 0:e.entity)==null?void 0:i.artist,artwork_name:(u=e==null?void 0:e.entity)==null?void 0:u.name}}).sort((t,e)=>!(t!=null&&t.artwork_name)||!(e!=null&&e.artwork_name)?0:t.artwork_name.localeCompare(e.artwork_name))),S(async()=>{C(t=>{console.log("R",t),r.value=t}).catch(t=>{h(`Error fetching token metas: ${t}`)}),k(t=>{console.log("bids",t),n.value=t.filter(e=>!!e.entity.amount&&e.entity.amount>=0)}).catch(t=>{h(`Error fetching bids: ${t}`)})}),(t,e)=>(o(),m("div",F,[a("div",W,[(o(!0),m(g,null,v(_.value,i=>(o(),m("div",{key:i,style:{margin:"24px 0px"}},[a("h1",null,c(i),1),a("div",j,[(o(!0),m(g,null,v(y.value[i],u=>(o(),x(D,{token_meta:u},null,8,["token_meta"]))),256))])]))),128))])]))}});export{K as default};
