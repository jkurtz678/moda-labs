import{d as D,P as N,Q as O,r as T,o as y,h,F as L,I as j,M as E,f as c,S as P,j as q,t as z,T as H,U as Q,m as Y,z as J,_ as G,L as K,c as $,k as R,i as F,w as X,p as Z,l as ee}from"./index.3c36261e.js";import{u as te}from"./thumbnail-image.c6bb1629.js";import{c as ne}from"./types.6a5ef88e.js";import{u as oe}from"./token-meta.1accfa49.js";import"./firebaseConfig.d7a6b5a9.js";import"./token-meta.2d60a689.js";import"./account.e314efb3.js";import"./util.81c9392d.js";const ae={columnWidth:400,gap:0,keyMapper:(n,r,m,s)=>s,minColumns:1,maxColumns:void 0,rtl:!1,scrollContainer:null,ssrColumns:0};function re({columns:n,columnWidth:r,emit:m,gap:s,items:i,maxColumns:d,minColumns:v,nextTick:g,onBeforeUnmount:l,onMounted:a,rtl:o,scrollContainer:_,ssrColumns:w,vue:B,wall:k,watch:M}){function I(t,e,u,x){const C=S(u);return x+e+C<=t?I(t,e,u+1,x+e+C):u}function S(t){const e=Array.isArray(r.value)?r.value:[r.value];return e[t%e.length]}function p(){const t=I(k.value.getBoundingClientRect().width,s.value,0,-s.value),e=b(f(t));return e>0?e:1}function f(t){const e=d==null?void 0:d.value;return e&&t>e?e:t}function b(t){const e=v==null?void 0:v.value;return e&&t<e?e:t}function U(t){return[...new Array(t)].map(()=>[])}if(w.value>0){const t=U(w.value);i.value.forEach((e,u)=>t[u%w.value].push(u)),n.value=t}async function V(t){if(t>=i.value.length)return;await g();const e=[...k.value.children];o.value&&e.reverse();const u=e.reduce((x,C)=>C.getBoundingClientRect().height<x.getBoundingClientRect().height?C:x);n.value[+u.dataset.index].push(t),await V(t+1)}async function A(t=!1){if(n.value.length===p()&&!t){m(B===2?"redraw-skip":"redrawSkip");return}n.value=U(p());const e=_==null?void 0:_.value,u=e?e.scrollTop:window.scrollY;await V(0),e?e.scrollBy({top:u-e.scrollTop}):window.scrollTo({top:u}),m("redraw")}const W=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>A());return a(()=>{A(),W==null||W.observe(k.value)}),l(()=>W==null?void 0:W.unobserve(k.value)),M([i,o],()=>A(!0)),M([r,s,v,d],()=>A()),{getColumnWidthTarget:S}}const se=["data-index"],le=D({__name:"masonry-wall",props:N({columnWidth:{},items:{},gap:{},rtl:{type:Boolean},ssrColumns:{},scrollContainer:{},minColumns:{},maxColumns:{},keyMapper:{type:Function}},ae),emits:["redraw","redrawSkip"],setup(n,{emit:r}){const m=n,{columnWidth:s,items:i,gap:d,rtl:v,ssrColumns:g,scrollContainer:l,minColumns:a,maxColumns:o,keyMapper:_}=O(m),w=T([]),B=T(),{getColumnWidthTarget:k}=re({columns:w,columnWidth:s,emit:r,gap:d,items:i,keyMapper:_,maxColumns:o,minColumns:a,nextTick:H,onBeforeUnmount:Q,onMounted:Y,rtl:v,scrollContainer:l,ssrColumns:g,vue:3,wall:B,watch:J});return(M,I)=>(y(),h("div",{ref_key:"wall",ref:B,class:"masonry-wall",style:E({display:"flex",gap:`${c(d)}px`})},[(y(!0),h(L,null,j(w.value,(S,p)=>(y(),h("div",{key:p,class:"masonry-column","data-index":p,style:E({display:"flex","flex-basis":`${c(k)(p)}px`,"flex-direction":"column","flex-grow":1,gap:`${c(d)}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(y(!0),h(L,null,j(S,(f,b)=>(y(),h("div",{key:c(_)(c(i)[f],p,b,f),class:"masonry-item"},[P(M.$slots,"default",{item:c(i)[f],column:p,row:b,index:f},()=>[q(z(c(i)[f]),1)])]))),128))],12,se))),128))],4))}}),ie=(()=>{const n=le;return n.install=r=>{r.component("MasonryWall",n)},n})();const ue={class:"custom-card"},ce={class:"header"},me=["src"],de={class:"platform"},_e=D({__name:"ArtworkTile",props:{token_meta:null},setup(n){const r=n,m=te(K(r,"token_meta")),s=$(()=>ne(r.token_meta.entity.platform));return(i,d)=>(y(),h("div",ue,[R("div",ce,z(`${n.token_meta.entity.name} | ${n.token_meta.entity.artist}`),1),R("img",{src:c(m)},null,8,me),R("div",de,z(c(s)),1)]))}});var pe=G(_e,[["__scopeId","data-v-2e01671a"]]);const ve=n=>(Z("data-v-6b271122"),n=n(),ee(),n),fe=ve(()=>R("div",{class:"tile-grid"},null,-1)),ye=D({__name:"ArtworkTileGrid",setup(n){const r=oe(),m=T(""),s=T(localStorage.getItem("token_list_sort_order")||"name"),i=T(1e3),d=$(()=>r.sorted_all_token_metas),v=$(()=>{let l=d.value.filter(a=>{var o,_;return((o=a.entity.artist)==null?void 0:o.toLowerCase().includes(m.value.toLowerCase()))||((_=a.entity.name)==null?void 0:_.toLowerCase().includes(m.value.toLowerCase()))});return s.value==="name"?l=l.sort((a,o)=>a.entity.name.localeCompare(o.entity.name)):s.value==="created_at"&&(l=l.sort((a,o)=>a.entity.created_at==null&&o.entity.created_at==null?0:a.entity.created_at==null?1:o.entity.created_at==null?-1:o.entity.created_at.seconds-a.entity.created_at.seconds)),l}),g=$(()=>{const l=v.value,a=0,o=a+i.value;return l.slice(a,o)});return(l,a)=>(y(),h(L,null,[F(c(ie),{items:c(g),"column-width":220,gap:16},{default:X(({item:o})=>[F(pe,{token_meta:o},null,8,["token_meta"])]),_:1},8,["items"]),fe],64))}});var Me=G(ye,[["__scopeId","data-v-6b271122"]]);export{Me as default};
