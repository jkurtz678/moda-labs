import{d as E,P as H,Q as K,r as C,o as h,h as x,F as U,I as F,M as N,f as u,S as Q,j as P,t as D,T as Y,U as J,m as O,z as X,_ as q,L as Z,c as z,k as b,i as f,w as L,u as ee,b as R,K as te,p as ne,l as oe}from"./index.d26bedf4.js";import{u as ae}from"./thumbnail-image.e9cf44cc.js";import{c as le}from"./types.6a5ef88e.js";import{u as re}from"./token-meta.898bdc22.js";import"./firebaseConfig.d7a6b5a9.js";import"./token-meta.2d60a689.js";import"./account.e417e350.js";import"./util.9fa7cf7f.js";const se={columnWidth:400,gap:0,keyMapper:(o,l,p,r)=>r,minColumns:1,maxColumns:void 0,rtl:!1,scrollContainer:null,ssrColumns:0};function ie({columns:o,columnWidth:l,emit:p,gap:r,items:c,maxColumns:i,minColumns:w,nextTick:T,onBeforeUnmount:S,onMounted:B,rtl:s,scrollContainer:t,ssrColumns:a,vue:m,wall:v,watch:g}){function M(n,e,_,V){const A=d(_);return V+e+A<=n?M(n,e,_+1,V+e+A):_}function d(n){const e=Array.isArray(l.value)?l.value:[l.value];return e[n%e.length]}function y(){const n=M(v.value.getBoundingClientRect().width,r.value,0,-r.value),e=$(k(n));return e>0?e:1}function k(n){const e=i==null?void 0:i.value;return e&&n>e?e:n}function $(n){const e=w==null?void 0:w.value;return e&&n<e?e:n}function G(n){return[...new Array(n)].map(()=>[])}if(a.value>0){const n=G(a.value);c.value.forEach((e,_)=>n[_%a.value].push(_)),o.value=n}async function j(n){if(n>=c.value.length)return;await T();const e=[...v.value.children];s.value&&e.reverse();const _=e.reduce((V,A)=>A.getBoundingClientRect().height<V.getBoundingClientRect().height?A:V);o.value[+_.dataset.index].push(n),await j(n+1)}async function W(n=!1){if(o.value.length===y()&&!n){p(m===2?"redraw-skip":"redrawSkip");return}o.value=G(y());const e=t==null?void 0:t.value,_=e?e.scrollTop:window.scrollY;await j(0),e?e.scrollBy({top:_-e.scrollTop}):window.scrollTo({top:_}),p("redraw")}const I=typeof ResizeObserver>"u"?void 0:new ResizeObserver(()=>W());return B(()=>{W(),I==null||I.observe(v.value)}),S(()=>I==null?void 0:I.unobserve(v.value)),g([c,s],()=>W(!0)),g([l,r,w,i],()=>W()),{getColumnWidthTarget:d}}const ue=["data-index"],ce=E({__name:"masonry-wall",props:H({columnWidth:{},items:{},gap:{},rtl:{type:Boolean},ssrColumns:{},scrollContainer:{},minColumns:{},maxColumns:{},keyMapper:{type:Function}},se),emits:["redraw","redrawSkip"],setup(o,{emit:l}){const p=o,{columnWidth:r,items:c,gap:i,rtl:w,ssrColumns:T,scrollContainer:S,minColumns:B,maxColumns:s,keyMapper:t}=K(p),a=C([]),m=C(),{getColumnWidthTarget:v}=ie({columns:a,columnWidth:r,emit:l,gap:i,items:c,keyMapper:t,maxColumns:s,minColumns:B,nextTick:Y,onBeforeUnmount:J,onMounted:O,rtl:w,scrollContainer:S,ssrColumns:T,vue:3,wall:m,watch:X});return(g,M)=>(h(),x("div",{ref_key:"wall",ref:m,class:"masonry-wall",style:N({display:"flex",gap:`${u(i)}px`})},[(h(!0),x(U,null,F(a.value,(d,y)=>(h(),x("div",{key:y,class:"masonry-column","data-index":y,style:N({display:"flex","flex-basis":`${u(v)(y)}px`,"flex-direction":"column","flex-grow":1,gap:`${u(i)}px`,height:["-webkit-max-content","-moz-max-content","max-content"],"min-width":0})},[(h(!0),x(U,null,F(d,(k,$)=>(h(),x("div",{key:u(t)(u(c)[k],y,$,k),class:"masonry-item"},[Q(g.$slots,"default",{item:u(c)[k],column:y,row:$,index:k},()=>[P(D(u(c)[k]),1)])]))),128))],12,ue))),128))],4))}}),me=(()=>{const o=ce;return o.install=l=>{l.component("MasonryWall",o)},o})();const de={class:"custom-card"},_e={class:"header"},pe=["src"],ve={class:"platform"},ye=E({__name:"ArtworkTile",props:{token_meta:null},setup(o){const l=o,p=ae(Z(l,"token_meta")),r=z(()=>le(l.token_meta.entity.platform));return(c,i)=>(h(),x("div",de,[b("div",_e,D(`${o.token_meta.entity.name} | ${o.token_meta.entity.artist}`),1),b("img",{src:u(p)},null,8,pe),b("div",ve,D(u(r)),1)]))}});var fe=q(ye,[["__scopeId","data-v-2e01671a"]]);const we=o=>(ne("data-v-0bc377b9"),o=o(),oe(),o),ke={class:"subheader",style:{display:"flex","align-items":"center"}},he=we(()=>b("div",{style:{"padding-bottom":"40px"}},null,-1)),xe=E({__name:"ArtworkTileGrid",setup(o){const l=ee(),p=re(),r=C(""),c=C(null),i=C(localStorage.getItem("token_list_sort_order")||"name"),w=C(1e3),T=z(()=>p.sorted_all_token_metas),S=z(()=>{let s=T.value.filter(t=>{var a,m;return((a=t.entity.artist)==null?void 0:a.toLowerCase().includes(r.value.toLowerCase()))||((m=t.entity.name)==null?void 0:m.toLowerCase().includes(r.value.toLowerCase()))});return i.value==="name"?s=s.sort((t,a)=>t.entity.name.localeCompare(a.entity.name)):i.value==="created_at"&&(s=s.sort((t,a)=>t.entity.created_at==null&&a.entity.created_at==null?0:t.entity.created_at==null?1:a.entity.created_at==null?-1:a.entity.created_at.seconds-t.entity.created_at.seconds)),s}),B=z(()=>{const s=S.value,t=0,a=t+w.value;return s.slice(t,a)});return O(()=>{if(!document.getElementById("masonry-container")){console.log("ArtworkTileGrid error, masonary_wall element not found");return}}),(s,t)=>{const a=R("el-input"),m=R("el-option"),v=R("el-select"),g=R("el-button"),M=R("RouterView");return h(),x(U,null,[b("div",ke,[f(a,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d),"prefix-icon":u(te),placeholder:"Search artwork or artist",style:{"max-width":"350px"},clearable:""},null,8,["modelValue","prefix-icon"]),f(v,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=d=>i.value=d),placeholder:"Sort by",style:{"margin-left":"10px"}},{default:L(()=>[f(m,{label:"Sort by name",value:"name"}),f(m,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"]),f(g,{icon:"Plus",onClick:t[2]||(t[2]=d=>u(l).push({name:"new-artwork"})),color:"#000000",style:{"margin-left":"10px"},size:"small"},{default:L(()=>[P("Artwork")]),_:1})]),he,b("div",{id:"masonry-container",ref_key:"masonryContainer",ref:c,style:{"overflow-y":"auto",height:"100%",padding:"10px",margin:"-10px"}},[f(u(me),{id:"masonary-wall","scroll-container":c.value,items:u(B),"column-width":220,gap:16},{default:L(({item:d})=>[f(fe,{token_meta:d},null,8,["token_meta"])]),_:1},8,["scroll-container","items"])],512),f(M)],64)}}});var Ae=q(xe,[["__scopeId","data-v-0bc377b9"]]);export{Ae as default};
