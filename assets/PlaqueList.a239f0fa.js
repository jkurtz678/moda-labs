import{d as z,r as d,o as m,b as y,i as t,t as x,h as e,F as B,_ as R,k as $,c as C,v as X,w as o,e as v,g as I,x as U,f as L,y as Y,z as F,A as M,j as f,B as Z,C as ee,D as J,m as V,u as te}from"./index.15aa8869.js";import{u as D,c as se}from"./plaque.eacbcaaa.js";import{u as Q}from"./plaque.84cc2a15.js";import{_ as oe,a as le,b as ne,u as G,c as H}from"./token-meta.a8067296.js";import{s as ae,u as ie,h as O}from"./account.c0ed453c.js";import{_ as _e}from"./PlaqueTokenItem.4a713a82.js";import"./token-meta.75ccf96c.js";const de=t("hr",{class:"hr"},null,-1),ue={class:"card-flex-container"},re={style:{flex:"1",width:"70px"}},ce=["src"],pe={style:{flex:"3 1 0%"}},me={class:"bold"},fe={class:"bold"},ge=z({props:{in_list:{type:Boolean},token:null},emits:["update_token_list"],setup(l,{emit:u}){const a=l,i=p=>new URL({"../assets/base.css":oe,"../assets/logo.png":le,"../assets/logo.svg":ne}[`../assets/${p}`],self.location).href;return(p,w)=>{const h=d("el-button");return m(),y(B,null,[de,t("div",ue,[t("div",re,[t("img",{src:i("logo.png"),style:{width:"70px"}},null,8,ce)]),t("div",pe,[t("p",me,x(a.token.entity.name),1),t("p",fe,x(a.token.entity.artist),1)]),e(h,{icon:l.in_list?"close":"plus",type:l.in_list?"danger":"success",plain:"",circle:"",onClick:w[0]||(w[0]=b=>u("update_token_list",a.token.id))},null,8,["icon","type"])])],64)}}});const K=l=>(F("data-v-02f75ac4"),l=l(),M(),l),ve={class:"dialog-container"},he={key:0},ye=K(()=>t("hr",{class:"hr"},null,-1)),ke={class:"dialog-footer"},we=K(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),qe=f("Clear"),xe=f("Save"),$e=z({props:{show_add_token_dialog:{type:Boolean},plaque_id:null},emits:["update:show_add_token_dialog"],setup(l,{emit:u}){const a=l,i=$([]),p=$(!1),{width:w,screen_type:h}=G(),b=Q(),P=H(),r=C({get(){return a.show_add_token_dialog},set(n){u("update:show_add_token_dialog",n)}});X(r,n=>{n&&(i.value=JSON.parse(JSON.stringify(A.value.entity.token_meta_id_list)))});const s=C(()=>P.archive_token_meta_list),q=C(()=>{console.log(s);const n=[];if(s!=null&&s.value)for(let c of s==null?void 0:s.value)b.meta_in_playlist(a.plaque_id,c.id)?n.unshift(c):n.push(c);return n}),A=C(()=>b.plaque_map[a.plaque_id]),S=C(()=>{const n={};return i.value.forEach(c=>{n[c]=!0}),n}),T=n=>{i.value.some(c=>c===n)?i.value=i.value.filter(c=>c!=n):i.value.push(n)},g=async()=>{p.value=!0,await D(a.plaque_id,{token_meta_id_list:i.value}).catch(n=>{ae(`Error updating plaque tokens - ${n}`)}),p.value=!1,r.value=!1},k=()=>{i.value=[]};return(n,c)=>{const j=d("el-card"),_=d("el-button"),W=d("el-dialog");return m(),y("div",ve,[e(W,{center:"",modelValue:v(r),"onUpdate:modelValue":c[0]||(c[0]=E=>Y(r)?r.value=E:null),title:"Add tokens to plaque","close-on-click-modal":!1,fullscreen:v(h)=="xs"},{footer:o(()=>[t("span",ke,[t("div",null,x(`Tokens in playlist: ${i.value.length}`),1),we,e(_,{onClick:k},{default:o(()=>[qe]),_:1}),e(_,{type:"info",onClick:g,loading:p.value},{default:o(()=>[xe]),_:1},8,["loading"])])]),default:o(()=>[e(j,{class:"box-card",shadow:"never"},{default:o(()=>[v(q).length==0?(m(),y("div",he,"No tokens found")):I("",!0),(m(!0),y(B,null,U(v(q),E=>(m(),L(ge,{token:E,in_list:Boolean(v(S)[E.id]),onUpdate_token_list:T},null,8,["token","in_list"]))),256)),ye]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}});var be=R($e,[["__scopeId","data-v-02f75ac4"]]);const N=l=>(F("data-v-4bee7b86"),l=l(),M(),l),Ce={style:{display:"flex","align-items":"center",padding:"1em"}},Ae=N(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Se=f("online"),Pe={class:"card-simple"},Te=N(()=>t("hr",null,null,-1)),Ve=N(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"title",-1)),Be=N(()=>t("div",{style:{"font-size":"var(--el-font-size-extra-small)"}},"artist",-1)),Ne={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"1em"}},Ee={style:{padding:"1em"}},Ie=f(" View "),Le={key:0,class:"card-detail"},ze={style:{padding:"0 1em"}},je={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"0.5em 1em"}},De=f("Settings"),Re=f("Add Artwork"),Ue={key:0,style:{padding:"1em"}},Fe={style:{display:"flex",padding:"1em"}},Me=f("Clear Tokens"),Je=N(()=>t("div",{style:{"flex-grow":"1"}},null,-1)),Oe=f("Close"),Qe={key:0,style:{padding:"1em",display:"flex","justify-content":"space-between"}},Ge=f("Forget Display"),He=f("Close"),Ke=z({props:{plaque:null},setup(l){const u=l,a=$("simple"),i=$(!1),p=H(),w=C(()=>h.value.length==0?null:h.value[0]),h=C(()=>{const r=p.archive_token_meta_map;return u.plaque.entity.token_meta_id_list.map(q=>r[q])});$("0"),$(!0);const b=()=>{J.confirm(`Are you sure you want to clear tokens for plaque '${u.plaque.entity.name}'?`,"Clear tokens",{type:"warning"}).then(()=>{D(u.plaque.id,{token_meta_id_list:[]}).then(()=>{V({type:"success",message:"Tokens cleared"})}).catch(r=>{V({message:`Error clearing tokens from plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})},P=()=>{J.confirm(`Are you sure you want to forget the plaque named '${u.plaque.entity.name}'?`,"Forget plaque",{type:"warning"}).then(()=>{D(u.plaque.id,{wallet_address:""}).then(()=>{V({type:"success",message:"Plaque forgotten"})}).catch(r=>{V({message:`Error forgetting plaque - ${r}`,type:"error",showClose:!0,duration:12e3})})})};return(r,s)=>{const q=d("el-tag"),A=d("el-col"),S=d("el-row"),T=d("ArrowRight"),g=d("el-icon"),k=d("el-button"),n=d("el-collapse-transition"),c=d("Close"),j=d("el-card");return m(),L(j,null,{default:o(()=>[t("div",Ce,[t("h1",null,x(u.plaque.entity.name),1),Ae,e(q,{class:"ml-2",type:"success"},{default:o(()=>[Se]),_:1})]),e(n,null,{default:o(()=>[Z(t("section",Pe,[Te,e(S,{style:{"margin-bottom":"8px",padding:"1em"}},{default:o(()=>[e(A,{span:12},{default:o(()=>{var _;return[Ve,t("span",null,x(((_=v(w))==null?void 0:_.entity.name)||"N/A"),1)]}),_:1}),e(A,{span:12},{default:o(()=>{var _;return[Be,f(" "+x(((_=v(w))==null?void 0:_.entity.artist)||"N/A"),1)]}),_:1})]),_:1}),t("div",Ne,[t("div",Ee,x(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),e(k,{onClick:s[0]||(s[0]=_=>a.value="detail")},{default:o(()=>[Ie,e(g,{class:"el-icon--right"},{default:o(()=>[e(T)]),_:1})]),_:1})])],512),[[ee,a.value=="simple"]])]),_:1}),e(n,null,{default:o(()=>[a.value=="detail"?(m(),y("section",Le,[t("p",ze,x(`Total artworks: ${l.plaque.entity.token_meta_id_list.length}`),1),t("div",je,[e(k,{onClick:s[1]||(s[1]=_=>a.value="settings")},{default:o(()=>[De]),_:1}),e(k,{type:"info",onClick:s[2]||(s[2]=_=>i.value=!0)},{default:o(()=>[Re]),_:1})]),v(h).length==0?(m(),y("div",Ue,"No tokens added")):I("",!0),(m(!0),y(B,null,U(v(h),_=>(m(),L(_e,{token_meta:_},null,8,["token_meta"]))),256)),t("div",Fe,[e(k,{onClick:b},{default:o(()=>[Me]),_:1}),Je,e(k,{onClick:s[3]||(s[3]=_=>a.value="simple")},{default:o(()=>[Oe,e(g,{class:"el-icon--right"},{default:o(()=>[e(c)]),_:1})]),_:1})])])):I("",!0)]),_:1}),e(n,null,{default:o(()=>[a.value=="settings"?(m(),y("section",Qe,[e(k,{type:"danger",plain:"",onClick:P},{default:o(()=>[Ge]),_:1}),e(k,{onClick:s[4]||(s[4]=_=>a.value="detail")},{default:o(()=>[He,e(g,{class:"el-icon--right"},{default:o(()=>[e(c)]),_:1})]),_:1})])):I("",!0)]),_:1}),e(be,{plaque_id:u.plaque.id,show_add_token_dialog:i.value,"onUpdate:show_add_token_dialog":s[5]||(s[5]=_=>i.value=_)},null,8,["plaque_id","show_add_token_dialog"])]),_:1})}}});var We=R(Ke,[["__scopeId","data-v-4bee7b86"]]);const Xe=l=>(F("data-v-4c8baa0e"),l=l(),M(),l),Ye={class:"add-button-container"},Ze={style:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},et=Xe(()=>t("div",{style:{"font-size":"17px"}},"Add plaque",-1)),tt={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},st=f("Scan Plaque QR Code"),ot=f("Add test plaque "),lt=z({setup(l){const u=$(!1),{width:a,screen_type:i}=G(),p=$(!1),w=te(),h=ie(),b=Q(),P=async()=>{u.value=!0,await se({name:"Test Plaque",wallet_address:h.get_account.entity.wallet_address,token_meta_id_list:[],created_at:O.now(),updated_at:O.now()}).catch(r=>V({message:`Error creating test plaque- ${r}`,type:"error",showClose:!0,duration:12e3})),u.value=!1,p.value=!1};return(r,s)=>{const q=d("Plus"),A=d("el-icon"),S=d("el-button"),T=d("el-dialog");return m(),y(B,null,[(m(!0),y(B,null,U(v(b).plaques,g=>(m(),L(We,{plaque:g,key:g.id},null,8,["plaque"]))),128)),t("div",Ye,[t("div",Ze,[t("div",{class:"add-button",onClick:s[0]||(s[0]=g=>p.value=!0)},[e(A,{style:{"font-size":"26px","margin-bottom":"6px"}},{default:o(()=>[e(q)]),_:1}),et])])]),e(T,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=g=>p.value=g),title:"Add plaque",width:v(i)=="xs"?"90%":"50%"},{default:o(()=>[t("div",tt,[e(S,{onClick:s[1]||(s[1]=g=>{v(w).push("qr-scan"),p.value=!1}),icon:"camera",style:{margin:"10px 12px 10px 0px"}},{default:o(()=>[st]),_:1}),e(S,{icon:"plus",onClick:P,loading:u.value,style:{margin:"10px 0px 10px 0px"}},{default:o(()=>[ot]),_:1},8,["loading"])])]),_:1},8,["modelValue","width"])],64)}}});var ct=R(lt,[["__scopeId","data-v-4c8baa0e"]]);export{ct as default};
