import{u as B,_ as D,a as P,b as L,c as S,d as U}from"./token-meta.c58fd0c8.js";import{d as V,u as $,a as N,c as F,r as c,o as l,b as y,e as s,f as q,g as x,F as E,h as n,w as d,t as H,i as T,j as M,_ as I,k as O,l as j,E as W,R as z}from"./index.15049fac.js";import{u as R,s as u}from"./account.ae2eb44e.js";import{u as G}from"./plaque.141bc630.js";import{u as J}from"./plaque.04b9e0a4.js";import"./token-meta.6824a539.js";const K={style:{display:"flex","align-items":"center"}},Q=T("div",{style:{"flex-grow":"1"}},null,-1),X=M(" Cancel "),Y=T("div",{style:{"flex-grow":"1"}},null,-1),Z={key:0,style:{"margin-right":"10px"}},ee=M("Logout"),te=V({setup(A){const o=$(),p=N(),_=R(),{width:C,screen_type:m}=B(),w=(t,e)=>{t.paneName&&typeof t.paneName=="string"&&o.push({name:t.paneName})},g=F(()=>{const t=_.account;if(!t)return"";if(t.entity.ens_name)return t.entity.ens_name;const e=t.entity.wallet_address;return`${e.substring(0,6)}...${e.substring(e.length-4)}`}),f=()=>{_.logout(),o.push({name:"landing",query:{redir:window.location.href}})},i=t=>new URL({"../assets/base.css":D,"../assets/logo.png":P,"../assets/logo.svg":L,"../assets/search-icon.svg":S}[`../assets/${t}`],self.location).href;return(t,e)=>{const v=c("el-image"),h=c("el-button"),k=c("el-tab-pane"),b=c("el-tabs");return l(),y("div",K,[s(m)!="xs"?(l(),q(v,{key:0,src:i("logo.png"),style:{width:"43px",height:"43px","margin-right":"2em"}},null,8,["src"])):x("",!0),s(o).currentRoute.value.name=="qr-scan"?(l(),y(E,{key:1},[Q,n(h,{icon:"close",onClick:e[0]||(e[0]=r=>s(o).push("plaque-list"))},{default:d(()=>[X]),_:1})],64)):(l(),y(E,{key:2},[n(b,{modelValue:s(p).name,"onUpdate:modelValue":e[1]||(e[1]=r=>s(p).name=r),onTabClick:w},{default:d(()=>[n(k,{label:"Plaques",name:"plaque-list"}),n(k,{label:"Tokens",name:"token-list"})]),_:1},8,["modelValue"]),Y,s(m)!="xs"?(l(),y("div",Z,H(s(g)),1)):x("",!0),n(h,{onClick:f,style:{"margin-left":"1em"}},{default:d(()=>[ee]),_:1})],64))])}}});const oe=V({setup(A){const o=R(),p=G(),_=U(),C=$(),m=O(!1),w=N();return j(async()=>{const g=W.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),{wallet_address:f,signature:i,ens_name:t}=o.getCachedAccountData();if(!f||!i){C.push({name:"landing",query:{redir:window.location.href}}),g.close();return}if(await o.loadAccount(f,i,t),o.account==null){u("Error - failed to load account");return}const e=o.get_account.entity.wallet_address,v=p.loadPlaques(e).catch(a=>u(`Error loading plaques - ${a}`)),h=_.loadArchiveTokenMetas(e).catch(a=>u(`Error loading archive token metas - ${a}`)),k=_.loadOpenseaMintedTokenMetas(e).catch(a=>u(`Error loading opensea minted tokens - ${a}`)),b=_.loadOpenseaWalletTokenMetas(e).catch(a=>u(`Error loading opensea wallet tokens - ${a}`));await Promise.all([v,h,k,b]);const r=w.query.plaque_id;r&&typeof r=="string"&&!p.plaque_map[r]&&await J(r,{wallet_address:o.get_account.entity.wallet_address,token_meta_id_list:[]}).catch(a=>{u(`Error adding plaque from query param = ${a}`)}),m.value=!0,g.close()}),(g,f)=>{const i=c("el-header"),t=c("el-main"),e=c("el-container");return l(),q(e,{style:{height:"100%"}},{default:d(()=>[n(i,{class:"header"},{default:d(()=>[n(te)]),_:1}),n(t,{style:{"background-color":"#DAD9D7"}},{default:d(()=>[m.value?(l(),q(s(z),{key:0})):x("",!0)]),_:1})]),_:1})}}});var _e=I(oe,[["__scopeId","data-v-639fdf78"]]);export{_e as default};
