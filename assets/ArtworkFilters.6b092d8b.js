import{u as F}from"./gallery.66363ddd.js";import{T as w}from"./types.d2ec9214.js";import{_ as A,d as C,r as m,z as u,c as x,b as y,o as k,e as h,w as i,i as a,j as L,h as B,I as U,f as q,F as N,p as O,l as T,k as v}from"./index.17c7e32d.js";const b=n=>(O("data-v-31cfec12"),n=n(),T(),n),z=b(()=>v("div",{class:"caption"},"Filter by gallery",-1)),P=b(()=>v("div",{class:"caption"},"Filter by aspect ratio",-1)),j=b(()=>v("div",{class:"caption"},"Filter by platform",-1)),E=b(()=>v("div",{class:"caption"},"Sort order",-1)),G=C({__name:"ArtworkFilters",props:{all_tokens:null,search_filter:null},emits:["update-filtered-tokens"],setup(n,{emit:V}){const _=n,S=F(),p=m(localStorage.getItem("artwork_grid_aspect_ratio_filter")||"");u(p,t=>{localStorage.setItem("artwork_grid_aspect_ratio_filter",t)});const c=m(localStorage.getItem("artwork_grid_filter_by_gallery")||"");u(c,t=>{localStorage.setItem("artwork_grid_filter_by_gallery",t)});const f=m(localStorage.getItem("artwork_grid_filter_by_platform")||"");u(f,t=>{localStorage.setItem("artwork_grid_filter_by_platform",t)});const d=m(localStorage.getItem("artwork_grid_sort_order")||"name");u(d,t=>{localStorage.setItem("artwork_grid_sort_order",t)});const I=x(()=>{if(!_.all_tokens)return[];let t=_.all_tokens.filter(e=>{var o,l,s;if(_.search_filter&&!((o=e.entity.artist)!=null&&o.toLowerCase().includes(_.search_filter.toLowerCase()))&&!((l=e.entity.name)!=null&&l.toLowerCase().includes(_.search_filter.toLowerCase()))||c.value&&!((s=S.gallery_list.find(g=>g.id==c.value))!=null&&s.entity.token_meta_id_list.includes(e.id)))return!1;switch(f.value){case"moda_archive":if(e.entity.platform!=w.Archive)return!1;break;case"opensea":if(e.entity.platform!=w.Opensea&&e.entity.platform!=w.OpenseaArchive)return!1;break}switch(p.value){case"portrait":if(!e.entity.aspect_ratio||e.entity.aspect_ratio>.9)return!1;break;case"landscape":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<1.1)return!1;break;case"square":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<.9||e.entity.aspect_ratio>1.1)return!1;break}return!0});return d.value==="name"?t=t.sort((e,o)=>e.entity.name.localeCompare(o.entity.name)):d.value==="created_at"&&(t=t.sort((e,o)=>e.entity.created_at==null&&o.entity.created_at==null?0:e.entity.created_at==null?1:o.entity.created_at==null?-1:o.entity.created_at.seconds-e.entity.created_at.seconds)),t});return u(I,t=>{V("update-filtered-tokens",t)},{immediate:!0}),(t,e)=>{const o=y("el-button"),l=y("el-option"),s=y("el-select"),g=y("el-popover");return k(),h(g,{placement:"bottom",title:"Artwork Filters",width:300,trigger:"click"},{reference:i(()=>[a(o,{icon:"Filter",style:{"margin-left":"10px"},type:"info",size:"small"},{default:i(()=>[L("Filters")]),_:1})]),default:i(()=>[z,a(s,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),placeholder:"Filter by gallery",class:"filter-select"},{default:i(()=>[a(l,{label:"All artwork",value:""}),(k(!0),B(N,null,U(q(S).gallery_list,r=>(k(),h(l,{key:r.id,label:`${r.entity.name}`,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),P,a(s,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),class:"filter-select"},{default:i(()=>[a(l,{label:"All",value:""}),a(l,{label:"Landscape",value:"landscape"}),a(l,{label:"Portrait",value:"portrait"}),a(l,{label:"Square",value:"square"})]),_:1},8,["modelValue"]),j,a(s,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=r=>f.value=r),class:"filter-select"},{default:i(()=>[a(l,{label:"All",value:""}),a(l,{label:"Moda Archive",value:"moda_archive"}),a(l,{label:"Opensea",value:"opensea"})]),_:1},8,["modelValue"]),E,a(s,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=r=>d.value=r),placeholder:"Sort by",class:"filter-select"},{default:i(()=>[a(l,{label:"Sort by name",value:"name"}),a(l,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"])]),_:1})}}});var H=A(G,[["__scopeId","data-v-31cfec12"]]);export{H as A};
