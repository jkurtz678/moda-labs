import{u as L}from"./gallery.ecc1b264.js";import{T as w}from"./types.d2ec9214.js";import{_ as B,d as U,r as v,z as f,c as S,b as m,o as k,e as V,w as s,i as a,j as q,f as I,h as N,I as O,F as T,p as z,l as P,k as b}from"./index.7011f6fd.js";const g=_=>(z("data-v-5cce4dc9"),_=_(),P(),_),j=g(()=>b("div",{class:"caption"},"Filter by gallery",-1)),E=g(()=>b("div",{class:"caption"},"Filter by aspect ratio",-1)),G=g(()=>b("div",{class:"caption"},"Filter by platform",-1)),M=g(()=>b("div",{class:"caption"},"Sort order",-1)),$=U({__name:"ArtworkFilters",props:{all_tokens:null,search_filter:null},emits:["update-filtered-tokens"],setup(_,{emit:F}){const c=_,h=L(),d=v(localStorage.getItem("artwork_grid_aspect_ratio_filter")||"");f(d,t=>{localStorage.setItem("artwork_grid_aspect_ratio_filter",t)});const i=v(localStorage.getItem("artwork_grid_filter_by_gallery")||"");f(i,t=>{localStorage.setItem("artwork_grid_filter_by_gallery",t)});const u=v(localStorage.getItem("artwork_grid_filter_by_platform")||"");f(u,t=>{localStorage.setItem("artwork_grid_filter_by_platform",t)});const p=v(localStorage.getItem("artwork_grid_sort_order")||"name");f(p,t=>{localStorage.setItem("artwork_grid_sort_order",t)});const A=S(()=>d.value||i.value||u.value),C=S(()=>{if(!c.all_tokens)return[];let t=c.all_tokens.filter(e=>{var o,y,l;if(c.search_filter&&!((o=e.entity.artist)!=null&&o.toLowerCase().includes(c.search_filter.toLowerCase()))&&!((y=e.entity.name)!=null&&y.toLowerCase().includes(c.search_filter.toLowerCase()))||i.value&&!((l=h.gallery_list.find(n=>n.id==i.value))!=null&&l.entity.token_meta_id_list.includes(e.id)))return!1;switch(u.value){case"moda_archive":if(e.entity.platform!=w.Archive)return!1;break;case"opensea":if(e.entity.platform!=w.Opensea&&e.entity.platform!=w.OpenseaArchive)return!1;break}switch(d.value){case"portrait":if(!e.entity.aspect_ratio||e.entity.aspect_ratio>.9)return!1;break;case"landscape":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<1.1)return!1;break;case"square":if(!e.entity.aspect_ratio||e.entity.aspect_ratio<.9||e.entity.aspect_ratio>1.1)return!1;break}return!0});return p.value==="name"?t=t.sort((e,o)=>e.entity.name.localeCompare(o.entity.name)):p.value==="created_at"&&(t=t.sort((e,o)=>e.entity.created_at==null&&o.entity.created_at==null?0:e.entity.created_at==null?1:o.entity.created_at==null?-1:o.entity.created_at.seconds-e.entity.created_at.seconds)),t});return f(C,t=>{F("update-filtered-tokens",t)},{immediate:!0}),(t,e)=>{const o=m("el-button"),y=m("el-badge"),l=m("el-option"),n=m("el-select"),x=m("el-popover");return k(),V(x,{placement:"bottom",title:"Artwork Filters",width:300,trigger:"click"},{reference:s(()=>[a(y,{"is-dot":"",hidden:!I(A)},{default:s(()=>[a(o,{icon:"Filter",style:{"margin-left":"10px"},type:"info",size:"small"},{default:s(()=>[q("Filters")]),_:1})]),_:1},8,["hidden"])]),default:s(()=>[j,a(n,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),placeholder:"Filter by gallery",class:"filter-select"},{default:s(()=>[a(l,{label:"All artwork",value:""}),(k(!0),N(T,null,O(I(h).gallery_list,r=>(k(),V(l,{key:r.id,label:`${r.entity.name}`,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),E,a(n,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value=r),class:"filter-select"},{default:s(()=>[a(l,{label:"All",value:""}),a(l,{label:"Landscape",value:"landscape"}),a(l,{label:"Portrait",value:"portrait"}),a(l,{label:"Square",value:"square"})]),_:1},8,["modelValue"]),G,a(n,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=r=>u.value=r),class:"filter-select"},{default:s(()=>[a(l,{label:"All",value:""}),a(l,{label:"Moda Archive",value:"moda_archive"}),a(l,{label:"Opensea",value:"opensea"})]),_:1},8,["modelValue"]),M,a(n,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=r=>p.value=r),placeholder:"Sort by",class:"filter-select"},{default:s(()=>[a(l,{label:"Sort by name",value:"name"}),a(l,{label:"Sort by newest",value:"created_at"})]),_:1},8,["modelValue"])]),_:1})}}});var K=B($,[["__scopeId","data-v-5cce4dc9"]]);export{K as A};
